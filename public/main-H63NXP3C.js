var mR=Object.defineProperty,yR=Object.defineProperties;var vR=Object.getOwnPropertyDescriptors;var qw=Object.getOwnPropertySymbols,_R=Object.getPrototypeOf,wR=Object.prototype.hasOwnProperty,ER=Object.prototype.propertyIsEnumerable,IR=Reflect.get;var zw=(t,e,n)=>e in t?mR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})wR.call(e,n)&&zw(t,n,e[n]);if(qw)for(var n of qw(e))ER.call(e,n)&&zw(t,n,e[n]);return t},Te=(t,e)=>yR(t,vR(e));var yr=(t,e,n)=>IR(_R(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var Gw=null;var Wh=1,Kh=Symbol("SIGNAL");function Ee(t){let e=Gw;return Gw=t,e}var Ww={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bR(t){if(!(Jh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Wh)){if(!t.producerMustRecompute(t)&&!Qh(t)){t.dirty=!1,t.lastCleanEpoch=Wh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Wh}}function Kw(t){return t&&(t.nextProducerIndex=0),Ee(t)}function Qw(t,e){if(Ee(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Jh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Yh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Qh(t){Wc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(bR(n),r!==n.version))return!0}return!1}function Yw(t){if(Wc(t),Jh(t))for(let e=0;e<t.producerNode.length;e++)Yh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Yh(t,e){if(CR(t),Wc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Yh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Wc(i),i.producerIndexOfThis[r]=e}}function Jh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Wc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function CR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function DR(){throw new Error}var TR=DR;function Jw(t){TR=t}function ne(t){return typeof t=="function"}function Yi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Kc=Yi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Yr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var $e=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof Kc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Zw(o)}catch(s){e=e??[],s instanceof Kc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Kc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Zw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Yr(n,e)}remove(e){let{_finalizers:n}=this;n&&Yr(n,e),e instanceof t&&e._removeParent(this)}};$e.EMPTY=(()=>{let t=new $e;return t.closed=!0,t})();var Zh=$e.EMPTY;function Qc(t){return t instanceof $e||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function Zw(t){ne(t)?t():t.unsubscribe()}var Zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ji={setTimeout(t,e,...n){let{delegate:r}=Ji;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ji;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Yc(t){Ji.setTimeout(()=>{let{onUnhandledError:e}=Zt;if(e)e(t);else throw t})}function Vs(){}var Xw=Xh("C",void 0,void 0);function e0(t){return Xh("E",void 0,t)}function t0(t){return Xh("N",t,void 0)}function Xh(t,e,n){return{kind:t,value:e,error:n}}var Jr=null;function Zi(t){if(Zt.useDeprecatedSynchronousErrorHandling){let e=!Jr;if(e&&(Jr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Jr;if(Jr=null,n)throw r}}else t()}function n0(t){Zt.useDeprecatedSynchronousErrorHandling&&Jr&&(Jr.errorThrown=!0,Jr.error=t)}var Zr=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qc(e)&&e.add(this)):this.destination=RR}static create(e,n,r){return new Xi(e,n,r)}next(e){this.isStopped?tf(t0(e),this):this._next(e)}error(e){this.isStopped?tf(e0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tf(Xw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AR=Function.prototype.bind;function ef(t,e){return AR.call(t,e)}var nf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Jc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Jc(r)}else Jc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Jc(n)}}},Xi=class extends Zr{constructor(e,n,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Zt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ef(e.next,o),error:e.error&&ef(e.error,o),complete:e.complete&&ef(e.complete,o)}):i=e}this.destination=new nf(i)}};function Jc(t){Zt.useDeprecatedSynchronousErrorHandling?n0(t):Yc(t)}function SR(t){throw t}function tf(t,e){let{onStoppedNotification:n}=Zt;n&&Ji.setTimeout(()=>n(t,e))}var RR={closed:!0,next:Vs,error:SR,complete:Vs};var eo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function rf(...t){return of(t)}function of(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var me=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=xR(n)?n:new Xi(n,r,i);return Zi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=r0(r),new r((i,o)=>{let s=new Xi({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[eo](){return this}pipe(...n){return of(n)(this)}toPromise(n){return n=r0(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function r0(t){var e;return(e=t??Zt.Promise)!==null&&e!==void 0?e:Promise}function MR(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}function xR(t){return t&&t instanceof Zr||MR(t)&&Qc(t)}function sf(t){return ne(t?.lift)}function ye(t){return e=>{if(sf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(t,e,n,r,i){return new af(t,e,n,r,i)}var af=class extends Zr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function to(){return ye((t,e)=>{let n=null;t._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var no=class extends me{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,sf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let n=this.getSubject();e.add(this.source.subscribe(le(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return to()(this)}};var i0=Yi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var mt=(()=>{class t extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Zc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new i0}next(n){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Zh:(this.currentObservers=null,o.push(n),new $e(()=>{this.currentObservers=null,Yr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new me;return n.source=this,n}}return t.create=(e,n)=>new Zc(e,n),t})(),Zc=class extends mt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Zh}};var st=class extends mt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cf={now(){return(cf.delegate||Date).now()},delegate:void 0};var Xc=class extends $e{constructor(e,n){super()}schedule(e,n=0){return this}};var Us={setInterval(t,e,...n){let{delegate:r}=Us;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Us;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ro=class extends Xc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Us.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Us.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Yr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var io=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};io.now=cf.now;var oo=class extends io{constructor(e,n=io.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var uf=new oo(ro);var eu=class extends ro{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var tu=class extends oo{};var lf=new tu(eu);var Pt=new me(t=>t.complete());function o0(t){return t&&ne(t.schedule)}function s0(t){return t[t.length-1]}function nu(t){return ne(s0(t))?t.pop():void 0}function vr(t){return o0(s0(t))?t.pop():void 0}function df(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function c0(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function a0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xr(t){return this instanceof Xr?(this.v=t,this):new Xr(t)}function u0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){r[m]&&(i[m]=function(E){return new Promise(function(A,M){o.push([m,E,A,M])>1||a(m,E)})})}function a(m,E){try{u(r[m](E))}catch(A){p(o[0][3],A)}}function u(m){m.value instanceof Xr?Promise.resolve(m.value.v).then(l,h):p(o[0][2],m)}function l(m){a("next",m)}function h(m){a("throw",m)}function p(m,E){m(E),o.shift(),o.length&&a(o[0][0],o[0][1])}}function l0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof a0=="function"?a0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var ru=t=>t&&typeof t.length=="number"&&typeof t!="function";function iu(t){return ne(t?.then)}function ou(t){return ne(t[eo])}function su(t){return Symbol.asyncIterator&&ne(t?.[Symbol.asyncIterator])}function au(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function NR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cu=NR();function uu(t){return ne(t?.[cu])}function lu(t){return u0(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Xr(n.read());if(i)return yield Xr(void 0);yield yield Xr(r)}}finally{n.releaseLock()}})}function du(t){return ne(t?.getReader)}function ze(t){if(t instanceof me)return t;if(t!=null){if(ou(t))return PR(t);if(ru(t))return OR(t);if(iu(t))return FR(t);if(su(t))return d0(t);if(uu(t))return kR(t);if(du(t))return LR(t)}throw au(t)}function PR(t){return new me(e=>{let n=t[eo]();if(ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OR(t){return new me(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function FR(t){return new me(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Yc)})}function kR(t){return new me(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function d0(t){return new me(e=>{VR(t,e).catch(n=>e.error(n))})}function LR(t){return d0(lu(t))}function VR(t,e){var n,r,i,o;return c0(this,void 0,void 0,function*(){try{for(n=l0(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Rt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function _r(t,e=0){return ye((n,r)=>{n.subscribe(le(r,i=>Rt(r,t,()=>r.next(i),e),()=>Rt(r,t,()=>r.complete(),e),i=>Rt(r,t,()=>r.error(i),e)))})}function wr(t,e=0){return ye((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function h0(t,e){return ze(t).pipe(wr(e),_r(e))}function f0(t,e){return ze(t).pipe(wr(e),_r(e))}function p0(t,e){return new me(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function g0(t,e){return new me(n=>{let r;return Rt(n,e,()=>{r=t[cu](),Rt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function hu(t,e){if(!t)throw new Error("Iterable cannot be null");return new me(n=>{Rt(n,e,()=>{let r=t[Symbol.asyncIterator]();Rt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function m0(t,e){return hu(lu(t),e)}function y0(t,e){if(t!=null){if(ou(t))return h0(t,e);if(ru(t))return p0(t,e);if(iu(t))return f0(t,e);if(su(t))return hu(t,e);if(uu(t))return g0(t,e);if(du(t))return m0(t,e)}throw au(t)}function Le(t,e){return e?y0(t,e):ze(t)}function ee(...t){let e=vr(t);return Le(t,e)}function so(t,e){let n=ne(t)?t:()=>t,r=i=>i.error(n());return new me(e?i=>e.schedule(r,0,i):r)}function hf(t){return!!t&&(t instanceof me||ne(t.lift)&&ne(t.subscribe))}var Bn=Yi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function de(t,e){return ye((n,r)=>{let i=0;n.subscribe(le(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:UR}=Array;function jR(t,e){return UR(e)?t(...e):t(e)}function fu(t){return de(e=>jR(t,e))}var{isArray:BR}=Array,{getPrototypeOf:$R,prototype:HR,keys:qR}=Object;function pu(t){if(t.length===1){let e=t[0];if(BR(e))return{args:e,keys:null};if(zR(e)){let n=qR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function zR(t){return t&&typeof t=="object"&&$R(t)===HR}function gu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function mu(...t){let e=vr(t),n=nu(t),{args:r,keys:i}=pu(t);if(r.length===0)return Le([],e);let o=new me(GR(r,e,i?s=>gu(i,s):Nt));return n?o.pipe(fu(n)):o}function GR(t,e,n=Nt){return r=>{v0(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)v0(e,()=>{let l=Le(t[u],e),h=!1;l.subscribe(le(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function v0(t,e,n){t?Rt(n,t,e):e()}function _0(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},E=M=>l<r?A(M):u.push(M),A=M=>{o&&e.next(M),l++;let R=!1;ze(n(M,h++)).subscribe(le(e,k=>{i?.(k),o?E(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?Rt(e,s,()=>A(k)):A(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(le(e,E,()=>{p=!0,m()})),()=>{a?.()}}function Ze(t,e,n=1/0){return ne(e)?Ze((r,i)=>de((o,s)=>e(r,o,i,s))(ze(t(r,i))),n):(typeof e=="number"&&(n=e),ye((r,i)=>_0(r,i,t,n)))}function ao(t=1/0){return Ze(Nt,t)}function w0(){return ao(1)}function co(...t){return w0()(Le(t,vr(t)))}function yu(t){return new me(e=>{ze(t()).subscribe(e)})}function ff(...t){let e=nu(t),{args:n,keys:r}=pu(t),i=new me(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;ze(n[h]).subscribe(le(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?gu(r,a):a),o.complete())}))}});return e?i.pipe(fu(e)):i}function Xt(t,e){return ye((n,r)=>{let i=0;n.subscribe(le(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Er(t){return ye((e,n)=>{let r=null,i=!1,o;r=e.subscribe(le(n,void 0,void 0,s=>{o=ze(t(s,Er(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function E0(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(le(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function uo(t,e){return ne(e)?Ze(t,e,1):Ze(t,1)}function Ir(t){return ye((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function $n(t){return t<=0?()=>Pt:ye((e,n)=>{let r=0;e.subscribe(le(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function pf(t){return de(()=>t)}function vu(t=WR){return ye((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function WR(){return new Bn}function js(t){return ye((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function fn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((i,o)=>t(i,o,r)):Nt,$n(1),n?Ir(e):vu(()=>new Bn))}function lo(t){return t<=0?()=>Pt:ye((e,n)=>{let r=[];e.subscribe(le(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function gf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((i,o)=>t(i,o,r)):Nt,lo(1),n?Ir(e):vu(()=>new Bn))}function mf(t,e){return ye(E0(t,e,arguments.length>=2,!0))}function yf(...t){let e=vr(t);return ye((n,r)=>{(e?co(t,n,e):co(t,n)).subscribe(r)})}function en(t,e){return ye((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(le(r,u=>{i?.unsubscribe();let l=0,h=o++;ze(t(u,h)).subscribe(i=le(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vf(t){return ye((e,n)=>{ze(t).subscribe(le(n,()=>n.complete(),Vs)),!n.closed&&e.subscribe(n)})}function Xe(t,e,n){let r=ne(t)||e||n?{next:t,error:e,complete:n}:t;return r?ye((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}var sE="https://g.co/ng/security#xss",z=class extends Error{constructor(e,n){super(Ap(e,n)),this.code=e}};function Ap(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Xs(t){return{toString:t}.toString()}var _u="__parameters__";function KR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function aE(t,e,n){return Xs(()=>{let r=KR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(_u)?u[_u]:Object.defineProperty(u,_u,{value:[]})[_u];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Hn=globalThis;function Me(t){for(let e in t)if(t[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function QR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function bt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(bt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function I0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var YR=Me({__forward_ref__:Me});function _n(t){return t.__forward_ref__=_n,t.toString=function(){return bt(this())},t}function It(t){return cE(t)?t():t}function cE(t){return typeof t=="function"&&t.hasOwnProperty(YR)&&t.__forward_ref__===_n}function X(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function hi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qu(t){return b0(t,lE)||b0(t,dE)}function uE(t){return Qu(t)!==null}function b0(t,e){return t.hasOwnProperty(e)?t[e]:null}function JR(t){let e=t&&(t[lE]||t[dE]);return e||null}function C0(t){return t&&(t.hasOwnProperty(D0)||t.hasOwnProperty(ZR))?t[D0]:null}var lE=Me({\u0275prov:Me}),D0=Me({\u0275inj:Me}),dE=Me({ngInjectableDef:Me}),ZR=Me({ngInjectorDef:Me}),Q=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=X({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hE(t){return t&&!!t.\u0275providers}var XR=Me({\u0275cmp:Me}),eM=Me({\u0275dir:Me}),tM=Me({\u0275pipe:Me}),nM=Me({\u0275mod:Me}),Mu=Me({\u0275fac:Me}),Bs=Me({__NG_ELEMENT_ID__:Me}),T0=Me({__NG_ENV_ID__:Me});function Yu(t){return typeof t=="string"?t:t==null?"":String(t)}function rM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yu(t)}function iM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new z(-200,t)}function Sp(t,e){throw new z(-201,!1)}var ae=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ae||{}),Of;function fE(){return Of}function Vt(t){let e=Of;return Of=t,e}function pE(t,e,n){let r=Qu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ae.Optional)return null;if(e!==void 0)return e;Sp(t,"Injector")}var oM={},$s=oM,Ff="__NG_DI_FLAG__",xu="ngTempTokenPath",sM="ngTokenPath",aM=/\n/gm,cM="\u0275",A0="__source",go;function uM(){return go}function br(t){let e=go;return go=t,e}function lM(t,e=ae.Default){if(go===void 0)throw new z(-203,!1);return go===null?pE(t,void 0,e):go.get(t,e&ae.Optional?null:void 0,e)}function he(t,e=ae.Default){return(fE()||lM)(It(t),e)}function j(t,e=ae.Default){return he(t,Ju(e))}function Ju(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kf(t){let e=[];for(let n=0;n<t.length;n++){let r=It(t[n]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],u=dM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(he(i,o))}else e.push(he(r))}return e}function gE(t,e){return t[Ff]=e,t.prototype[Ff]=e,t}function dM(t){return t[Ff]}function hM(t,e,n,r){let i=t[xu];throw e[A0]&&i.unshift(e[A0]),t.message=fM(`
`+t.message,i,n,r),t[sM]=i,t[xu]=null,t}function fM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==cM?t.slice(2):t;let i=bt(e);if(Array.isArray(e))i=e.map(bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):bt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(aM,`
  `)}`}var Ct=gE(aE("Optional"),8);var mE=gE(aE("SkipSelf"),4);function yo(t,e){let n=t.hasOwnProperty(Mu);return n?t[Mu]:null}function pM(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function gM(t){return t.flat(Number.POSITIVE_INFINITY)}function Rp(t,e){t.forEach(n=>Array.isArray(n)?Rp(n,e):e(n))}function yE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function mM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function yM(t,e,n){let r=ea(t,e);return r>=0?t[r|1]=n:(r=~r,mM(t,r,e,n)),r}function _f(t,e){let n=ea(t,e);if(n>=0)return t[n|1]}function ea(t,e){return vM(t,e,1)}function vM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var vo={},Ut=[],_o=new Q(""),vE=new Q("",-1),_E=new Q(""),Pu=class{get(e,n=$s){if(n===$s){let r=new Error(`NullInjectorError: No provider for ${bt(e)}!`);throw r.name="NullInjectorError",r}return n}},wE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(wE||{}),mn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mn||{}),at=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(at||{});function _M(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Lf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];wM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function EE(t){return t===3||t===4||t===6}function wM(t){return t.charCodeAt(0)===64}function Hs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?S0(t,n,i,null,e[++r]):S0(t,n,i,null,null))}}return t}function S0(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var IE="ng-template";function EM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&_M(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Mp(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Mp(t){return t.type===4&&t.value!==IE}function IM(t,e,n){let r=t.type===4&&!n?IE:t.value;return e===r}function bM(t,e,n){let r=4,i=t.attrs,o=i!==null?TM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!tn(r)&&!tn(u))return!1;if(s&&tn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!IM(t,u,n)||u===""&&e.length===1){if(tn(r))return!1;s=!0}}else if(r&8){if(i===null||!EM(t,i,u,n)){if(tn(r))return!1;s=!0}}else{let l=e[++a],h=CM(u,i,Mp(t),n);if(h===-1){if(tn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(tn(r))return!1;s=!0}}}}return tn(r)||s}function tn(t){return(t&1)===0}function CM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return AM(e,t)}function DM(t,e,n=!1){for(let r=0;r<e.length;r++)if(bM(t,e[r],n))return!0;return!1}function TM(t){for(let e=0;e<t.length;e++){let n=t[e];if(EE(n))return e}return t.length}function AM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function R0(t,e){return t?":not("+e.trim()+")":e}function SM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!tn(s)&&(e+=R0(o,i),i=""),r=s,o=o||!tn(r);n++}return i!==""&&(e+=R0(o,i)),e}function RM(t){return t.map(SM).join(",")}function MM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!tn(i))break;i=o}r++}return{attrs:e,classes:n}}function Bt(t){return Xs(()=>{let e=AE(t),n=Te(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===wE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mn.Emulated,styles:t.styles||Ut,_:null,schemas:t.schemas||null,tView:null,id:""});SE(n);let r=t.dependencies;return n.directiveDefs=x0(r,!1),n.pipeDefs=x0(r,!0),n.id=PM(n),n})}function xM(t){return ni(t)||bE(t)}function NM(t){return t!==null}function fi(t){return Xs(()=>({type:t.type,bootstrap:t.bootstrap||Ut,declarations:t.declarations||Ut,imports:t.imports||Ut,exports:t.exports||Ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function M0(t,e){if(t==null)return vo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=at.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==at.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Oe(t){return Xs(()=>{let e=AE(t);return SE(e),e})}function ni(t){return t[XR]||null}function bE(t){return t[eM]||null}function CE(t){return t[tM]||null}function DE(t){let e=ni(t)||bE(t)||CE(t);return e!==null?e.standalone:!1}function TE(t,e){let n=t[nM]||null;if(!n&&e===!0)throw new Error(`Type ${bt(t)} does not have '\u0275mod' property.`);return n}function AE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||vo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ut,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:M0(t.inputs,e),outputs:M0(t.outputs),debugInfo:null}}function SE(t){t.features?.forEach(e=>e(t))}function x0(t,e){if(!t)return null;let n=e?CE:xM;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(NM)}function PM(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function wn(t){return{\u0275providers:t}}function OM(...t){return{\u0275providers:RE(!0,t),\u0275fromNgModule:!0}}function RE(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Rp(e,s=>{let a=s;Vf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ME(i,o),n}function ME(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];xp(i,o=>{e(o,r)})}}function Vf(t,e,n,r){if(t=It(t),!t)return!1;let i=null,o=C0(t),s=!o&&ni(t);if(!o&&!s){let u=t.ngModule;if(o=C0(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Vf(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Rp(o.imports,h=>{Vf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&ME(l,e)}if(!a){let l=yo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ut},i),e({provide:_E,useValue:i,multi:!0},i),e({provide:_o,useValue:()=>he(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;xp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function xp(t,e){for(let n of t)hE(n)&&(n=n.\u0275providers),Array.isArray(n)?xp(n,e):e(n)}var FM=Me({provide:String,useValue:Me});function xE(t){return t!==null&&typeof t=="object"&&FM in t}function kM(t){return!!(t&&t.useExisting)}function LM(t){return!!(t&&t.useFactory)}function wo(t){return typeof t=="function"}function VM(t){return!!t.useClass}var Zu=new Q(""),Cu={},UM={},wf;function Np(){return wf===void 0&&(wf=new Pu),wf}var jt=class{},qs=class extends jt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jf(e,s=>this.processProvider(s)),this.records.set(vE,ho(void 0,this)),i.has("environment")&&this.records.set(jt,ho(void 0,this));let o=this.records.get(Zu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_E,Ut,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=br(this),r=Vt(void 0),i;try{return e()}finally{br(n),Vt(r)}}get(e,n=$s,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(T0))return e[T0](this);r=Ju(r);let i,o=br(this),s=Vt(void 0);try{if(!(r&ae.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=qM(e)&&Qu(e);l&&this.injectableDefInScope(l)?u=ho(Uf(e),Cu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ae.Self?Np():this.parent;return n=r&ae.Optional&&n===$s?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[xu]=a[xu]||[]).unshift(bt(e)),o)throw a;return hM(a,e,"R3InjectorError",this.source)}else throw a}finally{Vt(s),br(o)}}resolveInjectorInitializers(){let e=Ee(null),n=br(this),r=Vt(void 0),i;try{let o=this.get(_o,Ut,ae.Self);for(let s of o)s()}finally{br(n),Vt(r),Ee(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){e=It(e);let n=wo(e)?e:It(e&&e.provide),r=BM(e);if(!wo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ho(void 0,Cu,!0),i.factory=()=>kf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ee(null);try{return n.value===Cu&&(n.value=UM,n.value=n.factory()),typeof n.value=="object"&&n.value&&HM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=It(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Uf(t){let e=Qu(t),n=e!==null?e.factory:yo(t);if(n!==null)return n;if(t instanceof Q)throw new z(204,!1);if(t instanceof Function)return jM(t);throw new z(204,!1)}function jM(t){if(t.length>0)throw new z(204,!1);let n=JR(t);return n!==null?()=>n.factory(t):()=>new t}function BM(t){if(xE(t))return ho(void 0,t.useValue);{let e=NE(t);return ho(e,Cu)}}function NE(t,e,n){let r;if(wo(t)){let i=It(t);return yo(i)||Uf(i)}else if(xE(t))r=()=>It(t.useValue);else if(LM(t))r=()=>t.useFactory(...kf(t.deps||[]));else if(kM(t))r=()=>he(It(t.useExisting));else{let i=It(t&&(t.useClass||t.provide));if($M(t))r=()=>new i(...kf(t.deps));else return yo(i)||Uf(i)}return r}function ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $M(t){return!!t.deps}function HM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function qM(t){return typeof t=="function"||typeof t=="object"&&t instanceof Q}function jf(t,e){for(let n of t)Array.isArray(n)?jf(n,e):n&&hE(n)?jf(n.\u0275providers,e):e(n)}function pi(t,e){t instanceof qs&&t.assertNotDestroyed();let n,r=br(t),i=Vt(void 0);try{return e()}finally{br(r),Vt(i)}}function zM(){return fE()!==void 0||uM()!=null}function GM(t){return typeof t=="function"}var Kn=0,se=1,W=2,ct=3,nn=4,sn=5,Ou=6,zs=7,rn=8,Eo=9,on=10,et=11,Gs=12,N0=13,Co=14,yn=15,ta=16,fo=17,qn=18,Xu=19,PE=20,Cr=21,Ef=22,ri=23,Dr=25,OE=1;var ii=7,Fu=8,Io=9,Ot=10,Pp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Pp||{});function ei(t){return Array.isArray(t)&&typeof t[OE]=="object"}function Qn(t){return Array.isArray(t)&&t[OE]===!0}function FE(t){return(t.flags&4)!==0}function el(t){return t.componentOffset>-1}function Op(t){return(t.flags&1)===1}function Tr(t){return!!t.template}function WM(t){return(t[W]&512)!==0}var Bf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function kE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Yn(){return LE}function LE(t){return t.type.prototype.ngOnChanges&&(t.setInput=QM),KM}Yn.ngInherit=!0;function KM(){let t=UE(this),e=t?.current;if(e){let n=t.previous;if(n===vo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function QM(t,e,n,r,i){let o=this.declaredInputs[r],s=UE(t)||YM(t,{previous:vo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Bf(l&&l.currentValue,n,u===vo),kE(t,e,i,n)}var VE="__ngSimpleChanges__";function UE(t){return t[VE]||null}function YM(t,e){return t[VE]=e}var P0=null;var pn=function(t,e,n){P0?.(t,e,n)},JM="svg",ZM="math",XM=!1;function ex(){return XM}function vn(t){for(;Array.isArray(t);)t=t[Kn];return t}function jE(t,e){return vn(e[t])}function $t(t,e){return vn(e[t.index])}function BE(t,e){return t.data[e]}function Sr(t,e){let n=e[t];return ei(n)?n:n[Kn]}function tx(t){return(t[W]&4)===4}function Fp(t){return(t[W]&128)===128}function nx(t){return Qn(t[ct])}function ku(t,e){return e==null?null:t[e]}function $E(t){t[fo]=0}function rx(t){t[W]&1024||(t[W]|=1024,Fp(t)&&Ws(t))}function ix(t,e){for(;t>0;)e=e[Co],t--;return e}function kp(t){return!!(t[W]&9216||t[ri]?.dirty)}function $f(t){t[on].changeDetectionScheduler?.notify(1),kp(t)?Ws(t):t[W]&64&&(ex()?(t[W]|=1024,Ws(t)):t[on].changeDetectionScheduler?.notify())}function Ws(t){t[on].changeDetectionScheduler?.notify();let e=Ks(t);for(;e!==null&&!(e[W]&8192||(e[W]|=8192,!Fp(e)));)e=Ks(e)}function HE(t,e){if((t[W]&256)===256)throw new z(911,!1);t[Cr]===null&&(t[Cr]=[]),t[Cr].push(e)}function ox(t,e){if(t[Cr]===null)return;let n=t[Cr].indexOf(e);n!==-1&&t[Cr].splice(n,1)}function Ks(t){let e=t[ct];return Qn(e)?e[ct]:e}var ce={lFrame:YE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function sx(){return ce.lFrame.elementDepthCount}function ax(){ce.lFrame.elementDepthCount++}function cx(){ce.lFrame.elementDepthCount--}function qE(){return ce.bindingsEnabled}function ux(){return ce.skipHydrationRootTNode!==null}function lx(t){return ce.skipHydrationRootTNode===t}function dx(){ce.skipHydrationRootTNode=null}function Ce(){return ce.lFrame.lView}function Dt(){return ce.lFrame.tView}function xe(t){return ce.lFrame.contextLView=t,t[rn]}function Ne(t){return ce.lFrame.contextLView=null,t}function Tt(){let t=zE();for(;t!==null&&t.type===64;)t=t.parent;return t}function zE(){return ce.lFrame.currentTNode}function hx(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function na(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function GE(){return ce.lFrame.isParent}function fx(){ce.lFrame.isParent=!1}function px(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function gx(t){return ce.lFrame.bindingIndex=t}function tl(){return ce.lFrame.bindingIndex++}function mx(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function yx(){return ce.lFrame.inI18n}function vx(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hf(e)}function _x(){return ce.lFrame.currentDirectiveIndex}function Hf(t){ce.lFrame.currentDirectiveIndex=t}function wx(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function WE(){return ce.lFrame.currentQueryIndex}function Lp(t){ce.lFrame.currentQueryIndex=t}function Ex(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[sn]:null}function KE(t,e,n){if(n&ae.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ae.Host);)if(i=Ex(o),i===null||(o=o[Co],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ce.lFrame=QE();return r.currentTNode=e,r.lView=t,!0}function Vp(t){let e=QE(),n=t[se];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function QE(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?YE(t):e}function YE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function JE(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ZE=JE;function Up(){let t=JE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ix(t){return(ce.lFrame.contextLView=ix(t,ce.lFrame.contextLView))[rn]}function Do(){return ce.lFrame.selectedIndex}function oi(t){ce.lFrame.selectedIndex=t}function jp(){let t=ce.lFrame;return BE(t.tView,t.selectedIndex)}function bx(){return ce.lFrame.currentNamespace}var XE=!0;function Bp(){return XE}function $p(t){XE=t}function Cx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=LE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Hp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Du(t,e,n){eI(t,e,3,n)}function Tu(t,e,n,r){(t[W]&3)===n&&eI(t,e,n,r)}function If(t,e){let n=t[W];(n&3)===e&&(n&=16383,n+=1,t[W]=n)}function eI(t,e,n,r){let i=r!==void 0?t[fo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[fo]+=65536),(a<o||o==-1)&&(Dx(t,n,e,u),t[fo]=(t[fo]&4294901760)+u+2),u++}function O0(t,e){pn(4,t,e);let n=Ee(null);try{e.call(t)}finally{Ee(n),pn(5,t,e)}}function Dx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[W]>>14<t[fo]>>16&&(t[W]&3)===e&&(t[W]+=16384,O0(a,o)):O0(a,o)}var mo=-1,si=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Tx(t){return t instanceof si}function Ax(t){return(t.flags&8)!==0}function Sx(t){return(t.flags&16)!==0}function tI(t){return t!==mo}function Lu(t){return t&32767}function Rx(t){return t>>16}function Vu(t,e){let n=Rx(t),r=e;for(;n>0;)r=r[Co],n--;return r}var qf=!0;function F0(t){let e=qf;return qf=t,e}var Mx=256,nI=Mx-1,rI=5,xx=0,gn={};function Nx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bs)&&(r=n[Bs]),r==null&&(r=n[Bs]=xx++);let i=r&nI,o=1<<i;e.data[t+(i>>rI)]|=o}function Uu(t,e){let n=iI(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,bf(r.data,t),bf(e,null),bf(r.blueprint,null));let i=qp(t,e),o=t.injectorIndex;if(tI(i)){let s=Lu(i),a=Vu(i,e),u=a[se].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function bf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function qp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=uI(i),r===null)return mo;if(n++,i=i[Co],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return mo}function zf(t,e,n){Nx(t,e,n)}function Px(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(EE(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function oI(t,e,n){if(n&ae.Optional||t!==void 0)return t;Sp(e,"NodeInjector")}function sI(t,e,n,r){if(n&ae.Optional&&r===void 0&&(r=null),!(n&(ae.Self|ae.Host))){let i=t[Eo],o=Vt(void 0);try{return i?i.get(e,r,n&ae.Optional):pE(e,r,n&ae.Optional)}finally{Vt(o)}}return oI(r,e,n)}function aI(t,e,n,r=ae.Default,i){if(t!==null){if(e[W]&2048&&!(r&ae.Self)){let s=Lx(t,e,n,r,gn);if(s!==gn)return s}let o=cI(t,e,n,r,gn);if(o!==gn)return o}return sI(e,n,r,i)}function cI(t,e,n,r,i){let o=Fx(n);if(typeof o=="function"){if(!KE(e,t,r))return r&ae.Host?oI(i,n,r):sI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))Sp(n);else return s}finally{ZE()}}else if(typeof o=="number"){let s=null,a=iI(t,e),u=mo,l=r&ae.Host?e[yn][sn]:null;for((a===-1||r&ae.SkipSelf)&&(u=a===-1?qp(t,e):e[a+8],u===mo||!L0(r,!1)?a=-1:(s=e[se],a=Lu(u),e=Vu(u,e)));a!==-1;){let h=e[se];if(k0(o,a,h.data)){let p=Ox(a,e,n,s,r,l);if(p!==gn)return p}u=e[a+8],u!==mo&&L0(r,e[se].data[a+8]===l)&&k0(o,a,e)?(s=h,a=Lu(u),e=Vu(u,e)):a=-1}}return i}function Ox(t,e,n,r,i,o){let s=e[se],a=s.data[t+8],u=r==null?el(a)&&qf:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,h=Au(a,s,n,u,l);return h!==null?ai(e,s,h,a):gn}function Au(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let E=p;E<m;E++){let A=s[E];if(E<u&&n===A||E>=u&&A.type===n)return E}if(i){let E=s[u];if(E&&Tr(E)&&E.type===n)return u}return null}function ai(t,e,n,r){let i=t[n],o=e.data;if(Tx(i)){let s=i;s.resolving&&iM(rM(o[n]));let a=F0(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Vt(s.injectImpl):null,h=KE(t,r,ae.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Cx(n,o[n],e)}finally{l!==null&&Vt(l),F0(a),s.resolving=!1,ZE()}}return i}function Fx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Bs)?t[Bs]:void 0;return typeof e=="number"?e>=0?e&nI:kx:e}function k0(t,e,n){let r=1<<t;return!!(n[e+(t>>rI)]&r)}function L0(t,e){return!(t&ae.Self)&&!(t&ae.Host&&e)}var ti=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aI(this._tNode,this._lView,e,Ju(r),n)}};function kx(){return new ti(Tt(),Ce())}function Jn(t){return Xs(()=>{let e=t.prototype.constructor,n=e[Mu]||Gf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Mu]||Gf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gf(t){return cE(t)?()=>{let e=Gf(It(t));return e&&e()}:yo(t)}function Lx(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[W]&2048&&!(s[W]&512);){let a=cI(o,s,n,r|ae.Self,gn);if(a!==gn)return a;let u=o.parent;if(!u){let l=s[PE];if(l){let h=l.get(n,gn,r);if(h!==gn)return h}u=uI(s),s=s[Co]}o=u}return i}function uI(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[sn]:null}function zp(t){return Px(Tt(),t)}function V0(t,e=null,n=null,r){let i=lI(t,e,n,r);return i.resolveInjectorInitializers(),i}function lI(t,e=null,n=null,r,i=new Set){let o=[n||Ut,OM(t)];return r=r||(typeof t=="object"?void 0:bt(t)),new qs(o,e||Np(),r||null,i)}var Ht=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return V0({name:""},i,r,"");{let o=r.name??"";return V0({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=$s,e.NULL=new Pu,e.\u0275prov=X({token:e,providedIn:"any",factory:()=>he(vE)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Vx="ngOriginalError";function Cf(t){return t[Vx]}var zn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Cf(e);for(;n&&Cf(n);)n=Cf(n);return n||null}},dI=new Q("",{providedIn:"root",factory:()=>j(zn).handleError.bind(void 0)}),hI=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Ux,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Wf=class extends hI{constructor(e){super(),this._lView=e}onDestroy(e){return HE(this._lView,e),()=>ox(this._lView,e)}};function Ux(){return new Wf(Ce())}function jx(){return To(Tt(),Ce())}function To(t,e){return new At($t(t,e))}var At=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=jx;let t=e;return t})();function Bx(t){return t instanceof At?t.nativeElement:t}var Kf=class extends mt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,zM()&&(this.destroyRef=j(hI,{optional:!0})??void 0)}emit(e){let n=Ee(null);try{super.next(e)}finally{Ee(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Df(o),i&&(i=Df(i)),s&&(s=Df(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}};function Df(t){return e=>{setTimeout(t,void 0,e)}}var Ve=Kf;function $x(){return this._results[Symbol.iterator]()}var Qf=class t{get changes(){return this._changes??=new Ve}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=$x)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=gM(e);(this._changesDetected=!pM(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function fI(t){return(t.flags&128)===128}var pI=new Map,Hx=0;function qx(){return Hx++}function zx(t){pI.set(t[Xu],t)}function Gx(t){pI.delete(t[Xu])}var U0="__ngContext__";function ci(t,e){ei(e)?(t[U0]=e[Xu],zx(e)):t[U0]=e}function gI(t){return yI(t[Gs])}function mI(t){return yI(t[nn])}function yI(t){for(;t!==null&&!Qn(t);)t=t[nn];return t}var Yf;function vI(t){Yf=t}function Wx(){if(Yf!==void 0)return Yf;if(typeof document<"u")return document;throw new z(210,!1)}var Gp=new Q("",{providedIn:"root",factory:()=>Kx}),Kx="ng",Wp=new Q(""),Rr=new Q("",{providedIn:"platform",factory:()=>"unknown"});var Kp=new Q("",{providedIn:"root",factory:()=>Wx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Qx="h",Yx="b";var Jx=()=>null;function Qp(t,e,n=!1){return Jx(t,e,n)}var _I=!1,Zx=new Q("",{providedIn:"root",factory:()=>_I});var wu;function Xx(){if(wu===void 0&&(wu=null,Hn.trustedTypes))try{wu=Hn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return wu}function e1(t){return Xx()?.createScriptURL(t)||t}var Eu;function t1(){if(Eu===void 0&&(Eu=null,Hn.trustedTypes))try{Eu=Hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Eu}function j0(t){return t1()?.createScriptURL(t)||t}var ju=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sE})`}};function ra(t){return t instanceof ju?t.changingThisBreaksApplicationSecurity:t}function Yp(t,e){let n=n1(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${sE})`)}return n===e}function n1(t){return t instanceof ju&&t.getTypeName()||null}var r1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wI(t){return t=String(t),t.match(r1)?t:"unsafe:"+t}var nl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(nl||{});function ia(t){let e=bI();return e?e.sanitize(nl.URL,t)||"":Yp(t,"URL")?ra(t):wI(Yu(t))}function i1(t){let e=bI();if(e)return j0(e.sanitize(nl.RESOURCE_URL,t)||"");if(Yp(t,"ResourceURL"))return j0(ra(t));throw new z(904,!1)}function EI(t){return e1(t[0])}function o1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?i1:ia}function II(t,e,n){return o1(e,n)(t)}function bI(){let t=Ce();return t&&t[on].sanitizer}function CI(t){return t instanceof Function?t():t}var Gn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Gn||{}),s1;function Jp(t,e){return s1(t,e)}function po(t,e,n,r,i){if(r!=null){let o,s=!1;Qn(r)?o=r:ei(r)&&(s=!0,r=r[Kn]);let a=vn(r);t===0&&n!==null?i==null?RI(e,n,a):Bu(e,n,a,i||null,!0):t===1&&n!==null?Bu(e,n,a,i||null,!0):t===2?b1(e,a,s):t===3&&e.destroyNode(a),o!=null&&D1(e,t,o,n,i)}}function a1(t,e){return t.createText(e)}function c1(t,e,n){t.setValue(e,n)}function DI(t,e,n){return t.createElement(e,n)}function u1(t,e){TI(t,e),e[Kn]=null,e[sn]=null}function l1(t,e,n,r,i,o){r[Kn]=i,r[sn]=e,rl(t,r,n,1,i,o)}function TI(t,e){e[on].changeDetectionScheduler?.notify(1),rl(t,e,e[et],2,null,null)}function d1(t){let e=t[Gs];if(!e)return Tf(t[se],t);for(;e;){let n=null;if(ei(e))n=e[Gs];else{let r=e[Ot];r&&(n=r)}if(!n){for(;e&&!e[nn]&&e!==t;)ei(e)&&Tf(e[se],e),e=e[ct];e===null&&(e=t),ei(e)&&Tf(e[se],e),n=e&&e[nn]}e=n}}function h1(t,e,n,r){let i=Ot+r,o=n.length;r>0&&(n[i-1][nn]=e),r<o-Ot?(e[nn]=n[i],yE(n,Ot+r,e)):(n.push(e),e[nn]=null),e[ct]=n;let s=e[ta];s!==null&&n!==s&&f1(s,e);let a=e[qn];a!==null&&a.insertView(t),$f(e),e[W]|=128}function f1(t,e){let n=t[Io],i=e[ct][ct][yn];e[yn]!==i&&(t[W]|=Pp.HasTransplantedViews),n===null?t[Io]=[e]:n.push(e)}function AI(t,e){let n=t[Io],r=n.indexOf(e);n.splice(r,1)}function Jf(t,e){if(t.length<=Ot)return;let n=Ot+e,r=t[n];if(r){let i=r[ta];i!==null&&i!==t&&AI(i,r),e>0&&(t[n-1][nn]=r[nn]);let o=Nu(t,Ot+e);u1(r[se],r);let s=o[qn];s!==null&&s.detachView(o[se]),r[ct]=null,r[nn]=null,r[W]&=-129}return r}function SI(t,e){if(!(e[W]&256)){let n=e[et];n.destroyNode&&rl(t,e,n,3,null,null),d1(e)}}function Tf(t,e){if(e[W]&256)return;let n=Ee(null);try{e[W]&=-129,e[W]|=256,e[ri]&&Yw(e[ri]),g1(t,e),p1(t,e),e[se].type===1&&e[et].destroy();let r=e[ta];if(r!==null&&Qn(e[ct])){r!==e[ct]&&AI(r,e);let i=e[qn];i!==null&&i.detachView(t)}Gx(e)}finally{Ee(n)}}function p1(t,e){let n=t.cleanup,r=e[zs];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[zs]=null);let i=e[Cr];if(i!==null){e[Cr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function g1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof si)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];pn(4,a,u);try{u.call(a)}finally{pn(5,a,u)}}else{pn(4,i,o);try{o.call(i)}finally{pn(5,i,o)}}}}}function m1(t,e,n){return y1(t,e.parent,n)}function y1(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Kn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===mn.None||o===mn.Emulated)return null}return $t(r,n)}}function Bu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function RI(t,e,n){t.appendChild(e,n)}function B0(t,e,n,r,i){r!==null?Bu(t,e,n,r,i):RI(t,e,n)}function v1(t,e,n,r){t.removeChild(e,n,r)}function Zp(t,e){return t.parentNode(e)}function _1(t,e){return t.nextSibling(e)}function w1(t,e,n){return I1(t,e,n)}function E1(t,e,n){return t.type&40?$t(t,n):null}var I1=E1,$0;function Xp(t,e,n,r){let i=m1(t,r,e),o=e[et],s=r.parent||e[sn],a=w1(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)B0(o,i,n[u],a,!1);else B0(o,i,n,a,!1);$0!==void 0&&$0(o,r,e,n,i)}function Su(t,e){if(e!==null){let n=e.type;if(n&3)return $t(e,t);if(n&4)return Zf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Su(t,r);{let i=t[e.index];return Qn(i)?Zf(-1,i):vn(i)}}else{if(n&32)return Jp(e,t)()||vn(t[e.index]);{let r=MI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ks(t[yn]);return Su(i,r)}else return Su(t,e.next)}}}return null}function MI(t,e){if(e!==null){let r=t[yn][sn],i=e.projection;return r.projection[i]}return null}function Zf(t,e){let n=Ot+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return Su(r,i)}return e[ii]}function b1(t,e,n){let r=Zp(t,e);r&&v1(t,r,e,n)}function eg(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&ci(vn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)eg(t,e,n.child,r,i,o,!1),po(e,t,i,a,o);else if(u&32){let l=Jp(n,r),h;for(;h=l();)po(e,t,i,h,o);po(e,t,i,a,o)}else u&16?C1(t,e,r,n,i,o):po(e,t,i,a,o);n=s?n.projectionNext:n.next}}function rl(t,e,n,r,i,o){eg(n,r,t.firstChild,e,i,o,!1)}function C1(t,e,n,r,i,o){let s=n[yn],u=s[sn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];po(e,t,i,h,o)}else{let l=u,h=s[ct];fI(r)&&(l.flags|=128),eg(t,e,l,h,i,o,!0)}}function D1(t,e,n,r,i){let o=n[ii],s=vn(n);o!==s&&po(e,t,r,o,i);for(let a=Ot;a<n.length;a++){let u=n[a];rl(u[se],u,t,e,r,o)}}function T1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gn.Important),t.setStyle(n,r,i,o))}}function A1(t,e,n){t.setAttribute(e,"style",n)}function xI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function NI(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Lf(t,e,r),i!==null&&xI(t,e,i),o!==null&&A1(t,e,o)}var gi={};function fe(t=1){PI(Dt(),Ce(),Do()+t,!1)}function PI(t,e,n,r){if(!r)if((e[W]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Du(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Tu(e,o,0,n)}oi(n)}function $(t,e=ae.Default){let n=Ce();if(n===null)return he(t,e);let r=Tt();return aI(r,n,It(t),e)}function OI(t,e,n,r,i,o){let s=Ee(null);try{let a=null;i&at.SignalBased&&(a=e[r][Kh]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&at.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):kE(e,a,r,o)}finally{Ee(s)}}function S1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)oi(~i);else{let o=i,s=n[++r],a=n[++r];vx(s,o);let u=e[o];a(2,u)}}}finally{oi(-1)}}function il(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Kn]=i,p[W]=r|4|128|8|64,(l!==null||t&&t[W]&2048)&&(p[W]|=2048),$E(p),p[ct]=p[Co]=t,p[rn]=n,p[on]=s||t&&t[on],p[et]=a||t&&t[et],p[Eo]=u||t&&t[Eo]||null,p[sn]=o,p[Xu]=qx(),p[Ou]=h,p[PE]=l,p[yn]=e.type==2?t[yn]:p,p}function ol(t,e,n,r,i){let o=t.data[e];if(o===null)o=R1(t,e,n,r,i),yx()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=hx();o.injectorIndex=s===null?-1:s.injectorIndex}return na(o,!0),o}function R1(t,e,n,r,i){let o=zE(),s=GE(),a=s?o:o&&o.parent,u=t.data[e]=F1(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function FI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function kI(t,e,n,r,i){let o=Do(),s=r&2;try{oi(-1),s&&e.length>Dr&&PI(t,e,Dr,!1),pn(s?2:0,i),n(r,i)}finally{oi(o),pn(s?3:1,i)}}function LI(t,e,n){if(FE(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Ee(r)}}}function VI(t,e,n){qE()&&(B1(t,e,n,$t(n,e)),(n.flags&64)===64&&qI(t,e,n))}function UI(t,e,n=$t){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function jI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=tg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function tg(t,e,n,r,i,o,s,a,u,l,h){let p=Dr+r,m=p+i,E=M1(p,m),A=typeof l=="function"?l():l;return E[se]={type:t,blueprint:E,template:n,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function M1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:gi);return n}function x1(t,e,n,r){let o=r.get(Zx,_I)||n===mn.ShadowDom,s=t.selectRootElement(e,o);return N1(s),s}function N1(t){P1(t)}var P1=()=>null;function O1(t,e,n,r){let i=WI(e);i.push(n),t.firstCreatePass&&KI(t).push(r,i.length-1)}function F1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ux()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function H0(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=at.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?q0(r,n,l,a,u):q0(r,n,l,a)}return r}function q0(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function k1(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=n?n.get(p):null,E=m?m.inputs:null,A=m?m.outputs:null;u=H0(0,p.inputs,h,u,E),l=H0(1,p.outputs,h,l,A);let M=u!==null&&s!==null&&!Mp(e)?Z1(u,h,s):null;a.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function L1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function BI(t,e,n,r,i,o,s,a){let u=$t(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ng(t,n,h,r,i),el(e)&&V1(n,e.index)):e.type&3?(r=L1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function V1(t,e){let n=Sr(e,t);n[W]&16||(n[W]|=64)}function $I(t,e,n,r){if(qE()){let i=r===null?null:{"":-1},o=H1(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&HI(t,e,n,s,i,a),i&&q1(n,r,i)}n.mergedAttrs=Hs(n.mergedAttrs,n.attrs)}function HI(t,e,n,r,i,o){for(let l=0;l<r.length;l++)zf(Uu(n,e),t,r[l].type);G1(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=FI(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Hs(n.mergedAttrs,h.hostAttrs),W1(t,n,e,u,h),z1(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}k1(t,n,o)}function U1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;j1(s)!=a&&s.push(a),s.push(n,r,o)}}function j1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function B1(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;el(n)&&K1(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Uu(n,e),ci(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=ai(e,t,a,n);if(ci(l,e),s!==null&&J1(e,a-i,l,u,n,s),Tr(u)){let h=Sr(n.index,e);h[rn]=ai(e,t,a,n)}}}function qI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=_x();try{oi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Hf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&$1(u,l)}}finally{oi(-1),Hf(s)}}function $1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function H1(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(DM(e,s.selectors,!1))if(r||(r=[]),Tr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Xf(t,e,u)}else r.unshift(s),Xf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Xf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function q1(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}}function z1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Tr(e)&&(n[""]=t)}}function G1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function W1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=yo(i.type,!0)),s=new si(o,Tr(i),$);t.blueprint[r]=s,n[r]=s,U1(t,e,r,FI(t,n,i.hostVars,gi),i)}function K1(t,e,n){let r=$t(e,t),i=jI(n),o=t[on].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=sl(t,il(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function Q1(t,e,n,r,i,o){let s=$t(t,e);Y1(e[et],s,o,t.value,n,r,i)}function Y1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Yu(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function J1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];OI(r,n,u,l,h,p)}}function Z1(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function zI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function GI(t,e){let n=t.contentQueries;if(n!==null){let r=Ee(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Lp(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function sl(t,e){return t[Gs]?t[N0][nn]=e:t[Gs]=e,t[N0]=e,e}function ep(t,e,n){Lp(0);let r=Ee(null);try{e(t,n)}finally{Ee(r)}}function WI(t){return t[zs]||(t[zs]=[])}function KI(t){return t.cleanup||(t.cleanup=[])}function QI(t,e){let n=t[Eo],r=n?n.get(zn,null):null;r&&r.handleError(e)}function ng(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],h=t.data[s];OI(h,l,r,a,u,i)}}function X1(t,e,n){let r=jE(e,t);c1(t[et],r,n)}function eN(t,e){let n=Sr(e,t),r=n[se];tN(r,n);let i=n[Kn];i!==null&&n[Ou]===null&&(n[Ou]=Qp(i,n[Eo])),rg(r,n,n[rn])}function tN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function rg(t,e,n){Vp(e);try{let r=t.viewQuery;r!==null&&ep(1,r,n);let i=t.template;i!==null&&kI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[qn]?.finishViewCreation(t),t.staticContentQueries&&GI(t,e),t.staticViewQueries&&ep(2,t.viewQuery,n);let o=t.components;o!==null&&nN(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[W]&=-5,Up()}}function nN(t,e){for(let n=0;n<e.length;n++)eN(t,e[n])}function rN(t,e,n,r){let i=Ee(null);try{let o=e.tView,a=t[W]&4096?4096:16,u=il(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ta]=l;let h=t[qn];return h!==null&&(u[qn]=h.createEmbeddedView(o)),rg(o,u,n),u}finally{Ee(i)}}function z0(t,e){return!e||e.firstChild===null||fI(t)}function iN(t,e,n,r=!0){let i=e[se];if(h1(i,e,t,n),r){let s=Zf(n,t),a=e[et],u=Zp(a,t[ii]);u!==null&&l1(i,t[sn],a,e,u,s)}let o=e[Ou];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function $u(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(vn(o)),Qn(o)&&oN(o,r);let s=n.type;if(s&8)$u(t,e,n.child,r);else if(s&32){let a=Jp(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=MI(e,n);if(Array.isArray(a))r.push(...a);else{let u=Ks(e[yn]);$u(u[se],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function oN(t,e){for(let n=Ot;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&$u(r[se],r,i,e)}t[ii]!==t[Kn]&&e.push(t[ii])}var YI=[];function sN(t){return t[ri]??aN(t)}function aN(t){let e=YI.pop()??Object.create(uN);return e.lView=t,e}function cN(t){t.lView[ri]!==t&&(t.lView=null,YI.push(t))}var uN=Te(L({},Ww),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ws(t.lView)},consumerOnSignalRead(){this.lView[ri]=this}}),JI=100;function ZI(t,e=!0,n=0){let r=t[on],i=r.rendererFactory,o=!1;o||i.begin?.();try{lN(t,n)}catch(s){throw e&&QI(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function lN(t,e){tp(t,e);let n=0;for(;kp(t);){if(n===JI)throw new z(103,!1);n++,tp(t,1)}}function dN(t,e,n,r){let i=e[W];if((i&256)===256)return;let o=!1;!o&&e[on].inlineEffectRunner?.flush(),Vp(e);let s=null,a=null;!o&&hN(t)&&(a=sN(e),s=Kw(a));try{$E(e),gx(t.bindingStartIndex),n!==null&&kI(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let p=t.preOrderCheckHooks;p!==null&&Du(e,p,null)}else{let p=t.preOrderHooks;p!==null&&Tu(e,p,0,null),If(e,0)}if(fN(e),XI(e,0),t.contentQueries!==null&&GI(t,e),!o)if(u){let p=t.contentCheckHooks;p!==null&&Du(e,p)}else{let p=t.contentHooks;p!==null&&Tu(e,p,1),If(e,1)}S1(t,e);let l=t.components;l!==null&&tb(e,l,0);let h=t.viewQuery;if(h!==null&&ep(2,h,r),!o)if(u){let p=t.viewCheckHooks;p!==null&&Du(e,p)}else{let p=t.viewHooks;p!==null&&Tu(e,p,2),If(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ef]){for(let p of e[Ef])p();e[Ef]=null}o||(e[W]&=-73)}catch(u){throw Ws(e),u}finally{a!==null&&(Qw(a,s),cN(a)),Up()}}function hN(t){return t.type!==2}function XI(t,e){for(let n=gI(t);n!==null;n=mI(n))for(let r=Ot;r<n.length;r++){let i=n[r];eb(i,e)}}function fN(t){for(let e=gI(t);e!==null;e=mI(e)){if(!(e[W]&Pp.HasTransplantedViews))continue;let n=e[Io];for(let r=0;r<n.length;r++){let i=n[r],o=i[ct];rx(i)}}}function pN(t,e,n){let r=Sr(e,t);eb(r,n)}function eb(t,e){Fp(t)&&tp(t,e)}function tp(t,e){let r=t[se],i=t[W],o=t[ri],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Qh(o)),o&&(o.dirty=!1),t[W]&=-9217,s)dN(r,t,r.template,t[rn]);else if(i&8192){XI(t,1);let a=r.components;a!==null&&tb(t,a,1)}}function tb(t,e,n){for(let r=0;r<e.length;r++)pN(t,e[r],n)}function ig(t){for(t[on].changeDetectionScheduler?.notify();t;){t[W]|=64;let e=Ks(t);if(WM(t)&&!e)return t;t=e}return null}var ui=class{get rootNodes(){let e=this._lView,n=e[se];return $u(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rn]}set context(e){this._lView[rn]=e}get destroyed(){return(this._lView[W]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ct];if(Qn(e)){let n=e[Fu],r=n?n.indexOf(this):-1;r>-1&&(Jf(e,r),Nu(n,r))}this._attachedToViewContainer=!1}SI(this._lView[se],this._lView)}onDestroy(e){HE(this._lView,e)}markForCheck(){ig(this._cdRefInjectingView||this._lView)}detach(){this._lView[W]&=-129}reattach(){$f(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,ZI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,TI(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e,$f(this._lView)}},li=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=yN;let t=e;return t})(),gN=li,mN=class extends gN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=rN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ui(i)}};function yN(){return og(Tt(),Ce())}function og(t,e){return t.type&4?new mN(e,t,To(t,e)):null}var Z6=new RegExp(`^(\\d+)*(${Yx}|${Qx})*(.*)`);var vN=()=>null;function G0(t,e){return vN(t,e)}var np=class{},rp=class{},Hu=class{};function _N(t){let e=Error(`No component factory found for ${bt(t)}.`);return e[wN]=t,e}var wN="ngComponent";var ip=class{resolveComponentFactory(e){throw _N(e)}},al=(()=>{let e=class e{};e.NULL=new ip;let t=e;return t})(),Qs=class{},an=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>EN();let t=e;return t})();function EN(){let t=Ce(),e=Tt(),n=Sr(e.index,t);return(ei(n)?n:t)[et]}var IN=(()=>{let e=class e{};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Af={};var W0=new Set;function nb(t){W0.has(t)||(W0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function K0(...t){}function bN(){let t=typeof Hn.requestAnimationFrame=="function",e=Hn[t?"requestAnimationFrame":"setTimeout"],n=Hn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ae=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ve(!1),this.onMicrotaskEmpty=new Ve(!1),this.onStable=new Ve(!1),this.onError=new Ve(!1),typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=bN().nativeRequestAnimationFrame,TN(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,CN,K0,K0);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},CN={};function sg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function DN(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Hn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,op(t),t.isCheckStableRunning=!0,sg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),op(t))}function TN(t){let e=()=>{DN(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(AN(a))return n.invokeTask(i,o,s,a);try{return Q0(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Y0(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Q0(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Y0(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,op(t),sg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function op(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Q0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Y0(t){t._nesting--,sg(t)}function AN(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var rb=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function sp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=I0(i,a);else if(o==2){let u=a,l=e[++s];r=I0(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var qu=class extends al{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ni(e);return new Ys(n,this.ngModule)}};function J0(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function SN(t){let e=t.toLowerCase();return e==="svg"?JM:e==="math"?ZM:null}var ap=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ju(r);let i=this.injector.get(e,Af,r);return i!==Af||n===Af?i:this.parentInjector.get(e,n,r)}},Ys=class extends Hu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=J0(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return J0(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=RM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Ee(null);try{i=i||this.ngModule;let s=i instanceof jt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ap(e,s):e,u=a.get(Qs,null);if(u===null)throw new z(407,!1);let l=a.get(IN,null),h=a.get(rb,null),p=a.get(np,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},E=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=r?x1(E,r,this.componentDef.encapsulation,a):DI(E,A,SN(A)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let k=null;M!==null&&(k=Qp(M,a,!0));let B=tg(0,null,null,1,0,null,null,null,null,null,null),V=il(null,B,null,R,null,null,m,E,a,null,k);Vp(V);let q,Se;try{let Z=this.componentDef,b,y=null;Z.findHostDirectiveDefs?(b=[],y=new Map,Z.findHostDirectiveDefs(Z,b,y),b.push(Z)):b=[Z];let _=RN(V,M),I=MN(_,M,Z,b,V,m,E);Se=BE(B,Dr),M&&PN(E,Z,M,r),n!==void 0&&ON(Se,this.ngContentSelectors,n),q=NN(I,Z,b,y,V,[FN]),rg(B,V,null)}finally{Up()}return new cp(this.componentType,q,To(Se,V),V,Se)}finally{Ee(o)}}},cp=class extends rp{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ui(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;ng(o[se],o,i,e,n),this.previousInputValues.set(e,n);let s=Sr(this._tNode.index,o);ig(s)}}get injector(){return new ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RN(t,e){let n=t[se],r=Dr;return t[r]=e,ol(n,r,2,"#host",null)}function MN(t,e,n,r,i,o,s){let a=i[se];xN(r,t,e,s);let u=null;e!==null&&(u=Qp(e,i[Eo]));let l=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=il(i,jI(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&Xf(a,t,r.length-1),sl(i,p),i[t.index]=p}function xN(t,e,n,r){for(let i of t)e.mergedAttrs=Hs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(sp(e,e.mergedAttrs,!0),n!==null&&NI(r,n,e))}function NN(t,e,n,r,i,o){let s=Tt(),a=i[se],u=$t(s,i);HI(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let p=s.directiveStart+h,m=ai(i,a,p,s);ci(m,i)}qI(a,i,s),u&&ci(u,i);let l=ai(i,a,s.directiveStart+s.componentOffset,s);if(t[rn]=i[rn]=l,o!==null)for(let h of o)h(l,e);return LI(a,s,i),l}function PN(t,e,n,r){if(r)Lf(t,n,["ng-version","17.3.4"]);else{let{attrs:i,classes:o}=MM(e.selectors[0]);i&&Lf(t,n,i),o&&o.length>0&&xI(t,n,o.join(" "))}}function ON(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function FN(){let t=Tt();Hp(Ce()[se],t)}var Mr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kN;let t=e;return t})();function kN(){let t=Tt();return ob(t,Ce())}var LN=Mr,ib=class extends LN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return To(this._hostTNode,this._hostLView)}get injector(){return new ti(this._hostTNode,this._hostLView)}get parentInjector(){let e=qp(this._hostTNode,this._hostLView);if(tI(e)){let n=Vu(e,this._hostLView),r=Lu(e),i=n[se].data[r+8];return new ti(i,n)}else return new ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Z0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=G0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,z0(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!GM(e),a;if(s)a=n;else{let A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}let u=s?e:new Ys(ni(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(s?l:this.parentInjector).get(jt,null);M&&(o=M)}let h=ni(u.componentType??{}),p=G0(this._lContainer,h?.id??null),m=p?.firstChild??null,E=u.create(l,i,m,o);return this.insertImpl(E.hostView,a,z0(this._hostTNode,p)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(nx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ct],l=new ib(u,u[sn],u[ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return iN(s,i,o,r),e.attachToViewContainerRef(),yE(Sf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Z0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Jf(this._lContainer,n);r&&(Nu(Sf(this._lContainer),n),SI(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=Jf(this._lContainer,n);return r&&Nu(Sf(this._lContainer),n)!=null?new ui(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Z0(t){return t[Fu]}function Sf(t){return t[Fu]||(t[Fu]=[])}function ob(t,e){let n,r=e[t.index];return Qn(r)?n=r:(n=zI(r,e,null,t),e[t.index]=n,sl(e,n)),UN(n,e,t,r),new ib(n,t,e)}function VN(t,e){let n=t[et],r=n.createComment(""),i=$t(e,t),o=Zp(n,i);return Bu(n,o,r,_1(n,i),!1),r}var UN=$N,jN=()=>!1;function BN(t,e,n){return jN(t,e,n)}function $N(t,e,n,r){if(t[ii])return;let i;n.type&8?i=vn(r):i=VN(e,n),t[ii]=i}var up=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},lp=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)ag(e,n).matches!==null&&this.queries[n].setDirty()}},dp=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=YN(e):this.predicate=e}},hp=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},fp=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,HN(n,o)),this.matchTNodeWithReadOption(e,n,Au(n,e,o,!1,!1))}else r===li?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Au(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===At||i===Mr||i===li&&n.type&4)this.addMatch(n.index,-2);else{let o=Au(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function HN(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function qN(t,e){return t.type&11?To(t,e):t.type&4?og(t,e):null}function zN(t,e,n,r){return n===-1?qN(e,t):n===-2?GN(t,e,r):ai(t,t[se],n,e)}function GN(t,e,n){if(n===At)return To(e,t);if(n===li)return og(e,t);if(n===Mr)return ob(e,t)}function sb(t,e,n,r){let i=e[qn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(zN(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function pp(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=sb(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Ot;p<h.length;p++){let m=h[p];m[ta]===m[ct]&&pp(m[se],m,l,r)}if(h[Io]!==null){let p=h[Io];for(let m=0;m<p.length;m++){let E=p[m];pp(E[se],E,l,r)}}}}}return r}function WN(t,e){return t[qn].queries[e].queryList}function KN(t,e,n){let r=new Qf((n&4)===4);return O1(t,e,r,r.destroy),(e[qn]??=new lp).queries.push(new up(r))-1}function QN(t,e,n,r){let i=Dt();if(i.firstCreatePass){let o=Tt();JN(i,new dp(e,n,r),o.index),ZN(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return KN(i,Ce(),n)}function YN(t){return t.split(",").map(e=>e.trim())}function JN(t,e,n){t.queries===null&&(t.queries=new hp),t.queries.track(new fp(e,n))}function ZN(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function ag(t,e){return t.queries.getByIndex(e)}function XN(t,e){let n=t[se],r=ag(n,e);return r.crossesNgTemplate?pp(n,t,e,[]):sb(n,t,r,e)}function eP(t){return typeof t=="function"&&t[Kh]!==void 0}function ab(t){return eP(t)&&typeof t.set=="function"}function tP(t){return Object.getPrototypeOf(t.prototype).constructor}function qt(t){let e=tP(t.type),n=!0,r=[t];for(;e;){let i;if(Tr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Iu(t.inputs),s.inputTransforms=Iu(t.inputTransforms),s.declaredInputs=Iu(t.declaredInputs),s.outputs=Iu(t.outputs);let a=i.hostBindings;a&&sP(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&iP(t,u),l&&oP(t,l),nP(t,i),QR(t.outputs,i.outputs),Tr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===qt&&(n=!1)}}e=Object.getPrototypeOf(e)}rP(r)}function nP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function rP(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Hs(i.hostAttrs,n=Hs(n,i.hostAttrs))}}function Iu(t){return t===vo?{}:t===Ut?[]:t}function iP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function oP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function sP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function cg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Ar=class{},Js=class{};var gp=class extends Ar{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qu(this);let i=TE(e);this._bootstrapComponents=CI(i.bootstrap),this._r3Injector=lI(e,n,[{provide:Ar,useValue:this},{provide:al,useValue:this.componentFactoryResolver},...r],bt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mp=class extends Js{constructor(e){super(),this.moduleType=e}create(e){return new gp(this.moduleType,e,[])}};var zu=class extends Ar{constructor(e){super(),this.componentFactoryResolver=new qu(this),this.instance=null;let n=new qs([...e.providers,{provide:Ar,useValue:this},{provide:al,useValue:this.componentFactoryResolver}],e.parent||Np(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ug(t,e,n=null){return new zu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var cl=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new st(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cb(t){return cP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function aP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function cP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function uP(t,e,n){return t[e]=n}function Ao(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function lP(t){return(t.flags&32)===32}function dP(t,e,n,r,i,o,s,a,u){let l=e.consts,h=ol(e,t,4,s||null,ku(l,a));$I(e,n,h,ku(l,u)),Hp(e,h);let p=h.tView=tg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function zt(t,e,n,r,i,o,s,a){let u=Ce(),l=Dt(),h=t+Dr,p=l.firstCreatePass?dP(h,l,u,e,n,r,i,o,s):l.data[h];na(p,!1);let m=hP(l,u,p,t);Bp()&&Xp(l,u,m,p),ci(m,u);let E=zI(m,u,m,p);return u[h]=E,sl(u,E),BN(E,p,u),Op(p)&&VI(l,u,p),s!=null&&UI(u,p,a),zt}var hP=fP;function fP(t,e,n,r){return $p(!0),e[et].createComment("")}function oa(t,e,n,r){let i=Ce(),o=tl();if(Ao(i,o,e)){let s=Dt(),a=jp();Q1(a,i,t,e,n,r)}return oa}function pP(t,e,n,r){return Ao(t,tl(),n)?e+Yu(n)+r:gi}function bu(t,e){return t<<17|e<<2}function di(t){return t>>17&32767}function gP(t){return(t&2)==2}function mP(t,e){return t&131071|e<<17}function yp(t){return t|2}function bo(t){return(t&131068)>>2}function Rf(t,e){return t&-131069|e<<2}function yP(t){return(t&1)===1}function vp(t){return t|1}function vP(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=di(s),u=bo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ea(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=di(t[a+1]);t[r+1]=bu(m,a),m!==0&&(t[m+1]=Rf(t[m+1],r)),t[a+1]=mP(t[a+1],r)}else t[r+1]=bu(a,0),a!==0&&(t[a+1]=Rf(t[a+1],r)),a=r;else t[r+1]=bu(u,0),a===0?a=r:t[u+1]=Rf(t[u+1],r),u=r;l&&(t[r+1]=yp(t[r+1])),X0(t,h,r,!0),X0(t,h,r,!1),_P(e,h,t,r,o),s=bu(a,u),o?e.classBindings=s:e.styleBindings=s}function _P(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ea(o,e)>=0&&(n[r+1]=vp(n[r+1]))}function X0(t,e,n,r){let i=t[n+1],o=e===null,s=r?di(i):bo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];wP(u,e)&&(a=!0,t[s+1]=r?vp(l):yp(l)),s=r?di(l):bo(l)}a&&(t[n+1]=r?yp(i):vp(i))}function wP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ea(t,e)>=0:!1}function Ge(t,e,n){let r=Ce(),i=tl();if(Ao(r,i,e)){let o=Dt(),s=jp();BI(o,s,r,t,e,r[et],n,!1)}return Ge}function eE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";ng(t,n,o[s],s,r)}function ul(t,e){return EP(t,e,null,!0),ul}function EP(t,e,n,r){let i=Ce(),o=Dt(),s=mx(2);if(o.firstUpdatePass&&bP(o,t,s,r),e!==gi&&Ao(i,s,e)){let a=o.data[Do()];SP(o,a,i,i[et],t,i[s+1]=RP(e,n),r,s)}}function IP(t,e){return e>=t.expandoStartIndex}function bP(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Do()],s=IP(t,n);MP(o,r)&&e===null&&!s&&(e=!1),e=CP(i,o,e,r),vP(i,o,e,n,s,r)}}function CP(t,e,n,r){let i=wx(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Mf(null,t,e,n,r),n=Zs(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Mf(i,t,e,n,r),o===null){let u=DP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Mf(null,t,e,u[1],r),u=Zs(u,e.attrs,r),TP(t,e,r,u))}else o=AP(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function DP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(bo(r)!==0)return t[di(r)]}function TP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[di(i)]=r}function AP(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Zs(r,s,n)}return Zs(r,e.attrs,n)}function Mf(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Zs(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Zs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),yM(t,s,n?!0:e[++o]))}return t===void 0?null:t}function SP(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=yP(l)?tE(u,e,n,i,bo(l),s):void 0;if(!Gu(h)){Gu(o)||gP(l)&&(o=tE(u,null,n,i,a,s));let p=jE(Do(),n);T1(r,s,p,i,o)}}function tE(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===gi&&(m=p?Ut:void 0);let E=p?_f(m,r):h===r?m:void 0;if(l&&!Gu(E)&&(E=_f(u,r)),Gu(E)&&(a=E,s))return a;let A=t[i+1];i=s?di(A):bo(A)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=_f(u,r))}return a}function Gu(t){return t!==void 0}function RP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=bt(ra(t)))),t}function MP(t,e){return(t.flags&(e?8:16))!==0}function xP(t,e,n,r,i,o){let s=e.consts,a=ku(s,i),u=ol(e,t,2,r,a);return $I(e,n,u,ku(s,o)),u.attrs!==null&&sp(u,u.attrs,!1),u.mergedAttrs!==null&&sp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function x(t,e,n,r){let i=Ce(),o=Dt(),s=Dr+t,a=i[et],u=o.firstCreatePass?xP(s,o,i,e,n,r):o.data[s],l=NP(o,i,u,a,e,t);i[s]=l;let h=Op(u);return na(u,!0),NI(a,l,u),!lP(u)&&Bp()&&Xp(o,i,l,u),sx()===0&&ci(l,i),ax(),h&&(VI(o,i,u),LI(o,u,i)),r!==null&&UI(i,u),x}function P(){let t=Tt();GE()?fx():(t=t.parent,na(t,!1));let e=t;lx(e)&&dx(),cx();let n=Dt();return n.firstCreatePass&&(Hp(n,t),FE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Ax(e)&&eE(n,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Sx(e)&&eE(n,e,Ce(),e.stylesWithoutHost,!1),P}function Y(t,e,n,r){return x(t,e,n,r),P(),Y}var NP=(t,e,n,r,i,o)=>($p(!0),DI(r,i,bx()));function sa(){return Ce()}var Wu="en-US";var PP=Wu;function OP(t){typeof t=="string"&&(PP=t.toLowerCase().replace(/_/g,"-"))}function Ie(t,e,n,r){let i=Ce(),o=Dt(),s=Tt();return ub(o,i,i[et],s,t,e,r),Ie}function FP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[zs],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function ub(t,e,n,r,i,o,s){let a=Op(r),l=t.firstCreatePass&&KI(t),h=e[rn],p=WI(e),m=!0;if(r.type&3||s){let M=$t(r,e),R=s?s(M):M,k=p.length,B=s?q=>s(vn(q[r.index])):r.index,V=null;if(!s&&a&&(V=FP(t,e,i,r.index)),V!==null){let q=V.__ngLastListenerFn__||V;q.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,m=!1}else{o=rE(r,e,h,o,!1);let q=n.listen(R,i,o);p.push(o,q),l&&l.push(i,B,k,k+1)}}else o=rE(r,e,h,o,!1);let E=r.outputs,A;if(m&&E!==null&&(A=E[i])){let M=A.length;if(M)for(let R=0;R<M;R+=2){let k=A[R],B=A[R+1],Se=e[k][B].subscribe(o),Z=p.length;p.push(o,Se),l&&l.push(i,r.index,Z,-(Z+1))}}}function nE(t,e,n,r){let i=Ee(null);try{return pn(6,e,n),n(r)!==!1}catch(o){return QI(t,o),!1}finally{pn(7,e,n),Ee(i)}}function rE(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Sr(t.index,e):e;ig(a);let u=nE(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=nE(e,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function ue(t=1){return Ix(t)}function lb(t,e,n,r){QN(t,e,n,r)}function db(t){let e=Ce(),n=Dt(),r=WE();Lp(r+1);let i=ag(n,r);if(t.dirty&&tx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=XN(e,r);t.reset(o,Bx),t.notifyOnChanges()}return!0}return!1}function hb(){return WN(Ce(),WE())}function re(t,e=""){let n=Ce(),r=Dt(),i=t+Dr,o=r.firstCreatePass?ol(r,i,1,e,null):r.data[i],s=kP(r,n,o,e,t);n[i]=s,Bp()&&Xp(r,n,s,o),na(o,!1)}var kP=(t,e,n,r,i)=>($p(!0),a1(e[et],r));function mi(t){return fb("",t,""),mi}function fb(t,e,n){let r=Ce(),i=pP(r,t,e,n);return i!==gi&&X1(r,Do(),i),fb}function We(t,e,n){ab(e)&&(e=e());let r=Ce(),i=tl();if(Ao(r,i,e)){let o=Dt(),s=jp();BI(o,s,r,t,e,r[et],n,!1)}return We}function tt(t,e){let n=ab(t);return n&&t.set(e),n}function Ke(t,e){let n=Ce(),r=Dt(),i=Tt();return ub(r,n,n[et],i,t,e),Ke}function LP(t,e,n){let r=Dt();if(r.firstCreatePass){let i=Tr(t);_p(n,r.data,r.blueprint,i,!0),_p(e,r.data,r.blueprint,i,!1)}}function _p(t,e,n,r,i){if(t=It(t),Array.isArray(t))for(let o=0;o<t.length;o++)_p(t[o],e,n,r,i);else{let o=Dt(),s=Ce(),a=Tt(),u=wo(t)?t:It(t.provide),l=NE(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(wo(t)||!t.multi){let E=new si(l,i,$),A=Nf(u,e,i?h:h+m,p);A===-1?(zf(Uu(a,s),o,u),xf(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)):(n[A]=E,s[A]=E)}else{let E=Nf(u,e,h+m,p),A=Nf(u,e,h,h+m),M=E>=0&&n[E],R=A>=0&&n[A];if(i&&!R||!i&&!M){zf(Uu(a,s),o,u);let k=jP(i?UP:VP,n.length,i,r,l);!i&&R&&(n[A].providerFactory=k),xf(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=pb(n[i?A:E],l,!i&&r);xf(o,t,E>-1?E:A,k)}!i&&r&&R&&n[A].componentProviders++}}}function xf(t,e,n,r){let i=wo(e),o=VM(e);if(i||o){let u=(o?It(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function pb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Nf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function VP(t,e,n,r){return wp(this.multi,[])}function UP(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ai(n,n[se],this.providerFactory.index,r);o=a.slice(0,s),wp(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],wp(i,o);return o}function wp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function jP(t,e,n,r,i){let o=new si(t,n,$);return o.multi=[],o.index=e,o.componentProviders=0,pb(o,i,r&&!n),o}function xr(t,e=[]){return n=>{n.providersResolver=(r,i)=>LP(r,i?i(t):t,e)}}var BP=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=RE(!1,r.type),o=i.length>0?ug([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=X({token:e,providedIn:"environment",factory:()=>new e(he(jt))});let t=e;return t})();function Gt(t){nb("NgStandalone"),t.getStandaloneInjector=e=>e.get(BP).getOrCreateStandaloneInjector(t)}function gb(t,e,n,r){return HP(Ce(),px(),t,e,n,r)}function $P(t,e){let n=t[e];return n===gi?void 0:n}function HP(t,e,n,r,i,o){let s=e+n;return Ao(t,s,i)?uP(t,s+1,o?r.call(o,i):r(i)):$P(t,s+1)}var Wn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},mb=new Wn("17.3.4"),ll=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var yb=new Q("");function yi(t){return!!t&&typeof t.then=="function"}function vb(t){return!!t&&typeof t.subscribe=="function"}var _b=new Q(""),wb=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=j(_b,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(yi(s))r.push(s);else if(vb(s)){let a=new Promise((u,l)=>{s.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lg=new Q("");function qP(){Jw(()=>{throw new z(600,!1)})}function zP(t){return t.isBoundToModule}function GP(t,e,n){try{let r=n();return yi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var aa=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(dI),this.afterRenderEffectManager=j(rb),this.externalTestViews=new Set,this.beforeRender=new mt,this.afterTick=new mt,this.componentTypes=[],this.components=[],this.isStable=j(cl).hasPendingTasks.pipe(de(r=>!r)),this._injector=j(jt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Hu;if(!this._injector.get(wb).done){let E=!o&&DE(r),A=!1;throw new z(405,A)}let a;o?a=r:a=this._injector.get(al).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=zP(a)?void 0:this._injector.get(Ar),l=i||a.selector,h=a.create(Ht.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(yb,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Pf(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new z(101,!1);let i=Ee(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Ee(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===JI)throw new z(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:u}of this._views)WP(a,s,u)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Ep(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Ep(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Pf(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(lg,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Pf(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new z(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Pf(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function WP(t,e,n){!e&&!Ep(t)||KP(t,n,e)}function Ep(t){return kp(t)}function KP(t,e,n){let r;n?(r=0,t[W]|=1024):t[W]&64?r=0:r=1,ZI(t,e,r)}var Ip=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},dg=(()=>{let e=class e{compileModuleSync(r){return new mp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=TE(r),s=CI(o.declarations).reduce((a,u)=>{let l=ni(u);return l&&a.push(new Ys(l)),a},[]);return new Ip(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var QP=(()=>{let e=class e{constructor(){this.zone=j(Ae),this.applicationRef=j(aa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function YP(t){return[{provide:Ae,useFactory:t},{provide:_o,multi:!0,useFactory:()=>{let e=j(QP,{optional:!0});return()=>e.initialize()}},{provide:_o,multi:!0,useFactory:()=>{let e=j(eO);return()=>{e.initialize()}}},{provide:dI,useFactory:JP}]}function JP(){let t=j(Ae),e=j(zn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function ZP(t){let e=YP(()=>new Ae(XP(t)));return wn([[],e])}function XP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var eO=(()=>{let e=class e{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=j(Ae),this.pendingTasks=j(cl)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ae.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ae.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tO(){return typeof $localize<"u"&&$localize.locale||Wu}var hg=new Q("",{providedIn:"root",factory:()=>j(hg,ae.Optional|ae.SkipSelf)||tO()});var Eb=new Q("");var Ru=null;function nO(t=[],e){return Ht.create({name:e,providers:[{provide:Zu,useValue:"platform"},{provide:Eb,useValue:new Set([()=>Ru=null])},...t]})}function rO(t=[]){if(Ru)return Ru;let e=nO(t);return Ru=e,qP(),iO(e),e}function iO(t){t.get(Wp,null)?.forEach(n=>n())}var Nr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=oO;let t=e;return t})();function oO(t){return sO(Tt(),Ce(),(t&16)===16)}function sO(t,e,n){if(el(t)&&!n){let r=Sr(t.index,e);return new ui(r,r)}else if(t.type&47){let r=e[yn];return new ui(r,e)}return null}var bp=class{constructor(){}supports(e){return cb(e)}create(e){return new Cp(e)}},aO=(t,e)=>e,Cp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||aO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<iE(r,i,o)?n:r,a=iE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let E=m<o.length?o[m]:o[m]=0,A=E+m;h<=A&&A<l&&(o[m]=E+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!cb(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,aP(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Dp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ku),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ku),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Dp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Tp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ku=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Tp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function iE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function oE(){return new fg([new bp])}var fg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||oE()),deps:[[e,new mE,new Ct]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new z(901,!1)}};e.\u0275prov=X({token:e,providedIn:"root",factory:oE});let t=e;return t})();function Ib(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=rO(r),o=[ZP(),...n||[]],a=new zu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Ae);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(zn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:E=>{l.handleError(E)}})});let p=()=>a.destroy(),m=i.get(Eb);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),GP(l,u,()=>{let E=a.get(wb);return E.runInitializers(),E.donePromise.then(()=>{let A=a.get(hg,Wu);OP(A||Wu);let M=a.get(aa);return e!==void 0&&M.bootstrap(e),M})})})}catch(e){return Promise.reject(e)}}function Pr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Sb=null;function Zn(){return Sb}function Rb(t){Sb??=t}var dl=class{};var Wt=new Q(""),Mb=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>j(cO),providedIn:"platform"});let t=e;return t})();var cO=(()=>{let e=class e extends Mb{constructor(){super(),this._doc=j(Wt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zn().getBaseHref(this._doc)}onPopState(r){let i=Zn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Zn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function xb(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function bb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function vi(t){return t&&t[0]!=="?"?"?"+t:t}var So=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>j(Nb),providedIn:"root"});let t=e;return t})(),uO=new Q(""),Nb=(()=>{let e=class e extends So{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??j(Wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return xb(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+vi(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+vi(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+vi(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(he(Mb),he(uO,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ca=(()=>{let e=class e{constructor(r){this._subject=new Ve,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=hO(bb(Cb(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+vi(i))}normalize(r){return e.stripTrailingSlash(dO(this._basePath,Cb(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+vi(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+vi(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=vi,e.joinWithSlash=xb,e.stripTrailingSlash=bb,e.\u0275fac=function(i){return new(i||e)(he(So))},e.\u0275prov=X({token:e,factory:()=>lO(),providedIn:"root"});let t=e;return t})();function lO(){return new ca(he(So))}function dO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Cb(t){return t.replace(/\/index.html$/,"")}function hO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Pb(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var pg=/\s+/,Db=[],Ob=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Db,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(pg):Db}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(pg):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(pg).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)($(At),$(an))},e.\u0275dir=Oe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[at.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var gg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Fb=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new gg(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),Tb(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);Tb(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(Mr),$(li),$(fg))},e.\u0275dir=Oe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function Tb(t,e){t.context.$implicit=e.item}var fl=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new mg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Ab("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Ab("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(Mr),$(li))},e.\u0275dir=Oe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),mg=class{constructor(){this.$implicit=null,this.ngIf=null}};function Ab(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${bt(e)}'.`)}var _i=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=fi({type:e}),e.\u0275inj=hi({});let t=e;return t})(),kb="browser",fO="server";function yg(t){return t===fO}var hl=class{};var wg=class extends dl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Eg=class t extends wg{static makeCurrent(){Rb(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=pO();return n==null?null:gO(n)}resetBaseElement(){ua=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pb(document.cookie,e)}},ua=null;function pO(){return ua=ua||document.querySelector("base"),ua?ua.getAttribute("href"):null}function gO(t){return new URL(t,document.baseURI).pathname}var mO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Ig=new Q(""),jb=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new z(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(he(Ig),he(Ae))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),gl=class{constructor(e){this._doc=e}},vg="ng-app-id",Bb=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yg(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${vg}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(vg),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(vg,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(he(Wt),he(Gp),he(Kp,8),he(Rr))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),_g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cg=/%COMP%/g,$b="%COMP%",yO=`_nghost-${$b}`,vO=`_ngcontent-${$b}`,_O=!0,wO=new Q("",{providedIn:"root",factory:()=>_O});function EO(t){return vO.replace(Cg,t)}function IO(t){return yO.replace(Cg,t)}function Hb(t,e){return e.map(n=>n.replace(Cg,t))}var Lb=(()=>{let e=class e{constructor(r,i,o,s,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=yg(u),this.defaultRenderer=new la(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===mn.ShadowDom&&(i=Te(L({},i),{encapsulation:mn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ml?o.applyToHost(r):o instanceof da&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case mn.Emulated:s=new ml(l,h,i,this.appId,p,a,u,m);break;case mn.ShadowDom:return new bg(l,h,r,i,a,u,this.nonce,m);default:s=new da(l,h,i,p,a,u,m);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(he(jb),he(Bb),he(Gp),he(wO),he(Wt),he(Rr),he(Ae),he(Kp))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),la=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(_g[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Vb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Vb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=_g[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=_g[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Gn.DashCase|Gn.Important)?e.style.setProperty(n,r,i&Gn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Gn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Zn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Vb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var bg=class extends la{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Hb(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},da=class extends la{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Hb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ml=class extends da{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=EO(l),this.hostAttr=IO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},bO=(()=>{let e=class e extends gl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(he(Wt))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Ub=["alt","control","meta","shift"],CO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},TO=(()=>{let e=class e extends gl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),Ub.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=CO[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Ub.forEach(a=>{if(a!==o){let u=DO[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(he(Wt))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})();function qb(t,e){return Ib(L({rootComponent:t},AO(e)))}function AO(t){return{appProviders:[...NO,...t?.providers??[]],platformProviders:xO}}function SO(){Eg.makeCurrent()}function RO(){return new zn}function MO(){return vI(document),document}var xO=[{provide:Rr,useValue:kb},{provide:Wp,useValue:SO,multi:!0},{provide:Wt,useFactory:MO,deps:[]}];var NO=[{provide:Zu,useValue:"root"},{provide:zn,useFactory:RO,deps:[]},{provide:Ig,useClass:bO,multi:!0,deps:[Wt,Ae,Rr]},{provide:Ig,useClass:TO,multi:!0,deps:[Wt]},Lb,Bb,jb,{provide:Qs,useExisting:Lb},{provide:hl,useClass:mO,deps:[]},[]];var zb=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(he(Wt))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oe="primary",Ta=Symbol("RouteTitle"),Rg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Po(t){return new Rg(t)}function OO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function FO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!In(t[n],e[n]))return!1;return!0}function In(t,e){let n=t?Mg(t):void 0,r=e?Mg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Jb(t[i],e[i]))return!1;return!0}function Mg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Jb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Zb(t){return t.length>0?t[t.length-1]:null}function kr(t){return hf(t)?t:yi(t)?Le(Promise.resolve(t)):ee(t)}var kO={exact:eC,subset:tC},Xb={exact:LO,subset:VO,ignored:()=>!0};function Gb(t,e,n){return kO[n.paths](t.root,e.root,n.matrixParams)&&Xb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function LO(t,e){return In(t,e)}function eC(t,e,n){if(!Ei(t.segments,e.segments)||!_l(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!eC(t.children[r],e.children[r],n))return!1;return!0}function VO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Jb(t[n],e[n]))}function tC(t,e,n){return nC(t,e,e.segments,n)}function nC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ei(i,n)||e.hasChildren()||!_l(i,n,r))}else if(t.segments.length===n.length){if(!Ei(t.segments,n)||!_l(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!tC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ei(t.segments,i)||!_l(t.segments,i,r)||!t.children[oe]?!1:nC(t.children[oe],e,o,r)}}function _l(t,e,n){return e.every((r,i)=>Xb[n](t[i].parameters,r.parameters))}var Or=class{constructor(e=new be([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){return BO.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wl(this)}},wi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Po(this.parameters),this._parameterMap}toString(){return iC(this)}};function UO(t,e){return Ei(t,e)&&t.every((n,r)=>In(n.parameters,e[r].parameters))}function Ei(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function jO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var nm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new Il,providedIn:"root"});let t=e;return t})(),Il=class{parse(e){let n=new Ng(e);return new Or(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ha(e.root,!0)}`,r=qO(e.queryParams),i=typeof e.fragment=="string"?`#${$O(e.fragment)}`:"";return`${n}${r}${i}`}},BO=new Il;function wl(t){return t.segments.map(e=>iC(e)).join("/")}function ha(t,e){if(!t.hasChildren())return wl(t);if(e){let n=t.children[oe]?ha(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${ha(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=jO(t,(r,i)=>i===oe?[ha(t.children[oe],!1)]:[`${i}:${ha(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${wl(t)}/${n[0]}`:`${wl(t)}/(${n.join("//")})`}}function rC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yl(t){return rC(t).replace(/%3B/gi,";")}function $O(t){return encodeURI(t)}function xg(t){return rC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function El(t){return decodeURIComponent(t)}function Wb(t){return El(t.replace(/\+/g,"%20"))}function iC(t){return`${xg(t.path)}${HO(t.parameters)}`}function HO(t){return Object.entries(t).map(([e,n])=>`;${xg(e)}=${xg(n)}`).join("")}function qO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${yl(n)}=${yl(i)}`).join("&"):`${yl(n)}=${yl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var zO=/^[^\/()?;#]+/;function Dg(t){let e=t.match(zO);return e?e[0]:""}var GO=/^[^\/()?;=#]+/;function WO(t){let e=t.match(GO);return e?e[0]:""}var KO=/^[^=?&#]+/;function QO(t){let e=t.match(KO);return e?e[0]:""}var YO=/^[^&#]+/;function JO(t){let e=t.match(YO);return e?e[0]:""}var Ng=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new be(e,n)),r}parseSegment(){let e=Dg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new wi(El(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=WO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Dg(this.remaining);i&&(r=i,this.capture(r))}e[El(n)]=El(r)}parseQueryParam(e){let n=QO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=JO(this.remaining);s&&(r=s,this.capture(r))}let i=Wb(n),o=Wb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Dg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[oe]:new be([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function oC(t){return t.segments.length>0?new be([],{[oe]:t}):t}function sC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=sC(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new be(t.segments,e);return ZO(n)}function ZO(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new be(t.segments.concat(e.segments),e.children)}return t}function Oo(t){return t instanceof Or}function XO(t,e,n=null,r=null){let i=aC(t);return cC(i,e,n,r)}function aC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new be(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=oC(r);return e??i}function cC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Tg(i,i,i,n,r);let o=eF(e);if(o.toRoot())return Tg(i,i,new be([],{}),n,r);let s=tF(o,i,t),a=s.processChildren?ga(s.segmentGroup,s.index,o.commands):lC(s.segmentGroup,s.index,o.commands);return Tg(i,s.segmentGroup,a,n,r)}function bl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function va(t){return typeof t=="object"&&t!=null&&t.outlets}function Tg(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=uC(t,e,n);let a=oC(sC(s));return new Or(a,o,i)}function uC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=uC(o,e,n)}),new be(t.segments,r)}var Cl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&bl(r[0]))throw new z(4003,!1);let i=r.find(va);if(i&&i!==Zb(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function eF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Cl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Cl(n,e,r)}var xo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function tF(t,e,n){if(t.isAbsolute)return new xo(e,!0,0);if(!n)return new xo(e,!1,NaN);if(n.parent===null)return new xo(n,!0,0);let r=bl(t.commands[0])?0:1,i=n.segments.length-1+r;return nF(n,i,t.numberOfDoubleDots)}function nF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new xo(r,!1,i-o)}function rF(t){return va(t[0])?t[0].outlets:{[oe]:t}}function lC(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return ga(t,e,n);let r=iF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new be(t.segments.slice(0,r.pathIndex),{});return o.children[oe]=new be(t.segments.slice(r.pathIndex),t.children),ga(o,0,i)}else return r.match&&i.length===0?new be(t.segments,{}):r.match&&!t.hasChildren()?Pg(t,e,n):r.match?ga(t,0,i):Pg(t,e,n)}function ga(t,e,n){if(n.length===0)return new be(t.segments,{});{let r=rF(n),i={};if(Object.keys(r).some(o=>o!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let o=ga(t.children[oe],e,n);return new be(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new be(t.segments,i)}}function iF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(va(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Qb(u,l,s))return o;r+=2}else{if(!Qb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Pg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(va(o)){let u=oF(o.outlets);return new be(r,u)}if(i===0&&bl(n[0])){let u=t.segments[e];r.push(new wi(u.path,Kb(n[0]))),i++;continue}let s=va(o)?o.outlets[oe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&bl(a)?(r.push(new wi(s,Kb(a))),i+=2):(r.push(new wi(s,{})),i++)}return new be(r,{})}function oF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Pg(new be([],{}),0,r))}),e}function Kb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Qb(t,e,n){return t==n.path&&In(e,n.parameters)}var ma="imperative",ut=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ut||{}),Kt=class{constructor(e,n){this.id=e,this.url=n}},_a=class extends Kt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ut.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xn=class extends Kt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},kt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(kt||{}),Og=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Og||{}),Fr=class extends Kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ii=class extends Kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ut.NavigationSkipped}},wa=class extends Kt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Dl=class extends Kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fg=class extends Kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kg=class extends Kt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lg=class extends Kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vg=class extends Kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ug=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jg=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bg=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$g=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hg=class{constructor(e){this.snapshot=e,this.type=ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qg=class{constructor(e){this.snapshot=e,this.type=ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ea=class{},Ia=class{constructor(e){this.url=e}};var zg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Nl,this.attachRef=null}},Nl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new zg,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Tl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Gg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Gg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Wg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wg(e,this._root).map(n=>n.value)}};function Gg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Gg(t,n);if(r)return r}return null}function Wg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Wg(t,n);if(r.length)return r.unshift(e),r}return[]}var Ft=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Mo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Al=class extends Tl{constructor(e,n){super(e),this.snapshot=n,im(this,e)}toString(){return this.snapshot.toString()}};function dC(t){let e=sF(t),n=new st([new wi("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new bi(n,r,o,s,i,oe,t,e.root);return a.snapshot=e.root,new Al(new Ft(a,[]),e)}function sF(t){let e={},n={},r={},i="",o=new ba([],e,r,i,n,oe,t,null,{});return new Sl("",new Ft(o,[]))}var bi=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(de(l=>l[Ta]))??ee(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>Po(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>Po(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rm(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&fC(i)&&(r.resolve[Ta]=i.title),r}var ba=class{get title(){return this.data?.[Ta]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Po(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Sl=class extends Tl{constructor(e,n){super(n),this.url=e,im(this,n)}toString(){return hC(this._root)}};function im(t,e){e.value._routerState=t,e.children.forEach(n=>im(t,n))}function hC(t){let e=t.children.length>0?` { ${t.children.map(hC).join(", ")} } `:"";return`${t.value}${e}`}function Ag(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,In(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),In(e.params,n.params)||t.paramsSubject.next(n.params),FO(e.url,n.url)||t.urlSubject.next(n.url),In(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Kg(t,e){let n=In(t.params,e.params)&&UO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Kg(t.parent,e.parent))}function fC(t){return typeof t.title=="string"||t.title===null}var om=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Ve,this.deactivateEvents=new Ve,this.attachEvents=new Ve,this.detachEvents=new Ve,this.parentContexts=j(Nl),this.location=j(Mr),this.changeDetector=j(Nr),this.environmentInjector=j(jt),this.inputBinder=j(sm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Qg(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yn]});let t=e;return t})(),Qg=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===bi?this.route:e===Nl?this.childContexts:this.parent.get(e,n)}},sm=new Q("");function aF(t,e,n){let r=Ca(t,e._root,n?n._root:void 0);return new Al(r,e)}function Ca(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=cF(t,e,n);return new Ft(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ca(t,a)),s}}let r=uF(e.value),i=e.children.map(o=>Ca(t,o));return new Ft(r,i)}}function cF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ca(t,r,i);return Ca(t,r)})}function uF(t){return new bi(new st(t.url),new st(t.params),new st(t.queryParams),new st(t.fragment),new st(t.data),t.outlet,t.component,t)}var pC="ngNavigationCancelingError";function gC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Oo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mC(!1,kt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function mC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[pC]=!0,n.cancellationCode=e,n}function lF(t){return yC(t)&&Oo(t.url)}function yC(t){return!!t&&t[pC]}var dF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Bt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Gt],decls:1,vars:0,template:function(i,o){i&1&&Y(0,"router-outlet")},dependencies:[om],encapsulation:2});let t=e;return t})();function hF(t,e){return t.providers&&!t._injector&&(t._injector=ug(t.providers,e,`Route: ${t.path}`)),t._injector??e}function am(t){let e=t.children&&t.children.map(am),n=e?Te(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=dF),n}function bn(t){return t.outlet||oe}function fF(t,e){let n=t.filter(r=>bn(r)===e);return n.push(...t.filter(r=>bn(r)!==e)),n}function Aa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var pF=(t,e,n,r)=>de(i=>(new Yg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Yg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ag(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Mo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Mo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new $g(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Ag(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ag(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Aa(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Rl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},No=class{constructor(e,n){this.component=e,this.route=n}};function gF(t,e,n){let r=t._root,i=e?e._root:null;return fa(r,i,n,[r.value])}function mF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ko(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!uE(t)?t:e.get(t):r}function fa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Mo(e);return t.children.forEach(s=>{yF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ya(a,n.getContext(s),i)),i}function yF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=vF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Rl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fa(t,e,a?a.children:null,r,i):fa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new No(a.outlet.component,s))}else s&&ya(e,a,i),i.canActivateChecks.push(new Rl(r)),o.component?fa(t,null,a?a.children:null,r,i):fa(t,null,n,r,i);return i}function vF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ei(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ei(t.url,e.url)||!In(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kg(t,e)||!In(t.queryParams,e.queryParams);case"paramsChange":default:return!Kg(t,e)}}function ya(t,e,n){let r=Mo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ya(s,e.children.getContext(o),n):ya(s,null,n):ya(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new No(e.outlet.component,i)):n.canDeactivateChecks.push(new No(null,i)):n.canDeactivateChecks.push(new No(null,i))}function Sa(t){return typeof t=="function"}function _F(t){return typeof t=="boolean"}function wF(t){return t&&Sa(t.canLoad)}function EF(t){return t&&Sa(t.canActivate)}function IF(t){return t&&Sa(t.canActivateChild)}function bF(t){return t&&Sa(t.canDeactivate)}function CF(t){return t&&Sa(t.canMatch)}function vC(t){return t instanceof Bn||t?.name==="EmptyError"}var vl=Symbol("INITIAL_VALUE");function Fo(){return en(t=>mu(t.map(e=>e.pipe($n(1),yf(vl)))).pipe(de(e=>{for(let n of e)if(n!==!0){if(n===vl)return vl;if(n===!1||n instanceof Or)return n}return!0}),Xt(e=>e!==vl),$n(1)))}function DF(t,e){return Ze(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ee(Te(L({},n),{guardsResult:!0})):TF(s,r,i,t).pipe(Ze(a=>a&&_F(a)?AF(r,o,t,e):ee(a)),de(a=>Te(L({},n),{guardsResult:a})))})}function TF(t,e,n,r){return Le(t).pipe(Ze(i=>NF(i.component,i.route,n,e,r)),fn(i=>i!==!0,!0))}function AF(t,e,n,r){return Le(e).pipe(uo(i=>co(RF(i.route.parent,r),SF(i.route,r),xF(t,i.path,n),MF(t,i.route,n))),fn(i=>i!==!0,!0))}function SF(t,e){return t!==null&&e&&e(new Hg(t)),ee(!0)}function RF(t,e){return t!==null&&e&&e(new Bg(t)),ee(!0)}function MF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>yu(()=>{let s=Aa(e)??n,a=ko(o,s),u=EF(a)?a.canActivate(e,t):pi(s,()=>a(e,t));return kr(u).pipe(fn())}));return ee(i).pipe(Fo())}function xF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>mF(s)).filter(s=>s!==null).map(s=>yu(()=>{let a=s.guards.map(u=>{let l=Aa(s.node)??n,h=ko(u,l),p=IF(h)?h.canActivateChild(r,t):pi(l,()=>h(r,t));return kr(p).pipe(fn())});return ee(a).pipe(Fo())}));return ee(o).pipe(Fo())}function NF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=Aa(e)??i,l=ko(a,u),h=bF(l)?l.canDeactivate(t,e,n,r):pi(u,()=>l(t,e,n,r));return kr(h).pipe(fn())});return ee(s).pipe(Fo())}function PF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=ko(s,t),u=wF(a)?a.canLoad(e,n):pi(t,()=>a(e,n));return kr(u)});return ee(o).pipe(Fo(),_C(r))}function _C(t){return rf(Xe(e=>{if(Oo(e))throw gC(t,e)}),de(e=>e===!0))}function OF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=ko(s,t),u=CF(a)?a.canMatch(e,n):pi(t,()=>a(e,n));return kr(u)});return ee(o).pipe(Fo(),_C(r))}var Da=class{constructor(e){this.segmentGroup=e||null}},Ml=class extends Error{constructor(e){super(),this.urlTree=e}};function Ro(t){return so(new Da(t))}function FF(t){return so(new z(4e3,!1))}function kF(t){return so(mC(!1,kt.GuardRejected))}var Jg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[oe])return FF(e.redirectTo);i=i.children[oe]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Ml(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Or(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new be(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Zg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function LF(t,e,n,r,i){let o=cm(t,e,n);return o.matched?(r=hF(e,r),OF(r,e,n,i).pipe(de(s=>s===!0?o:L({},Zg)))):ee(o)}function cm(t,e,n){if(e.path==="**")return VF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},Zg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||OO)(n,t,e);if(!i)return L({},Zg);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function VF(t){return{matched:!0,parameters:t.length>0?Zb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Yb(t,e,n,r){return n.length>0&&BF(t,n,r)?{segmentGroup:new be(e,jF(r,new be(n,t.children))),slicedSegments:[]}:n.length===0&&$F(t,n,r)?{segmentGroup:new be(t.segments,UF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function UF(t,e,n,r){let i={};for(let o of n)if(Pl(t,e,o)&&!r[bn(o)]){let s=new be([],{});i[bn(o)]=s}return L(L({},r),i)}function jF(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&bn(r)!==oe){let i=new be([],{});n[bn(r)]=i}return n}function BF(t,e,n){return n.some(r=>Pl(t,e,r)&&bn(r)!==oe)}function $F(t,e,n){return n.some(r=>Pl(t,e,r))}function Pl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function HF(t,e,n,r){return bn(t)!==r&&(r===oe||!Pl(e,n,t))?!1:cm(e,t,n).matched}function qF(t,e,n){return e.length===0&&!t.children[n]}var Xg=class{};function zF(t,e,n,r,i,o,s="emptyOnly"){return new em(t,e,n,r,i,s,o).recognize()}var GF=31,em=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Jg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=Yb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(de(n=>{let r=new ba([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},oe,this.rootComponentType,null,{}),i=new Ft(r,n),o=new Sl("",i),s=XO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,oe).pipe(Er(r=>{if(r instanceof Ml)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Da?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=rm(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(de(o=>o instanceof Ft?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Le(i).pipe(uo(o=>{let s=r.children[o],a=fF(n,o);return this.processSegmentGroup(e,a,s,o)}),mf((o,s)=>(o.push(...s),o)),Ir(null),gf(),Ze(o=>{if(o===null)return Ro(r);let s=wC(o);return WF(s),ee(s)}))}processSegment(e,n,r,i,o,s){return Le(n).pipe(uo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Er(u=>{if(u instanceof Da)return ee(null);throw u}))),fn(a=>!!a),Er(a=>{if(vC(a))return qF(r,i,o)?ee(new Xg):Ro(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return HF(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Ro(i):Ro(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=cm(n,i,o);if(!a)return Ro(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>GF&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Ze(m=>this.processSegment(e,r,n,m.concat(h),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=LF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(en(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(en(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,E=new ba(h,m,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,QF(r),bn(r),r.component??r._loadedComponent??null,r,YF(r)),{segmentGroup:A,slicedSegments:M}=Yb(n,h,p,u);if(M.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(de(k=>k===null?null:new Ft(E,k)));if(u.length===0&&M.length===0)return ee(new Ft(E,[]));let R=bn(r)===o;return this.processSegment(l,u,A,M,R?oe:o,!0).pipe(de(k=>new Ft(E,k instanceof Ft?[k]:[])))}))):Ro(n)))}getChildConfig(e,n,r){return n.children?ee({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ee({routes:n._loadedRoutes,injector:n._loadedInjector}):PF(e,n,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(e,n).pipe(Xe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):kF(n))):ee({routes:[],injector:e})}};function WF(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function KF(t){let e=t.value.routeConfig;return e&&e.path===""}function wC(t){let e=[],n=new Set;for(let r of t){if(!KF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=wC(r.children);e.push(new Ft(r.value,i))}return e.filter(r=>!n.has(r))}function QF(t){return t.data||{}}function YF(t){return t.resolve||{}}function JF(t,e,n,r,i,o){return Ze(s=>zF(t,e,n,r,s.extractedUrl,i,o).pipe(de(({state:a,tree:u})=>Te(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function ZF(t,e){return Ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ee(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of EC(u))s.add(l);let a=0;return Le(s).pipe(uo(u=>o.has(u)?XF(u,r,t,e):(u.data=rm(u,u.parent,t).resolve,ee(void 0))),Xe(()=>a++),lo(1),Ze(u=>a===s.size?ee(n):Pt))})}function EC(t){let e=t.children.map(n=>EC(n)).flat();return[t,...e]}function XF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!fC(i)&&(o[Ta]=i.title),ek(o,t,e,r).pipe(de(s=>(t._resolvedData=s,t.data=rm(t,t.parent,n).resolve,null)))}function ek(t,e,n,r){let i=Mg(t);if(i.length===0)return ee({});let o={};return Le(i).pipe(Ze(s=>tk(t[s],e,n,r).pipe(fn(),Xe(a=>{o[s]=a}))),lo(1),pf(o),Er(s=>vC(s)?Pt:so(s)))}function tk(t,e,n,r){let i=Aa(e)??r,o=ko(t,i),s=o.resolve?o.resolve(e,n):pi(i,()=>o(e,n));return kr(s)}function Sg(t){return en(e=>{let n=t(e);return n?Le(n).pipe(de(()=>e)):ee(e)})}var IC=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===oe);return i}getResolvedTitleForRoute(r){return r.data[Ta]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>j(nk),providedIn:"root"});let t=e;return t})(),nk=(()=>{let e=class e extends IC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(he(zb))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),um=new Q("",{providedIn:"root",factory:()=>({})}),lm=new Q(""),rk=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(dg)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=kr(r.loadComponent()).pipe(de(bC),Xe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),js(()=>{this.componentLoaders.delete(r)})),o=new no(i,()=>new mt).pipe(to());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ee({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=ik(i,this.compiler,r,this.onLoadEndListener).pipe(js(()=>{this.childrenLoaders.delete(i)})),a=new no(s,()=>new mt).pipe(to());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ik(t,e,n,r){return kr(t.loadChildren()).pipe(de(bC),Ze(i=>i instanceof Js||Array.isArray(i)?ee(i):Le(e.compileModuleAsync(i))),de(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(lm,[],{optional:!0,self:!0}).flat()),{routes:s.map(am),injector:o}}))}function ok(t){return t&&typeof t=="object"&&"default"in t}function bC(t){return ok(t)?t.default:t}var dm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>j(sk),providedIn:"root"});let t=e;return t})(),sk=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ak=new Q("");var ck=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new mt,this.transitionAbortSubject=new mt,this.configLoader=j(rk),this.environmentInjector=j(jt),this.urlSerializer=j(nm),this.rootContexts=j(Nl),this.location=j(ca),this.inputBindingEnabled=j(sm,{optional:!0})!==null,this.titleStrategy=j(IC),this.options=j(um,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(dm),this.createViewTransition=j(ak,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Ug(o)),i=o=>this.events.next(new jg(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Te(L(L({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new st({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ma,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xt(s=>s.id!==0),de(s=>Te(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),en(s=>{let a=!1,u=!1;return ee(s).pipe(en(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",kt.SupersededByNewNavigation),Pt;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Te(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Ii(l.id,this.urlSerializer.serialize(l.rawUrl),m,Og.IgnoredSameUrlNavigation)),l.resolve(null),Pt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ee(l).pipe(en(m=>{let E=this.transitions?.getValue();return this.events.next(new _a(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),E!==this.transitions?.getValue()?Pt:Promise.resolve(m)}),JF(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Xe(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Te(L({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let E=new Dl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(E)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:E,source:A,restoredState:M,extras:R}=l,k=new _a(m,this.urlSerializer.serialize(E),A,M);this.events.next(k);let B=dC(this.rootComponentType).snapshot;return this.currentTransition=s=Te(L({},l),{targetSnapshot:B,urlAfterRedirects:E,extras:Te(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,ee(s)}else{let m="";return this.events.next(new Ii(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Og.IgnoredByUrlHandlingStrategy)),l.resolve(null),Pt}}),Xe(l=>{let h=new Fg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),de(l=>(this.currentTransition=s=Te(L({},l),{guards:gF(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),DF(this.environmentInjector,l=>this.events.next(l)),Xe(l=>{if(s.guardsResult=l.guardsResult,Oo(l.guardsResult))throw gC(this.urlSerializer,l.guardsResult);let h=new kg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Xt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",kt.GuardRejected),!1)),Sg(l=>{if(l.guards.canActivateChecks.length)return ee(l).pipe(Xe(h=>{let p=new Lg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),en(h=>{let p=!1;return ee(h).pipe(ZF(this.paramsInheritanceStrategy,this.environmentInjector),Xe({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",kt.NoDataFromResolver)}}))}),Xe(h=>{let p=new Vg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Sg(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Xe(E=>{p.component=E}),de(()=>{})));for(let E of p.children)m.push(...h(E));return m};return mu(h(l.targetSnapshot.root)).pipe(Ir(null),$n(1))}),Sg(()=>this.afterPreactivation()),en(()=>{let{currentSnapshot:l,targetSnapshot:h}=s,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Le(p).pipe(de(()=>s)):ee(s)}),de(l=>{let h=aF(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Te(L({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),Xe(()=>{this.events.next(new Ea)}),pF(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),$n(1),Xe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),vf(this.transitionAbortSubject.pipe(Xe(l=>{throw l}))),js(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",kt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Er(l=>{if(u=!0,yC(l))this.events.next(new Fr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),lF(l)?this.events.next(new Ia(l.url)):s.resolve(!1);else{this.events.next(new wa(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Pt}))}))}cancelNavigationTransition(r,i,o){let s=new Fr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uk(t){return t!==ma}var lk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>j(dk),providedIn:"root"});let t=e;return t})(),tm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},dk=(()=>{let e=class e extends tm{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>j(hk),providedIn:"root"});let t=e;return t})(),hk=(()=>{let e=class e extends CC{constructor(){super(...arguments),this.location=j(ca),this.urlSerializer=j(nm),this.options=j(um,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(dm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Or,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=dC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof _a)this.stateMemento=this.createStateMemento();else if(r instanceof Ii)this.rawUrlTree=i.initialUrl;else if(r instanceof Dl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Ea?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Fr&&(r.code===kt.GuardRejected||r.code===kt.NoDataFromResolver)?this.restoreHistory(i):r instanceof wa?this.restoreHistory(i,!0):r instanceof Xn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=L(L({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(pa||{});function fk(t,e){t.events.pipe(Xt(n=>n instanceof Xn||n instanceof Fr||n instanceof wa||n instanceof Ii),de(n=>n instanceof Xn||n instanceof Ii?pa.COMPLETE:(n instanceof Fr?n.code===kt.Redirect||n.code===kt.SupersededByNewNavigation:!1)?pa.REDIRECTING:pa.FAILED),Xt(n=>n!==pa.REDIRECTING),$n(1)).subscribe(()=>{e()})}function pk(t){throw t}var gk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=j(ll),this.stateManager=j(CC),this.options=j(um,{optional:!0})||{},this.pendingTasks=j(cl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(ck),this.urlSerializer=j(nm),this.location=j(ca),this.urlHandlingStrategy=j(dm),this._events=new mt,this.errorHandler=this.options.errorHandler||pk,this.navigated=!1,this.routeReuseStrategy=j(lk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(lm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(sm,{optional:!0}),this.eventsSubscription=new $e,this.isNgZoneEnabled=j(Ae)instanceof Ae&&Ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Fr&&i.code!==kt.Redirect&&i.code!==kt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Xn)this.navigated=!0;else if(i instanceof Ia){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||uk(o.source)};this.scheduleNavigation(a,ma,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}vk(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ma,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=L({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(am),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u){case"merge":p=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let E=o?o.snapshot:this.routerState.snapshot.root;m=aC(E)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return cC(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Oo(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ma,null,i)}navigate(r,i={skipLocationChange:!1}){return yk(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=L({},gk):i===!1?o=L({},mk):o=i,Oo(r))return Gb(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Gb(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,E)=>{u=m,l=E});let p=this.pendingTasks.add();return fk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new z(4008,!1)}function vk(t){return!(t instanceof Ea)&&!(t instanceof Ia)}var xl=(()=>{let e=class e{constructor(r,i,o,s,a,u){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new mt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof Xn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:II(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)($(Qt),$(bi),zp("tabindex"),$(an),$(At),$(So))},e.\u0275dir=Oe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Ie("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&oa("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[at.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Pr],skipLocationChange:[at.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Pr],replaceUrl:[at.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Pr],routerLink:"routerLink"},standalone:!0,features:[cg,Yn]});let t=e;return t})(),DC=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,o,s,a){this.router=r,this.element=i,this.renderer=o,this.cdr=s,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ve,this.routerEventsSubscription=r.events.subscribe(u=>{u instanceof Xn&&this.update()})}ngAfterContentInit(){ee(this.links.changes,ee(null)).pipe(ao()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Le(r).pipe(ao()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.isActiveChange.emit(r))})}isLinkActive(r){let i=_k(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let s=o.urlTree;return s?r.isActive(s,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)($(Qt),$(At),$(an),$(Nr),$(xl,8))},e.\u0275dir=Oe({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,s){if(i&1&&lb(s,xl,5),i&2){let a;db(a=hb())&&(o.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Yn]});let t=e;return t})();function _k(t){return!!t.paths}var wk=new Q("");function TC(t,...e){return wn([{provide:lm,multi:!0,useValue:t},[],{provide:bi,useFactory:Ek,deps:[Qt]},{provide:lg,multi:!0,useFactory:Ik},e.map(n=>n.\u0275providers)])}function Ek(t){return t.routerState.root}function Ik(){let t=j(Ht);return e=>{let n=t.get(aa);if(e!==n.components[0])return;let r=t.get(Qt),i=t.get(bk);t.get(Ck)===1&&r.initialNavigation(),t.get(Dk,null,ae.Optional)?.setUpPreloading(),t.get(wk,null,ae.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var bk=new Q("",{factory:()=>new mt}),Ck=new Q("",{providedIn:"root",factory:()=>1});var Dk=new Q("");var AC=(()=>{let e=class e{constructor(r){this.router=r}redirigirALogin(){this.router.navigate(["/login"])}};e.\u0275fac=function(i){return new(i||e)($(Qt))},e.\u0275cmp=Bt({type:e,selectors:[["app-home"]],standalone:!0,features:[Gt],decls:53,vars:0,consts:[["href",EI`https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap`,"rel","stylesheet"],[1,"home-container"],[1,"header"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Home%2FBartel%20Clinica.png?alt=media&token=41b6210c-7e30-4924-af2b-42c8ed20a25c","alt","Logo de la Cl\xEDnica",1,"logo"],[1,"menu-icon-container"],[1,"menu-icon-button",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Home%2FLogin.png?alt=media&token=67d89f2f-0da4-4f56-92e0-1e8137b2d9d9","alt","Login Icono",1,"menu-icon-image"],[1,"welcome-section"],[1,"differentiators-section"],[1,"cards-container"],[1,"card"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Home%2Fatencion-personaliz.png?alt=media&token=577d5e14-8708-4c22-bdb0-ab1df0dcb1c9","alt","Atenci\xF3n Personalizada",1,"card-image"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Home%2FIngreso%20inmediato.png?alt=media&token=03e81afb-c196-4ab4-ac8b-f5541b246920","alt","Acceso Inmediato",1,"card-image"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Home%2FProfesionales.png?alt=media&token=8a137d64-eac6-4c96-af57-fe6c5d85b39b","alt","Profesionales de Confianza",1,"card-image"],[1,"info-bar"],[1,"info-item"],[1,"footer"]],template:function(i,o){i&1&&(Y(0,"link",0),x(1,"div",1)(2,"header",2),Y(3,"img",3),x(4,"div",4)(5,"button",5),Ie("click",function(){return o.redirigirALogin()}),Y(6,"img",6),P()()(),x(7,"section",7)(8,"h1"),re(9,"Bienvenido a la Cl\xEDnica Bartel"),P(),x(10,"p"),re(11," Nos dedicamos a proporcionar servicios de salud de alta calidad con acceso f\xE1cil y r\xE1pido a m\xE9dicos profesionales. "),P()(),x(12,"section",8)(13,"h2"),re(14,"\xBFQu\xE9 nos diferencia?"),P(),x(15,"div",9)(16,"div",10)(17,"h3"),re(18,"Atenci\xF3n Personalizada"),P(),x(19,"p"),re(20,"Nos enfocamos en cada paciente con un trato especial y \xFAnico, podras gestionar tus turnos como tener tu ficha medica cuando quieras."),P(),Y(21,"img",11),P(),x(22,"div",10)(23,"h3"),re(24,"Acceso Inmediato"),P(),x(25,"p"),re(26,"Reserva tus consultas de forma r\xE1pida y desde cualquier dispositivo a cualquiera hora, desde donde sea, con el profesional que desees."),P(),Y(27,"img",12),P(),x(28,"div",10)(29,"h3"),re(30,"Profesionales de Confianza"),P(),x(31,"p"),re(32,"Un equipo m\xE9dico de alto nivel y con experiencia en el rubro te pueden dar la tranquilidad de que estas en el lugar indicado."),P(),Y(33,"img",13),P()()(),x(34,"section",14)(35,"div",15)(36,"p"),re(37,"+15"),P(),x(38,"h4"),re(39,"A\xF1os en el rubro"),P()(),x(40,"div",15)(41,"p"),re(42,"+25.000"),P(),x(43,"h4"),re(44,"Pacientes Atendidos"),P()(),x(45,"div",15)(46,"p"),re(47,"+50"),P(),x(48,"h4"),re(49,"Profesionales"),P()()()(),x(50,"footer",16)(51,"p"),re(52,"\xA9 2024 Clinica Bartel. Todos los derechos reservados."),P()())},styles:['.home-container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;color:#fff;background-color:#1a1a2e;padding:20px;font-family:Roboto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.logo[_ngcontent-%COMP%]{width:100px}.menu-icon-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.menu-icon[_ngcontent-%COMP%]{cursor:pointer;width:80px}.menu-icon-button[_ngcontent-%COMP%]{background-color:#fff;border:none;cursor:pointer;padding:10px;border-radius:50%;transition:background-color .3s,transform .3s}.menu-icon-button[_ngcontent-%COMP%]:hover{background-color:#007bff;transform:scale(1.1)}.menu-icon-image[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain;transition:transform .3s}.menu-icon-button[_ngcontent-%COMP%]:hover   .menu-icon-image[_ngcontent-%COMP%]{transform:rotate(15deg)}.welcome-section[_ngcontent-%COMP%]{text-align:left;margin-left:5%;margin-bottom:50px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px;margin-bottom:10px}.welcome-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;line-height:1.5}.differentiators-section[_ngcontent-%COMP%]{margin-bottom:50px}.differentiators-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:20px;position:relative}.differentiators-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";display:block;width:50px;height:4px;background-color:#00bccd;margin:8px auto 0;border-radius:2px}.cards-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:15px}.card[_ngcontent-%COMP%]{background-color:#0f3460;padding:20px;border-radius:8px;width:30%;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 15px #0000004d}.card-image[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:4px}.info-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background-color:#16213e;padding:15px;margin-top:20px;border-radius:8px}.info-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;margin:0}.info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:5px 0}.footer[_ngcontent-%COMP%]{width:100%;background-color:#1a1a2e;padding:20px;display:flex;flex-direction:column;align-items:center;color:#fff;font-family:Roboto}.copyright[_ngcontent-%COMP%]{margin:0;font-size:16px;text-align:center}.contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:10px}.contact-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.contact-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00bcd4;text-decoration:none}.contact-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']});let t=e;return t})();var SC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Bt({type:e,selectors:[["app-page-not-found"]],standalone:!0,features:[Gt],decls:0,vars:0,template:function(i,o){}});let t=e;return t})();var VC=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)($(an),$(At))},e.\u0275dir=Oe({type:e});let t=e;return t})(),Bl=(()=>{let e=class e extends VC{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,features:[qt]});let t=e;return t})(),Pa=new Q("");var Tk={provide:Pa,useExisting:_n(()=>Uo),multi:!0};function Ak(){let t=Zn()?Zn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Sk=new Q(""),Uo=(()=>{let e=class e extends VC{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Ak())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)($(an),$(At),$(Sk,8))},e.\u0275dir=Oe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Ie("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[xr([Tk]),qt]});let t=e;return t})();function Rk(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var fm=new Q(""),UC=new Q("");function Mk(t){return Rk(t.value)?{required:!0}:null}function RC(t){return null}function jC(t){return t!=null}function BC(t){return yi(t)?Le(t):t}function $C(t){let e={};return t.forEach(n=>{e=n!=null?L(L({},e),n):e}),Object.keys(e).length===0?null:e}function HC(t,e){return e.map(n=>n(t))}function xk(t){return!t.validate}function qC(t){return t.map(e=>xk(e)?e:n=>e.validate(n))}function Nk(t){if(!t)return null;let e=t.filter(jC);return e.length==0?null:function(n){return $C(HC(n,e))}}function pm(t){return t!=null?Nk(qC(t)):null}function Pk(t){if(!t)return null;let e=t.filter(jC);return e.length==0?null:function(n){let r=HC(n,e).map(BC);return ff(r).pipe(de($C))}}function gm(t){return t!=null?Pk(qC(t)):null}function MC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ok(t){return t._rawValidators}function Fk(t){return t._rawAsyncValidators}function hm(t){return t?Array.isArray(t)?t:[t]:[]}function kl(t,e){return Array.isArray(t)?t.includes(e):t===e}function xC(t,e){let n=hm(e);return hm(t).forEach(i=>{kl(n,i)||n.push(i)}),n}function NC(t,e){return hm(e).filter(n=>!kl(t,n))}var Ll=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Vo=class extends Ll{get formDirective(){return null}get path(){return null}},Na=class extends Ll{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Vl=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},kk={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},k5=Te(L({},kk),{"[class.ng-submitted]":"isSubmitted"}),$l=(()=>{let e=class e extends Vl{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(Na,2))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&ul("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[qt]});let t=e;return t})(),Hl=(()=>{let e=class e extends Vl{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(Vo,10))},e.\u0275dir=Oe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&ul("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[qt]});let t=e;return t})();var Ra="VALID",Fl="INVALID",Lo="PENDING",Ma="DISABLED";function zC(t){return(ql(t)?t.validators:t)||null}function Lk(t){return Array.isArray(t)?pm(t):t||null}function GC(t,e){return(ql(e)?e.asyncValidators:t)||null}function Vk(t){return Array.isArray(t)?gm(t):t||null}function ql(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Uk(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new z(1e3,"");if(!r[n])throw new z(1001,"")}function jk(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new z(1002,"")})}var Ul=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ra}get invalid(){return this.status===Fl}get pending(){return this.status==Lo}get disabled(){return this.status===Ma}get enabled(){return this.status!==Ma}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(xC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(NC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(NC(e,this._rawAsyncValidators))}hasValidator(e){return kl(this._rawValidators,e)}hasAsyncValidator(e){return kl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Lo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ma,this.errors=null,this._forEachChild(r=>{r.disable(Te(L({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Te(L({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ra,this._forEachChild(r=>{r.enable(Te(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Te(L({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ra||this.status===Lo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ma:Ra}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Lo,this._hasOwnPendingAsyncValidator=!0;let n=BC(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?Ma:this.errors?Fl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lo)?Lo:this._anyControlsHaveStatus(Fl)?Fl:Ra}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ql(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Lk(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Vk(this._rawAsyncValidators)}},jl=class extends Ul{constructor(e,n,r){super(zC(n),GC(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){jk(this,!0,e),Object.keys(e).forEach(r=>{Uk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var mm=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>ym}),ym="always";function Bk(t,e){return[...e.path,t]}function WC(t,e,n=ym){KC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Hk(t,e),zk(t,e),qk(t,e),$k(t,e)}function PC(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function $k(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function KC(t,e){let n=Ok(t);e.validator!==null?t.setValidators(MC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Fk(t);e.asyncValidator!==null?t.setAsyncValidators(MC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();PC(e._rawValidators,i),PC(e._rawAsyncValidators,i)}function Hk(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&QC(t,e)})}function qk(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&QC(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function QC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function zk(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Gk(t,e){t==null,KC(t,e)}function Wk(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Kk(t){return Object.getPrototypeOf(t.constructor)===Bl}function Qk(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Yk(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Uo?n=o:Kk(o)?r=o:i=o}),i||r||n||null}var Jk={provide:Vo,useExisting:_n(()=>Oa)},xa=Promise.resolve(),Oa=(()=>{let e=class e extends Vo{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ve,this.form=new jl({},pm(r),gm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){xa.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),WC(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){xa.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){xa.then(()=>{let i=this._findContainer(r.path),o=new jl({});Gk(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){xa.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){xa.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,Qk(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)($(fm,10),$(UC,10),$(mm,8))},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Ie("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[at.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[xr([Jk]),qt]});let t=e;return t})();function OC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function FC(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Zk=class extends Ul{constructor(e=null,n,r){super(zC(n),GC(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ql(n)&&(n.nonNullable||n.initialValueIsDefault)&&(FC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){FC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Xk={provide:Na,useExisting:_n(()=>Fa)},kC=Promise.resolve(),Fa=(()=>{let e=class e extends Na{constructor(r,i,o,s,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new Zk,this._registered=!1,this.name="",this.update=new Ve,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Yk(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Wk(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){WC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){kC.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Pr(i);kC.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Bk(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)($(Vo,9),$(fm,10),$(UC,10),$(Pa,10),$(Nr,8),$(mm,8))},e.\u0275dir=Oe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[at.None,"disabled","isDisabled"],model:[at.None,"ngModel","model"],options:[at.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xr([Xk]),qt,Yn]});let t=e;return t})(),zl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),eL={provide:Pa,useExisting:_n(()=>vm),multi:!0},vm=(()=>{let e=class e extends Bl{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&Ie("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[xr([eL]),qt]});let t=e;return t})();var tL={provide:Pa,useExisting:_n(()=>Gl),multi:!0};function YC(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function nL(t){return t.split(":")[0]}var Gl=(()=>{let e=class e extends Bl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=YC(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=nL(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Ie("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[xr([tL]),qt]});let t=e;return t})(),JC=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(YC(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)($(At),$(an),$(Gl,9))},e.\u0275dir=Oe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),rL={provide:Pa,useExisting:_n(()=>ZC),multi:!0};function LC(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function iL(t){return t.split(":")[0]}var ZC=(()=>{let e=class e extends Bl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let u=0;u<a.length;u++){let l=a[u],h=this._getOptionValue(l.value);o.push(h)}}else{let a=i.options;for(let u=0;u<a.length;u++){let l=a[u];if(l.selected){let h=this._getOptionValue(l.value);o.push(h)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=iL(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Ie("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[xr([rL]),qt]});let t=e;return t})(),XC=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(LC(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(LC(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)($(At),$(an),$(ZC,9))},e.\u0275dir=Oe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var oL=(()=>{let e=class e{constructor(){this._validator=RC}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):RC,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,features:[Yn]});let t=e;return t})();var sL={provide:fm,useExisting:_n(()=>ka),multi:!0};var ka=(()=>{let e=class e extends oL{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Pr,this.createValidator=r=>Mk}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&oa("required",o._enabled?"":null)},inputs:{required:"required"},features:[xr([sL]),qt]});let t=e;return t})();var aL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=fi({type:e}),e.\u0275inj=hi({});let t=e;return t})();var Wl=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:mm,useValue:r.callSetDisabledState??ym}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=fi({type:e}),e.\u0275inj=hi({imports:[aL]});let t=e;return t})();var nD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},rD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,E=l&63;u||(E=64,s||(m=64)),r.push(n[h],n[p],n[m],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new wm;let m=o<<2|a>>4;if(r.push(m),l!==64){let E=a<<4&240|l>>2;if(r.push(E),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},wm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uL=function(t){let e=nD(t);return rD.encodeByteArray(e,!0)},La=function(t){return uL(t).replace(/\./g,"")},Im=function(t){try{return rD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var dL=()=>lL().__FIREBASE_DEFAULTS__,hL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Im(t[1]);return e&&JSON.parse(e)},Ql=()=>{try{return dL()||hL()||fL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bm=t=>{var e,n;return(n=(e=Ql())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yl=t=>{let e=bm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cm=()=>{var t;return(t=Ql())===null||t===void 0?void 0:t.config},Dm=t=>{var e;return(e=Ql())===null||e===void 0?void 0:e[`_${t}`]};var Kl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Jl(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[La(JSON.stringify(n)),La(JSON.stringify(s)),""].join(".")}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function pL(){var t;let e=(t=Ql())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cD(){let t=rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uD(){return!pL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tm(){try{return typeof indexedDB=="object"}catch{return!1}}function lD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var gL="FirebaseError",St=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,er.prototype.create)}},er=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?mL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new St(i,a,r)}};function mL(t,e){return t.replace(yL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yL=/\{\$([^}]+)}/g;function dD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ci(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(tD(o)&&tD(s)){if(!Ci(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function tD(t){return t!==null&&typeof t=="object"}function Va(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Bo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function hD(t,e){let n=new Em(t,e);return n.subscribe.bind(n)}var Em=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_m),i.error===void 0&&(i.error=_m),i.complete===void 0&&(i.complete=_m);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _m(){}var U5=4*60*60*1e3;function He(t){return t&&t._delegate?t._delegate:t}var Mt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Di="[DEFAULT]";var Am=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Kl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wL(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_L(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _L(t){return t===Di?void 0:t}function wL(t){return t.instantiationMode==="EAGER"}var Zl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Am(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var EL=[],pe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(pe||{}),IL={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},bL=pe.INFO,CL={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},DL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=CL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Lr=class{constructor(e){this.name=e,this._logLevel=bL,this._logHandler=DL,this._userLogHandler=null,EL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var TL=(t,e)=>e.some(n=>t instanceof n),fD,pD;function AL(){return fD||(fD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SL(){return pD||(pD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var gD=new WeakMap,Rm=new WeakMap,mD=new WeakMap,Sm=new WeakMap,xm=new WeakMap;function RL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Cn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&gD.set(n,t)}).catch(()=>{}),xm.set(e,t),e}function ML(t){if(Rm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Rm.set(t,e)}var Mm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yD(t){Mm=t(Mm)}function xL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xl(this),e,...n);return mD.set(r,e.sort?e.sort():[e]),Cn(r)}:SL().includes(t)?function(...e){return t.apply(Xl(this),e),Cn(gD.get(this))}:function(...e){return Cn(t.apply(Xl(this),e))}}function NL(t){return typeof t=="function"?xL(t):(t instanceof IDBTransaction&&ML(t),TL(t,AL())?new Proxy(t,Mm):t)}function Cn(t){if(t instanceof IDBRequest)return RL(t);if(Sm.has(t))return Sm.get(t);let e=NL(t);return e!==t&&(Sm.set(t,e),xm.set(e,t)),e}var Xl=t=>xm.get(t);function _D(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Cn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Cn(s.result),u.oldVersion,u.newVersion,Cn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var PL=["get","getKey","getAll","getAllKeys","count"],OL=["put","add","delete","clear"],Nm=new Map;function vD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=OL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PL.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Nm.set(e,o),o}yD(t=>Te(L({},t),{get:(e,n,r)=>vD(e,n)||t.get(e,n,r),has:(e,n)=>!!vD(e,n)||t.has(e,n)}));var Om=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function FL(t){let e=t.getComponent();return e?.type==="VERSION"}var Fm="@firebase/app",wD="0.10.13";var tr=new Lr("@firebase/app"),kL="@firebase/app-compat",LL="@firebase/analytics-compat",VL="@firebase/analytics",UL="@firebase/app-check-compat",jL="@firebase/app-check",BL="@firebase/auth",$L="@firebase/auth-compat",HL="@firebase/database",qL="@firebase/data-connect",zL="@firebase/database-compat",GL="@firebase/functions",WL="@firebase/functions-compat",KL="@firebase/installations",QL="@firebase/installations-compat",YL="@firebase/messaging",JL="@firebase/messaging-compat",ZL="@firebase/performance",XL="@firebase/performance-compat",eV="@firebase/remote-config",tV="@firebase/remote-config-compat",nV="@firebase/storage",rV="@firebase/storage-compat",iV="@firebase/firestore",oV="@firebase/vertexai-preview",sV="@firebase/firestore-compat",aV="firebase",cV="10.14.1";var km="[DEFAULT]",uV={[Fm]:"fire-core",[kL]:"fire-core-compat",[VL]:"fire-analytics",[LL]:"fire-analytics-compat",[jL]:"fire-app-check",[UL]:"fire-app-check-compat",[BL]:"fire-auth",[$L]:"fire-auth-compat",[HL]:"fire-rtdb",[qL]:"fire-data-connect",[zL]:"fire-rtdb-compat",[GL]:"fire-fn",[WL]:"fire-fn-compat",[KL]:"fire-iid",[QL]:"fire-iid-compat",[YL]:"fire-fcm",[JL]:"fire-fcm-compat",[ZL]:"fire-perf",[XL]:"fire-perf-compat",[eV]:"fire-rc",[tV]:"fire-rc-compat",[nV]:"fire-gcs",[rV]:"fire-gcs-compat",[iV]:"fire-fst",[sV]:"fire-fst-compat",[oV]:"fire-vertex","fire-js":"fire-js",[aV]:"fire-js-all"};var Ua=new Map,lV=new Map,Lm=new Map;function ED(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dn(t){let e=t.name;if(Lm.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,t);for(let n of Ua.values())ED(n,t);for(let n of lV.values())ED(n,t);return!0}function Ti(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cn(t){return t.settings!==void 0}var dV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new er("app","Firebase",dV);var Vm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}};var Tn=cV;function Ai(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:km,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vr.create("bad-app-name",{appName:String(i)});if(n||(n=Cm()),!n)throw Vr.create("no-options");let o=Ua.get(i);if(o){if(Ci(n,o.options)&&Ci(r,o.config))return o;throw Vr.create("duplicate-app",{appName:i})}let s=new Zl(i);for(let u of Lm.values())s.addComponent(u);let a=new Vm(n,r,s);return Ua.set(i,a),a}function Ur(t=km){let e=Ua.get(t);if(!e&&t===km&&Cm())return Ai();if(!e)throw Vr.create("no-app",{appName:t});return e}function ed(){return Array.from(Ua.values())}function Ue(t,e,n){var r;let i=(r=uV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(a.join(" "));return}Dn(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var hV="firebase-heartbeat-database",fV=1,ja="firebase-heartbeat-store",Pm=null;function DD(){return Pm||(Pm=_D(hV,fV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ja)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vr.create("idb-open",{originalErrorMessage:t.message})})),Pm}function pV(t){return v(this,null,function*(){try{let n=(yield DD()).transaction(ja),r=yield n.objectStore(ja).get(TD(t));return yield n.done,r}catch(e){if(e instanceof St)tr.warn(e.message);else{let n=Vr.create("idb-get",{originalErrorMessage:e?.message});tr.warn(n.message)}}})}function ID(t,e){return v(this,null,function*(){try{let r=(yield DD()).transaction(ja,"readwrite");yield r.objectStore(ja).put(e,TD(t)),yield r.done}catch(n){if(n instanceof St)tr.warn(n.message);else{let r=Vr.create("idb-set",{originalErrorMessage:n?.message});tr.warn(r.message)}}})}function TD(t){return`${t.name}!${t.options.appId}`}var gV=1024,mV=30*24*60*60*1e3,Um=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new jm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=bD();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=mV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){tr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=bD(),{heartbeatsToSend:r,unsentEntries:i}=yV(this._heartbeatsCache.heartbeats),o=La(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return tr.warn(n),""}})}};function bD(){return new Date().toISOString().substring(0,10)}function yV(t,e=gV){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),CD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),CD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var jm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Tm()?lD().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield pV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ID(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ID(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function CD(t){return La(JSON.stringify({version:2,heartbeats:t})).length}function vV(t){Dn(new Mt("platform-logger",e=>new Om(e),"PRIVATE")),Dn(new Mt("heartbeat",e=>new Um(e),"PRIVATE")),Ue(Fm,wD,t),Ue(Fm,wD,"esm2017"),Ue("fire-js","")}vV("");function HD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qD=HD,zD=new er("auth","Firebase",HD());var sd=new Lr("@firebase/auth");function _V(t,...e){sd.logLevel<=pe.WARN&&sd.warn(`Auth (${Tn}): ${t}`,...e)}function nd(t,...e){sd.logLevel<=pe.ERROR&&sd.error(`Auth (${Tn}): ${t}`,...e)}function Sn(t,...e){throw cy(t,...e)}function Si(t,...e){return cy(t,...e)}function GD(t,e,n){let r=Object.assign(Object.assign({},qD()),{[e]:n});return new er("auth","Firebase",r).create(e,{appName:t.name})}function ir(t){return GD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zD.create(t,...e)}function K(t,e,...n){if(!t)throw cy(e,...n)}function nr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw nd(e),new Error(e)}function Br(t,e){t||nr(e)}function ad(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WD(){return AD()==="http:"||AD()==="https:"}function AD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function wV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WD()||sD()||"connection"in navigator)?navigator.onLine:!0}function EV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ri=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=iD()||aD()}get(){return wV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function uy(t,e){Br(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var cd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var IV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var bV=new Ri(3e4,6e4);function or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function sr(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return KD(t,i,()=>v(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Va(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let E=Object.assign({method:e,headers:m},l);return oD()||(E.referrerPolicy="no-referrer"),cd.fetch()(QD(t,t.config.apiHost,n,p),E)}))})}function KD(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},IV),e);try{let i=new qm(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw td(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw td(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw td(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw GD(t,h,l);Sn(t,h)}}catch(i){if(i instanceof St)throw i;Sn(t,"network-request-failed",{message:String(i)})}})}function Ka(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield sr(t,e,n,r,i);return"mfaPendingCredential"in l&&Sn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function QD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?uy(t.config,i):`${t.config.apiScheme}://${i}`}function CV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var qm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),bV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function td(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Si(t,e,r);return i.customData._tokenResponse=n,i}function SD(t){return t!==void 0&&t.enterprise!==void 0}var zm=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function DV(t,e){return v(this,null,function*(){return sr(t,"GET","/v2/recaptchaConfig",or(t,e))})}function TV(t,e){return v(this,null,function*(){return sr(t,"POST","/v1/accounts:delete",e)})}function YD(t,e){return v(this,null,function*(){return sr(t,"POST","/v1/accounts:lookup",e)})}function Ba(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ly(t,e=!1){return v(this,null,function*(){let n=He(t),r=yield n.getIdToken(e),i=dy(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ba(Bm(i.auth_time)),issuedAtTime:Ba(Bm(i.iat)),expirationTime:Ba(Bm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Bm(t){return Number(t)*1e3}function dy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Im(n);return i?JSON.parse(i):(nd("Failed to decode base64 JWT payload"),null)}catch(i){return nd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function RD(t){let e=dy(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ha(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof St&&AV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function AV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Gm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var qa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ba(this.lastLoginAt),this.creationTime=Ba(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ud(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ha(t,YD(n,{idToken:r}));K(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?JD(o.providerUserInfo):[],a=SV(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new qa(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function hy(t){return v(this,null,function*(){let e=He(t);yield ud(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function SV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JD(t){return t.map(e=>{var{providerId:n}=e,r=df(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function RV(t,e){return v(this,null,function*(){let n=yield KD(t,{},()=>v(this,null,function*(){let r=Va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=QD(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",cd.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function MV(t,e){return v(this,null,function*(){return sr(t,"POST","/v2/accounts:revokeToken",or(t,e))})}var $a=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=RD(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield RV(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(K(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return nr("not implemented")}};function jr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var $o=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=df(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Ha(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return ly(this,e)}reload(){return hy(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ud(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(cn(this.auth.app))return Promise.reject(ir(this.auth));let e=yield this.getIdToken();return yield Ha(this,TV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(s=n.photoURL)!==null&&s!==void 0?s:void 0,M=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:V,emailVerified:q,isAnonymous:Se,providerData:Z,stsTokenManager:b}=n;K(V&&b,e,"internal-error");let y=$a.fromJSON(this.name,b);K(typeof V=="string",e,"internal-error"),jr(p,e.name),jr(m,e.name),K(typeof q=="boolean",e,"internal-error"),K(typeof Se=="boolean",e,"internal-error"),jr(E,e.name),jr(A,e.name),jr(M,e.name),jr(R,e.name),jr(k,e.name),jr(B,e.name);let _=new t({uid:V,auth:e,email:m,emailVerified:q,displayName:p,isAnonymous:Se,photoURL:A,phoneNumber:E,tenantId:M,stsTokenManager:y,createdAt:k,lastLoginAt:B});return Z&&Array.isArray(Z)&&(_.providerData=Z.map(I=>Object.assign({},I))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new $a;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ud(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];K(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?JD(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new $a;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new qa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var MD=new Map;function rr(t){Br(t instanceof Function,"Expected a class definition");let e=MD.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,MD.set(t,e),e)}var xV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Wm=xV;function rd(t,e,n){return`firebase:${t}:${e}:${n}`}var ld=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=rd(this.userKey,i.apiKey,o),this.fullPersistenceKey=rd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?$o._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(rr(Wm),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||rr(Wm),s=rd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p=$o._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function xD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rT(e))return"Blackberry";if(iT(e))return"Webos";if(XD(e))return"Safari";if((e.includes("chrome/")||eT(e))&&!e.includes("edge/"))return"Chrome";if(nT(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function ZD(t=rt()){return/firefox\//i.test(t)}function XD(t=rt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eT(t=rt()){return/crios\//i.test(t)}function tT(t=rt()){return/iemobile/i.test(t)}function nT(t=rt()){return/android/i.test(t)}function rT(t=rt()){return/blackberry/i.test(t)}function iT(t=rt()){return/webos/i.test(t)}function fy(t=rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NV(t=rt()){var e;return fy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PV(){return cD()&&document.documentMode===10}function oT(t=rt()){return fy(t)||nT(t)||iT(t)||rT(t)||/windows phone/i.test(t)||tT(t)}function sT(t,e=[]){let n;switch(t){case"Browser":n=xD(rt());break;case"Worker":n=`${xD(rt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tn}/${r}`}var Km=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function OV(n){return v(this,arguments,function*(t,e={}){return sr(t,"GET","/v2/passwordPolicy",or(t,e))})}var FV=6,Qm=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:FV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ym=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dd(this),this.idTokenSubscription=new dd(this),this.beforeStateQueue=new Km(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ld.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield YD(this,{idToken:e}),r=yield $o._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(cn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield ud(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=EV()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(cn(this.app))return Promise.reject(ir(this));let n=e?He(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return cn(this.app)?Promise.reject(ir(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return cn(this.app)?Promise.reject(ir(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield OV(this),n=new Qm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new er("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield MV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&rr(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=yield ld.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&_V(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function xi(t){return He(t)}var dd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hD(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vd={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kV(t){vd=t}function aT(t){return vd.loadJS(t)}function LV(){return vd.recaptchaEnterpriseScript}function VV(){return vd.gapiScript}function cT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var UV="recaptcha-enterprise",jV="NO_RECAPTCHA",Jm=class{constructor(e){this.type=UV,this.auth=xi(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(this,null,function*(){DV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new zm(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;SD(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(jV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&SD(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=LV();u.length!==0&&(u+=a),aT(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function ND(t,e,n,r=!1){return v(this,null,function*(){let i=new Jm(t),o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function Zm(t,e,n,r){return v(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield ND(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>v(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield ND(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}function py(t,e){let n=Ti(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Ci(o,e??{}))return i;Sn(i,"already-initialized")}return n.initialize({options:e})}function BV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function gy(t,e,n){let r=xi(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=uT(e),{host:s,port:a}=$V(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||HV()}function uT(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $V(t){let e=uT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:PD(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:PD(s)}}}function PD(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function HV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var za=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return nr("not implemented")}_getIdTokenResponse(e){return nr("not implemented")}_linkToIdToken(e,n){return nr("not implemented")}_getReauthenticationResolver(e){return nr("not implemented")}};function qV(t,e){return v(this,null,function*(){return sr(t,"POST","/v1/accounts:signUp",e)})}function zV(t,e){return v(this,null,function*(){return Ka(t,"POST","/v1/accounts:signInWithPassword",or(t,e))})}function GV(t,e){return v(this,null,function*(){return Ka(t,"POST","/v1/accounts:signInWithEmailLink",or(t,e))})}function WV(t,e){return v(this,null,function*(){return Ka(t,"POST","/v1/accounts:signInWithEmailLink",or(t,e))})}var Ga=class t extends za{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zm(e,n,"signInWithPassword",zV);case"emailLink":return GV(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zm(e,r,"signUpPassword",qV);case"emailLink":return WV(e,{idToken:n,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function $m(t,e){return v(this,null,function*(){return Ka(t,"POST","/v1/accounts:signInWithIdp",or(t,e))})}function KV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QV(t){let e=jo(Bo(t)).link,n=e?jo(Bo(e)).deep_link_id:null,r=jo(Bo(t)).deep_link_id;return(r?jo(Bo(r)).link:null)||r||n||e||t}var hd=class t{constructor(e){var n,r,i,o,s,a;let u=jo(Bo(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=KV((i=u.mode)!==null&&i!==void 0?i:null);K(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=QV(e);try{return new t(n)}catch{return null}}};var lT=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ga._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=hd.parseLink(r);return K(i,"argument-error"),Ga._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),fd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Xm=class extends fd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function YV(t,e){return v(this,null,function*(){return Ka(t,"POST","/v1/accounts:signUp",or(t,e))})}var Ho=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield $o._fromIdTokenResponse(e,r,i),s=OD(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=OD(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function OD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ey=class t extends St{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function dT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ey._fromErrorAndOperation(t,o,e,r):o})}function JV(t,e,n=!1){return v(this,null,function*(){let r=yield Ha(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ho._forOperation(t,"link",r)})}function ZV(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(cn(r.app))return Promise.reject(ir(r));let i="reauthenticate";try{let o=yield Ha(t,dT(r,i,e,t),n);K(o.idToken,r,"internal-error");let s=dy(o.idToken);K(s,r,"internal-error");let{sub:a}=s;return K(t.uid===a,r,"user-mismatch"),Ho._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Sn(r,"user-mismatch"),o}})}function hT(t,e,n=!1){return v(this,null,function*(){if(cn(t.app))return Promise.reject(ir(t));let r="signIn",i=yield dT(t,r,e),o=yield Ho._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function my(t,e){return v(this,null,function*(){return hT(xi(t),e)})}function fT(t){return v(this,null,function*(){let e=xi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function _d(t,e,n){return v(this,null,function*(){if(cn(t.app))return Promise.reject(ir(t));let r=xi(t),s=yield Zm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YV).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&fT(t),u}),a=yield Ho._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function wd(t,e,n){return cn(t.app)?Promise.reject(ir(t)):my(He(t),lT.credential(e,n)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&fT(t),r}))}function XV(t,e){return v(this,null,function*(){return sr(t,"POST","/v1/accounts:createAuthUri",or(t,e))})}function Ed(t,e){return v(this,null,function*(){let n=WD()?ad():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=yield XV(He(t),r);return i||[]})}function yy(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function vy(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function Id(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function bd(t){return He(t).signOut()}var pd="__sak";var gd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pd,"1"),this.storage.removeItem(pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var eU=1e3,tU=10,nU=(()=>{class t extends gd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oT(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);PV()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,tU):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},eU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield yr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield yr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield yr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),pT=nU;var rU=(()=>{class t extends gd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),_y=rU;function iU(t){return Promise.all(t.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var oU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield iU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function gT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ty=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=gT("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function An(){return window}function sU(t){An().location.href=t}function mT(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}function aU(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function cU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uU(){return mT()?self:null}var yT="firebaseLocalStorageDb",lU=1,md="firebaseLocalStorage",vT="fbase_key",Mi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Cd(t,e){return t.transaction([md],e?"readwrite":"readonly").objectStore(md)}function dU(){let t=indexedDB.deleteDatabase(yT);return new Mi(t).toPromise()}function ny(){let t=indexedDB.open(yT,lU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(md,{keyPath:vT})}catch(i){n(i)}}),t.addEventListener("success",()=>v(this,null,function*(){let r=t.result;r.objectStoreNames.contains(md)?e(r):(r.close(),yield dU(),e(yield ny()))}))})}function FD(t,e,n){return v(this,null,function*(){let r=Cd(t,!0).put({[vT]:e,value:n});return new Mi(r).toPromise()})}function hU(t,e){return v(this,null,function*(){let n=Cd(t,!1).get(e),r=yield new Mi(n).toPromise();return r===void 0?null:r.value})}function kD(t,e){let n=Cd(t,!0).delete(e);return new Mi(n).toPromise()}var fU=800,pU=3,gU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield ny(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>pU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return mT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=oU._getInstance(uU()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield aU(),!this.activeServiceWorker)return;this.sender=new ty(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||cU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ny();return yield FD(n,pd,"1"),yield kD(n,pd),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>FD(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>hU(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>kD(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=Cd(o,!1).getAll();return new Mi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),fU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),_T=gU;var h8=cT("rcb"),f8=new Ri(3e4,6e4);function mU(t,e){return e?rr(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Wa=class extends za{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $m(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $m(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $m(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function yU(t){return hT(t.auth,new Wa(t),t.bypassAuthState)}function vU(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),ZV(n,new Wa(t),t.bypassAuthState)}function _U(t){return v(this,null,function*(){let{auth:e,user:n}=t;return K(n,e,"internal-error"),JV(n,new Wa(t),t.bypassAuthState)})}var ry=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yU;case"linkViaPopup":case"linkViaRedirect":return _U;case"reauthViaPopup":case"reauthViaRedirect":return vU;default:Sn(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var p8=new Ri(2e3,1e4);var wU="pendingRedirect",id=new Map,iy=class t extends ry{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=id.get(this.auth._key());if(!e){try{let r=(yield EU(this.resolver,this.auth))?yield yr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return yr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,yr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function EU(t,e){return v(this,null,function*(){let n=CU(e),r=bU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function IU(t,e){id.set(t._key(),e)}function bU(t){return rr(t._redirectPersistence)}function CU(t){return rd(wU,t.config.apiKey,t.name)}function DU(t,e,n=!1){return v(this,null,function*(){if(cn(t.app))return Promise.reject(ir(t));let r=xi(t),i=mU(r,e),s=yield new iy(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var TU=10*60*1e3,oy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wT(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TU&&this.cachedEventUids.clear(),this.cachedEventUids.has(LD(e))}saveEventToCache(e){this.cachedEventUids.add(LD(e)),this.lastProcessedEventTime=Date.now()}};function LD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wT({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function AU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wT(t);default:return!1}}function SU(n){return v(this,arguments,function*(t,e={}){return sr(t,"GET","/v1/projects",e)})}var RU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MU=/^https?/;function xU(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield SU(t);for(let n of e)try{if(NU(n))return}catch{}Sn(t,"unauthorized-domain")})}function NU(t){let e=ad(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!MU.test(n))return!1;if(RU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var PU=new Ri(3e4,6e4);function VD(){let t=An().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OU(t){return new Promise((e,n)=>{var r,i,o;function s(){VD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VD(),n(Si(t,"network-request-failed"))},timeout:PU.get()})}if(!((i=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=An().gapi)===null||o===void 0)&&o.load)s();else{let a=cT("iframefcb");return An()[a]=()=>{gapi.load?s():n(Si(t,"network-request-failed"))},aT(`${VV()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw od=null,e})}var od=null;function FU(t){return od=od||OU(t),od}var kU=new Ri(5e3,15e3),LU="__/auth/iframe",VU="emulator/auth/iframe",UU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BU(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?uy(e,VU):`https://${t.config.authDomain}/${LU}`,r={apiKey:e.apiKey,appName:t.name,v:Tn},i=jU.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Va(r).slice(1)}`}function $U(t){return v(this,null,function*(){let e=yield FU(t),n=An().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:BU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UU,dontclear:!0},r=>new Promise((i,o)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Si(t,"network-request-failed"),a=An().setTimeout(()=>{o(s)},kU.get());function u(){An().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var HU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qU=500,zU=600,GU="_blank",WU="http://localhost",yd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function KU(t,e,n,r=qU,i=zU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},HU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=rt().toLowerCase();n&&(a=eT(l)?GU:n),ZD(l)&&(e=e||WU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[E,A])=>`${m}${E}=${A},`,"");if(NV(l)&&a!=="_self")return QU(e||"",a),new yd(null);let p=window.open(e||"",a,h);K(p,t,"popup-blocked");try{p.focus()}catch{}return new yd(p)}function QU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var YU="__/auth/handler",JU="emulator/auth/handler",ZU=encodeURIComponent("fac");function UD(t,e,n,r,i,o){return v(this,null,function*(){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Tn,eventId:i};if(e instanceof fd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",dD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Xm){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${ZU}=${encodeURIComponent(u)}`:"";return`${XU(t)}?${Va(a).slice(1)}${l}`})}function XU({config:t}){return t.emulator?uy(t,JU):`https://${t.authDomain}/${YU}`}var Hm="webStorageSupport",sy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_y,this._completeRedirectFn=DU,this._overrideRedirectResult=IU}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Br((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield UD(e,n,r,ad(),i);return KU(e,s,gT())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield UD(e,n,r,ad(),i);return sU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Br(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield $U(e),r=new oy(e);return n.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hm,{type:Hm},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Hm];s!==void 0&&n(!!s),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oT()||XD()||fy()}},ET=sy;var jD="@firebase/auth",BD="1.7.9";var ay=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function e2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t2(t){Dn(new Mt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sT(t)},l=new Ym(r,i,o,u);return BV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Mt("auth-internal",e=>{let n=xi(e.getProvider("auth").getImmediate());return(r=>new ay(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(jD,BD,e2(t)),Ue(jD,BD,"esm2017")}var n2=5*60,r2=Dm("authIdTokenMaxAge")||n2,$D=null,i2=t=>e=>v(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>r2)return;let i=n?.token;$D!==i&&($D=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function un(t=Ur()){let e=Ti(t,"auth");if(e.isInitialized())return e.getImmediate();let n=py(t,{popupRedirectResolver:ET,persistence:[_T,pT,_y]}),r=Dm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=i2(o.toString());vy(n,s,()=>s(n.currentUser)),yy(n,a=>s(a))}}let i=bm("auth");return i&&gy(n,`http://${i}`),n}function o2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Si("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",o2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t2("Browser");var W2="firebase",K2="10.14.1";Ue(W2,K2,"app");var IT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bT={};var $r,wy;(function(){var t;function e(b,y){function _(){}_.prototype=y.prototype,b.D=y.prototype,b.prototype=new _,b.prototype.constructor=b,b.C=function(I,C,T){for(var w=Array(arguments.length-2),Vn=2;Vn<arguments.length;Vn++)w[Vn-2]=arguments[Vn];return y.prototype[C].apply(I,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,y,_){_||(_=0);var I=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)I[C]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(C=0;16>C;++C)I[C]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=b.g[0],_=b.g[1],C=b.g[2];var T=b.g[3],w=y+(T^_&(C^T))+I[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=T+(C^y&(_^C))+I[1]+3905402710&4294967295,T=y+(w<<12&4294967295|w>>>20),w=C+(_^T&(y^_))+I[2]+606105819&4294967295,C=T+(w<<17&4294967295|w>>>15),w=_+(y^C&(T^y))+I[3]+3250441966&4294967295,_=C+(w<<22&4294967295|w>>>10),w=y+(T^_&(C^T))+I[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=T+(C^y&(_^C))+I[5]+1200080426&4294967295,T=y+(w<<12&4294967295|w>>>20),w=C+(_^T&(y^_))+I[6]+2821735955&4294967295,C=T+(w<<17&4294967295|w>>>15),w=_+(y^C&(T^y))+I[7]+4249261313&4294967295,_=C+(w<<22&4294967295|w>>>10),w=y+(T^_&(C^T))+I[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=T+(C^y&(_^C))+I[9]+2336552879&4294967295,T=y+(w<<12&4294967295|w>>>20),w=C+(_^T&(y^_))+I[10]+4294925233&4294967295,C=T+(w<<17&4294967295|w>>>15),w=_+(y^C&(T^y))+I[11]+2304563134&4294967295,_=C+(w<<22&4294967295|w>>>10),w=y+(T^_&(C^T))+I[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=T+(C^y&(_^C))+I[13]+4254626195&4294967295,T=y+(w<<12&4294967295|w>>>20),w=C+(_^T&(y^_))+I[14]+2792965006&4294967295,C=T+(w<<17&4294967295|w>>>15),w=_+(y^C&(T^y))+I[15]+1236535329&4294967295,_=C+(w<<22&4294967295|w>>>10),w=y+(C^T&(_^C))+I[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=T+(_^C&(y^_))+I[6]+3225465664&4294967295,T=y+(w<<9&4294967295|w>>>23),w=C+(y^_&(T^y))+I[11]+643717713&4294967295,C=T+(w<<14&4294967295|w>>>18),w=_+(T^y&(C^T))+I[0]+3921069994&4294967295,_=C+(w<<20&4294967295|w>>>12),w=y+(C^T&(_^C))+I[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=T+(_^C&(y^_))+I[10]+38016083&4294967295,T=y+(w<<9&4294967295|w>>>23),w=C+(y^_&(T^y))+I[15]+3634488961&4294967295,C=T+(w<<14&4294967295|w>>>18),w=_+(T^y&(C^T))+I[4]+3889429448&4294967295,_=C+(w<<20&4294967295|w>>>12),w=y+(C^T&(_^C))+I[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=T+(_^C&(y^_))+I[14]+3275163606&4294967295,T=y+(w<<9&4294967295|w>>>23),w=C+(y^_&(T^y))+I[3]+4107603335&4294967295,C=T+(w<<14&4294967295|w>>>18),w=_+(T^y&(C^T))+I[8]+1163531501&4294967295,_=C+(w<<20&4294967295|w>>>12),w=y+(C^T&(_^C))+I[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=T+(_^C&(y^_))+I[2]+4243563512&4294967295,T=y+(w<<9&4294967295|w>>>23),w=C+(y^_&(T^y))+I[7]+1735328473&4294967295,C=T+(w<<14&4294967295|w>>>18),w=_+(T^y&(C^T))+I[12]+2368359562&4294967295,_=C+(w<<20&4294967295|w>>>12),w=y+(_^C^T)+I[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=T+(y^_^C)+I[8]+2272392833&4294967295,T=y+(w<<11&4294967295|w>>>21),w=C+(T^y^_)+I[11]+1839030562&4294967295,C=T+(w<<16&4294967295|w>>>16),w=_+(C^T^y)+I[14]+4259657740&4294967295,_=C+(w<<23&4294967295|w>>>9),w=y+(_^C^T)+I[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=T+(y^_^C)+I[4]+1272893353&4294967295,T=y+(w<<11&4294967295|w>>>21),w=C+(T^y^_)+I[7]+4139469664&4294967295,C=T+(w<<16&4294967295|w>>>16),w=_+(C^T^y)+I[10]+3200236656&4294967295,_=C+(w<<23&4294967295|w>>>9),w=y+(_^C^T)+I[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=T+(y^_^C)+I[0]+3936430074&4294967295,T=y+(w<<11&4294967295|w>>>21),w=C+(T^y^_)+I[3]+3572445317&4294967295,C=T+(w<<16&4294967295|w>>>16),w=_+(C^T^y)+I[6]+76029189&4294967295,_=C+(w<<23&4294967295|w>>>9),w=y+(_^C^T)+I[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=T+(y^_^C)+I[12]+3873151461&4294967295,T=y+(w<<11&4294967295|w>>>21),w=C+(T^y^_)+I[15]+530742520&4294967295,C=T+(w<<16&4294967295|w>>>16),w=_+(C^T^y)+I[2]+3299628645&4294967295,_=C+(w<<23&4294967295|w>>>9),w=y+(C^(_|~T))+I[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=T+(_^(y|~C))+I[7]+1126891415&4294967295,T=y+(w<<10&4294967295|w>>>22),w=C+(y^(T|~_))+I[14]+2878612391&4294967295,C=T+(w<<15&4294967295|w>>>17),w=_+(T^(C|~y))+I[5]+4237533241&4294967295,_=C+(w<<21&4294967295|w>>>11),w=y+(C^(_|~T))+I[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=T+(_^(y|~C))+I[3]+2399980690&4294967295,T=y+(w<<10&4294967295|w>>>22),w=C+(y^(T|~_))+I[10]+4293915773&4294967295,C=T+(w<<15&4294967295|w>>>17),w=_+(T^(C|~y))+I[1]+2240044497&4294967295,_=C+(w<<21&4294967295|w>>>11),w=y+(C^(_|~T))+I[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=T+(_^(y|~C))+I[15]+4264355552&4294967295,T=y+(w<<10&4294967295|w>>>22),w=C+(y^(T|~_))+I[6]+2734768916&4294967295,C=T+(w<<15&4294967295|w>>>17),w=_+(T^(C|~y))+I[13]+1309151649&4294967295,_=C+(w<<21&4294967295|w>>>11),w=y+(C^(_|~T))+I[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=T+(_^(y|~C))+I[11]+3174756917&4294967295,T=y+(w<<10&4294967295|w>>>22),w=C+(y^(T|~_))+I[2]+718787259&4294967295,C=T+(w<<15&4294967295|w>>>17),w=_+(T^(C|~y))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(C+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+T&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var _=y-this.blockSize,I=this.B,C=this.h,T=0;T<y;){if(C==0)for(;T<=_;)i(this,b,T),T+=this.blockSize;if(typeof b=="string"){for(;T<y;)if(I[C++]=b.charCodeAt(T++),C==this.blockSize){i(this,I),C=0;break}}else for(;T<y;)if(I[C++]=b[T++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var _=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=_&255,_/=256;for(this.u(b),b=Array(16),y=_=0;4>y;++y)for(var I=0;32>I;I+=8)b[_++]=this.g[y]>>>I&255;return b};function o(b,y){var _=a;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=y(b)}function s(b,y){this.h=y;for(var _=[],I=!0,C=b.length-1;0<=C;C--){var T=b[C]|0;I&&T==y||(_[C]=T,I=!1)}this.g=_}var a={};function u(b){return-128<=b&&128>b?o(b,function(y){return new s([y|0],0>y?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return R(l(-b));for(var y=[],_=1,I=0;b>=_;I++)y[I]=b/_|0,_*=4294967296;return new s(y,0)}function h(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return R(h(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),I=p,C=0;C<b.length;C+=8){var T=Math.min(8,b.length-C),w=parseInt(b.substring(C,C+T),y);8>T?(T=l(Math.pow(y,T)),I=I.j(T).add(l(w))):(I=I.j(_),I=I.add(l(w)))}return I}var p=u(0),m=u(1),E=u(16777216);t=s.prototype,t.m=function(){if(M(this))return-R(this).m();for(var b=0,y=1,_=0;_<this.g.length;_++){var I=this.i(_);b+=(0<=I?I:4294967296+I)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(A(this))return"0";if(M(this))return"-"+R(this).toString(b);for(var y=l(Math.pow(b,6)),_=this,I="";;){var C=q(_,y).g;_=k(_,C.j(y));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(b);if(_=C,A(_))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function A(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function M(b){return b.h==-1}t.l=function(b){return b=k(this,b),M(b)?-1:A(b)?0:1};function R(b){for(var y=b.g.length,_=[],I=0;I<y;I++)_[I]=~b.g[I];return new s(_,~b.h).add(m)}t.abs=function(){return M(this)?R(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),_=[],I=0,C=0;C<=y;C++){var T=I+(this.i(C)&65535)+(b.i(C)&65535),w=(T>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);I=w>>>16,T&=65535,w&=65535,_[C]=w<<16|T}return new s(_,_[_.length-1]&-2147483648?-1:0)};function k(b,y){return b.add(R(y))}t.j=function(b){if(A(this)||A(b))return p;if(M(this))return M(b)?R(this).j(R(b)):R(R(this).j(b));if(M(b))return R(this.j(R(b)));if(0>this.l(E)&&0>b.l(E))return l(this.m()*b.m());for(var y=this.g.length+b.g.length,_=[],I=0;I<2*y;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<b.g.length;C++){var T=this.i(I)>>>16,w=this.i(I)&65535,Vn=b.i(C)>>>16,_s=b.i(C)&65535;_[2*I+2*C]+=w*_s,B(_,2*I+2*C),_[2*I+2*C+1]+=T*_s,B(_,2*I+2*C+1),_[2*I+2*C+1]+=w*Vn,B(_,2*I+2*C+1),_[2*I+2*C+2]+=T*Vn,B(_,2*I+2*C+2)}for(I=0;I<y;I++)_[I]=_[2*I+1]<<16|_[2*I];for(I=y;I<2*y;I++)_[I]=0;return new s(_,0)};function B(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function V(b,y){this.g=b,this.h=y}function q(b,y){if(A(y))throw Error("division by zero");if(A(b))return new V(p,p);if(M(b))return y=q(R(b),y),new V(R(y.g),R(y.h));if(M(y))return y=q(b,R(y)),new V(R(y.g),y.h);if(30<b.g.length){if(M(b)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,I=y;0>=I.l(b);)_=Se(_),I=Se(I);var C=Z(_,1),T=Z(I,1);for(I=Z(I,2),_=Z(_,2);!A(I);){var w=T.add(I);0>=w.l(b)&&(C=C.add(_),T=w),I=Z(I,1),_=Z(_,1)}return y=k(b,C.j(y)),new V(C,y)}for(C=p;0<=b.l(y);){for(_=Math.max(1,Math.floor(b.m()/y.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(_),w=T.j(y);M(w)||0<w.l(b);)_-=I,T=l(_),w=T.j(y);A(T)&&(T=m),C=C.add(T),b=k(b,w)}return new V(C,b)}t.A=function(b){return q(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),_=[],I=0;I<y;I++)_[I]=this.i(I)&b.i(I);return new s(_,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),_=[],I=0;I<y;I++)_[I]=this.i(I)|b.i(I);return new s(_,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),_=[],I=0;I<y;I++)_[I]=this.i(I)^b.i(I);return new s(_,this.h^b.h)};function Se(b){for(var y=b.g.length+1,_=[],I=0;I<y;I++)_[I]=b.i(I)<<1|b.i(I-1)>>>31;return new s(_,b.h)}function Z(b,y){var _=y>>5;y%=32;for(var I=b.g.length-_,C=[],T=0;T<I;T++)C[T]=0<y?b.i(T+_)>>>y|b.i(T+_+1)<<32-y:b.i(T+_);return new s(C,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wy=bT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,$r=bT.Integer=s}).apply(typeof IT<"u"?IT:typeof self<"u"?self:typeof window<"u"?window:{});var Dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ar={};var Ey,Q2,qo,Iy,Qa,Td,by,Cy,Dy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dd=="object"&&Dd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function E(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,S){for(var F=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)F[Re-2]=arguments[Re];return d.prototype[D].apply(g,F)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,S=g.length||0;c.length=D+S;for(let F=0;F<S;F++)c[D+F]=g[F]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var Se=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function Z(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let S=0;S<_.length;S++)f=_[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Ih;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Vn{constructor(){this.h=this.g=null}add(d,f){let g=_s.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var _s=new k(()=>new kS,c=>c.reset());class kS{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ws,Es=!1,Ih=new Vn,H_=()=>{let c=a.Promise.resolve(void 0);ws=()=>{c.then(LS)}};var LS=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){T(f)}var d=_s;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Es=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var VS=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Is(c,d){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Se){e:{try{q(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:US[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Is.aa.h.call(this)}}A(Is,ht);var US={2:"touch",3:"pen",4:"mouse"};Is.prototype.h=function(){Is.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var bs="closure_listenable_"+(1e6*Math.random()|0),jS=0;function BS(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++jS,this.da=this.fa=!1}function Mc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xc(c){this.src=c,this.g={},this.h=0}xc.prototype.add=function(c,d,f,g,D){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var F=Ch(c,d,g,D);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new BS(d,this.src,S,!!g,D),d.fa=f,c.push(d)),d};function bh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=D)&&Array.prototype.splice.call(g,D,1),S&&(Mc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ch(c,d,f,g){for(var D=0;D<c.length;++D){var S=c[D];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return D}return-1}var Dh="closure_lm_"+(1e6*Math.random()|0),Th={};function q_(c,d,f,g,D){if(g&&g.once)return G_(c,d,f,g,D);if(Array.isArray(d)){for(var S=0;S<d.length;S++)q_(c,d[S],f,g,D);return null}return f=Mh(f),c&&c[bs]?c.K(d,f,l(g)?!!g.capture:!!g,D):z_(c,d,f,!1,g,D)}function z_(c,d,f,g,D,S){if(!d)throw Error("Invalid event type");var F=l(D)?!!D.capture:!!D,Re=Sh(c);if(Re||(c[Dh]=Re=new xc(c)),f=Re.add(d,f,g,F,S),f.proxy)return f;if(g=$S(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)VS||(D=F),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(K_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $S(){function c(f){return d.call(c.src,c.listener,f)}let d=HS;return c}function G_(c,d,f,g,D){if(Array.isArray(d)){for(var S=0;S<d.length;S++)G_(c,d[S],f,g,D);return null}return f=Mh(f),c&&c[bs]?c.L(d,f,l(g)?!!g.capture:!!g,D):z_(c,d,f,!0,g,D)}function W_(c,d,f,g,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)W_(c,d[S],f,g,D);else g=l(g)?!!g.capture:!!g,f=Mh(f),c&&c[bs]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=Ch(S,f,g,D),-1<f&&(Mc(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=Sh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ch(d,f,g,D)),(f=-1<c?d[c]:null)&&Ah(f))}function Ah(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[bs])bh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(K_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Sh(d))?(bh(f,c),f.h==0&&(f.src=null,d[Dh]=null)):Mc(c)}}}function K_(c){return c in Th?Th[c]:Th[c]="on"+c}function HS(c,d){if(c.da)c=!0;else{d=new Is(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Ah(c),c=f.call(g,d)}return c}function Sh(c){return c=c[Dh],c instanceof xc?c:null}var Rh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mh(c){return typeof c=="function"?c:(c[Rh]||(c[Rh]=function(d){return c.handleEvent(d)}),c[Rh])}function ft(){fr.call(this),this.i=new xc(this),this.M=this,this.F=null}A(ft,fr),ft.prototype[bs]=!0,ft.prototype.removeEventListener=function(c,d,f,g){W_(this,c,d,f,g)};function wt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ht(d,c);else if(d instanceof ht)d.target=d.target||c;else{var D=d;d=new ht(g,c),I(d,D)}if(D=!0,f)for(var S=f.length-1;0<=S;S--){var F=d.g=f[S];D=Nc(F,g,!0,d)&&D}if(F=d.g=c,D=Nc(F,g,!0,d)&&D,D=Nc(F,g,!1,d)&&D,f)for(S=0;S<f.length;S++)F=d.g=f[S],D=Nc(F,g,!1,d)&&D}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Mc(f[g]);delete c.g[d],c.h--}}this.F=null},ft.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ft.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Nc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,S=0;S<d.length;++S){var F=d[S];if(F&&!F.da&&F.capture==f){var Re=F.listener,ot=F.ha||F.src;F.fa&&bh(c.i,F),D=Re.call(ot,g)!==!1&&D}}return D&&!g.defaultPrevented}function Q_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Y_(c){c.g=Q_(()=>{c.g=null,c.i&&(c.i=!1,Y_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class qS extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Y_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(c){fr.call(this),this.h=c,this.g={}}A(Cs,fr);var J_=[];function Z_(c){Z(c.g,function(d,f){this.g.hasOwnProperty(f)&&Ah(d)},c),c.g={}}Cs.prototype.N=function(){Cs.aa.N.call(this),Z_(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xh=a.JSON.stringify,zS=a.JSON.parse,GS=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Nh(){}Nh.prototype.h=null;function X_(c){return c.h||(c.h=c.i())}function ew(){}var Ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ph(){ht.call(this,"d")}A(Ph,ht);function Oh(){ht.call(this,"c")}A(Oh,ht);var Gr={},tw=null;function Pc(){return tw=tw||new ft}Gr.La="serverreachability";function nw(c){ht.call(this,Gr.La,c)}A(nw,ht);function Ts(c){let d=Pc();wt(d,new nw(d))}Gr.STAT_EVENT="statevent";function rw(c,d){ht.call(this,Gr.STAT_EVENT,c),this.stat=d}A(rw,ht);function Et(c){let d=Pc();wt(d,new rw(d,c))}Gr.Ma="timingevent";function iw(c,d){ht.call(this,Gr.Ma,c),this.size=d}A(iw,ht);function As(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ss(){this.g=!0}Ss.prototype.xa=function(){this.g=!1};function WS(c,d,f,g,D,S){c.info(function(){if(c.g)if(S)for(var F="",Re=S.split("&"),ot=0;ot<Re.length;ot++){var _e=Re[ot].split("=");if(1<_e.length){var pt=_e[0];_e=_e[1];var gt=pt.split("_");F=2<=gt.length&&gt[1]=="type"?F+(pt+"="+_e+"&"):F+(pt+"=redacted&")}}else F=null;else F=S;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+F})}function KS(c,d,f,g,D,S,F){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+S+" "+F})}function Gi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+YS(c,f)+(g?" "+g:"")})}function QS(c,d){c.info(function(){return"TIMEOUT: "+d})}Ss.prototype.info=function(){};function YS(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var S=D[0];if(S!="noop"&&S!="stop"&&S!="close")for(var F=1;F<D.length;F++)D[F]=""}}}}return xh(f)}catch{return d}}var Oc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ow={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fh;function Fc(){}A(Fc,Nh),Fc.prototype.g=function(){return new XMLHttpRequest},Fc.prototype.i=function(){return{}},Fh=new Fc;function pr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sw}function sw(){this.i=null,this.g="",this.h=!1}var aw={},kh={};function Lh(c,d,f){c.L=1,c.v=Uc(Un(d)),c.m=f,c.P=!0,cw(c,null)}function cw(c,d){c.F=Date.now(),kc(c),c.A=Un(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Iw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new sw,c.g=jw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new qS(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(J_[0]=D.toString()),D=J_);for(var S=0;S<D.length;S++){var F=q_(f,D[S],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ts(),WS(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&jn(c)==3?d.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{let gt=jn(this.g);var d=this.g.Ba();let Qi=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Rw(this.g)))){this.J||gt!=4||d==7||(d==8||0>=Qi?Ts(3):Ts(2)),Vh(this);var f=this.g.Z();this.X=f;t:if(uw(this)){var g=Rw(this.g);c="";var D=g.length,S=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Rs(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,KS(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,ot=this.g;if((Re=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Re)){var _e=Re;break t}}_e=null}if(f=_e)Gi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uh(this,f);else{this.o=!1,this.s=3,Et(12),Wr(this),Rs(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<F.length;)if(Jt=JS(this,F),Jt==kh){gt==4&&(this.s=4,Et(14),f=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==aw){this.s=4,Et(15),Gi(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Gi(this.i,this.l,Jt,null),Uh(this,Jt);if(uw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||F.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)Gi(this.i,this.l,F,"[Invalid Chunked Response]"),Wr(this),Rs(this);else if(0<F.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),zh(pt),pt.M=!0,Et(11))}}else Gi(this.i,this.l,F,null),Uh(this,F);gt==4&&Wr(this),this.o&&!this.J&&(gt==4?kw(this.j,this):(this.o=!1,kc(this)))}else pR(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Wr(this),Rs(this)}}}catch{}finally{}};function uw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function JS(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?kh:(f=Number(d.substring(f,g)),isNaN(f)?aw:(g+=1,g+f>d.length?kh:(d=d.slice(g,g+f),c.C=g+f,d)))}pr.prototype.cancel=function(){this.J=!0,Wr(this)};function kc(c){c.S=Date.now()+c.I,lw(c,c.I)}function lw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=As(m(c.ba,c),d)}function Vh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(QS(this.i,this.A),this.L!=2&&(Ts(),Et(17)),Wr(this),this.s=2,Rs(this)):lw(this,this.S-c)};function Rs(c){c.j.G==0||c.J||kw(c.j,c)}function Wr(c){Vh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Z_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Uh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||jh(f.h,c))){if(!c.K&&jh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)qc(f),$c(f);else break e;qh(f),Et(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=As(m(f.Za,f),6e3));if(1>=fw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Qr(f,11)}else if((c.K||f.g==c)&&qc(f),!B(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let _e=D[d];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];let pt=_e[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let gt=_e[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let Qi=_e[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(g=1.5*Qi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Jt=c.g;if(Jt){let Gc=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gc){var S=g.h;S.g||Gc.indexOf("spdy")==-1&&Gc.indexOf("quic")==-1&&Gc.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Bh(S,S.h),S.h=null))}if(g.D){let Gh=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gh&&(g.ya=Gh,Pe(g.I,g.D,Gh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=c;if(g.qa=Uw(g,g.J?g.ia:null,g.W),F.K){pw(g.h,F);var Re=F,ot=g.L;ot&&(Re.I=ot),Re.B&&(Vh(Re),kc(Re)),g.g=F}else Ow(g);0<f.i.length&&Hc(f)}else _e[0]!="stop"&&_e[0]!="close"||Qr(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Qr(f,7):Hh(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}Ts(4)}catch{}}var ZS=class{constructor(c,d){this.g=c,this.map=d}};function dw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function fw(c){return c.h?1:c.g?c.g.size:0}function jh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Bh(c,d){c.g?c.g.add(d):c.h=d}function pw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}dw.prototype.cancel=function(){if(this.i=gw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function gw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function XS(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function eR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function mw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=eR(c),g=XS(c),D=g.length,S=0;S<D;S++)d.call(void 0,g[S],f&&f[S],c)}var yw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var S=c[f].substring(0,g);D=c[f].substring(g+1)}else S=c[f];d(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Kr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Kr){this.h=c.h,Lc(this,c.j),this.o=c.o,this.g=c.g,Vc(this,c.s),this.l=c.l;var d=c.i,f=new Ns;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),vw(this,f),this.m=c.m}else c&&(d=String(c).match(yw))?(this.h=!1,Lc(this,d[1]||"",!0),this.o=Ms(d[2]||""),this.g=Ms(d[3]||"",!0),Vc(this,d[4]),this.l=Ms(d[5]||"",!0),vw(this,d[6]||"",!0),this.m=Ms(d[7]||"")):(this.h=!1,this.i=new Ns(null,this.h))}Kr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(xs(d,_w,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(xs(d,_w,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(xs(f,f.charAt(0)=="/"?iR:rR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",xs(f,sR)),c.join("")};function Un(c){return new Kr(c)}function Lc(c,d,f){c.j=f?Ms(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Vc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function vw(c,d,f){d instanceof Ns?(c.i=d,aR(c.i,c.h)):(f||(d=xs(d,oR)),c.i=new Ns(d,c.h))}function Pe(c,d,f){c.i.set(d,f)}function Uc(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ms(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,nR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function nR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var _w=/[#\/\?@]/g,rR=/[#\?:]/g,iR=/[#\?]/g,oR=/[#\?@]/g,sR=/#/g;function Ns(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function gr(c){c.g||(c.g=new Map,c.h=0,c.i&&tR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ns.prototype,t.add=function(c,d){gr(this),this.i=null,c=Wi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function ww(c,d){gr(c),d=Wi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Ew(c,d){return gr(c),d=Wi(c,d),c.g.has(d)}t.forEach=function(c,d){gr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},t.na=function(){gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let S=0;S<D.length;S++)f.push(d[g])}return f},t.V=function(c){gr(this);let d=[];if(typeof c=="string")Ew(this,c)&&(d=d.concat(this.g.get(Wi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return gr(this),this.i=null,c=Wi(this,c),Ew(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Iw(c,d,f){ww(c,d),0<f.length&&(c.i=null,c.g.set(Wi(c,d),M(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var D=S;F[g]!==""&&(D+="="+encodeURIComponent(String(F[g]))),c.push(D)}}return this.i=c.join("&")};function Wi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function aR(c,d){d&&!c.j&&(gr(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(ww(this,g),Iw(this,D,f))},c)),c.j=d}function cR(c,d){let f=new Ss;if(a.Image){let g=new Image;g.onload=E(mr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=E(mr,f,"TestLoadImage: error",!1,d,g),g.onabort=E(mr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=E(mr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function uR(c,d){let f=new Ss,g=new AbortController,D=setTimeout(()=>{g.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(D),S.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),mr(f,"TestPingServer: error",!1,d)})}function mr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function lR(){this.g=new GS}function dR(c,d,f){let g=f||"";try{mw(c,function(D,S){let F=D;l(D)&&(F=xh(D)),d.push(g+S+"="+encodeURIComponent(F))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Ps(c){this.l=c.Ub||null,this.j=c.eb||!1}A(Ps,Nh),Ps.prototype.g=function(){return new jc(this.l,this.j)},Ps.prototype.i=function(c){return function(){return c}}({});function jc(c,d){ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(jc,ft),t=jc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Fs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function bw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Os(this):Fs(this),this.readyState==3&&bw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Os(this))},t.Qa=function(c){this.g&&(this.response=c,Os(this))},t.ga=function(){this.g&&Os(this)};function Os(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Fs(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Fs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Cw(c){let d="";return Z(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function $h(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Cw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Pe(c,d,f))}function ke(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ke,ft);var hR=/^https?$/i,fR=["POST","PUT"];t=ke.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fh.g(),this.v=this.o?X_(this.o):X_(Fh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Dw(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fR,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,F]of f)this.g.setRequestHeader(S,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sw(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){Dw(this,S)}};function Dw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Tw(c),Bc(c)}function Tw(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),Bc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bc(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Aw(this):this.bb())},t.bb=function(){Aw(this)};function Aw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||jn(c)!=4||c.Z()!=2)){if(c.u&&jn(c)==4)Q_(c.Ea,0,c);else if(wt(c,"readystatechange"),jn(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=F===0){var D=String(c.D).match(yw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!hR.test(D?D.toLowerCase():"")}f=g}if(f)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var S=2<jn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",Tw(c)}}finally{Bc(c)}}}}function Bc(c,d){if(c.g){Sw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||wt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Sw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),zS(d)}};function Rw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function pR(c){let d={};c=(c.g&&2<=jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(B(c[g]))continue;var f=C(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[D]||[];d[D]=S,S.push(f)}b(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Mw(c){this.Aa=0,this.i=[],this.j=new Ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,c),this.cb=ks("retryDelaySeedMs",1e4,c),this.Wa=ks("forwardChannelMaxRetries",2,c),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new dw(c&&c.concurrentRequestLimit),this.Da=new lR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){Et(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Uw(this,null,this.W),Hc(this)};function Hh(c){if(xw(c),c.G==3){var d=c.U++,f=Un(c.I);if(Pe(f,"SID",c.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),Ls(c,f),d=new pr(c,c.j,d),d.L=2,d.v=Uc(Un(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=jw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),kc(d)}Vw(c)}function $c(c){c.g&&(zh(c),c.g.cancel(),c.g=null)}function xw(c){$c(c),c.u&&(a.clearTimeout(c.u),c.u=null),qc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Hc(c){if(!hw(c.h)&&!c.s){c.s=!0;var d=c.Ga;ws||H_(),Es||(ws(),Es=!0),Ih.add(d,c),c.B=0}}function gR(c,d){return fw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=As(m(c.Ga,c,d),Lw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new pr(this,this.j,c),S=this.o;if(this.S&&(S?(S=y(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(D.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Pw(this,D,d),f=Un(this.I),Pe(f,"RID",c),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),Ls(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(Cw(S)))+"&"+d:this.m&&$h(f,this.m,S)),Bh(this.h,D),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),D.T=!0,Lh(D,f,null)):Lh(D,f,d),this.G=2}}else this.G==3&&(c?Nw(this,c):this.i.length==0||hw(this.h)||Nw(this))};function Nw(c,d){var f;d?f=d.l:f=c.U++;let g=Un(c.I);Pe(g,"SID",c.K),Pe(g,"RID",f),Pe(g,"AID",c.T),Ls(c,g),c.m&&c.o&&$h(g,c.m,c.o),f=new pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Pw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Bh(c.h,f),Lh(f,g,d)}function Ls(c,d){c.H&&Z(c.H,function(f,g){Pe(d,g,f)}),c.l&&mw({},function(f,g){Pe(d,g,f)})}function Pw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let S=-1;for(;;){let F=["count="+f];S==-1?0<f?(S=D[0].g,F.push("ofs="+S)):S=0:F.push("ofs="+S);let Re=!0;for(let ot=0;ot<f;ot++){let _e=D[ot].g,pt=D[ot].map;if(_e-=S,0>_e)S=Math.max(0,D[ot].g-100),Re=!1;else try{dR(pt,F,"req"+_e+"_")}catch{g&&g(pt)}}if(Re){g=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Ow(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ws||H_(),Es||(ws(),Es=!0),Ih.add(d,c),c.v=0}}function qh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=As(m(c.Fa,c),Lw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Fw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=As(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),$c(this),Fw(this))};function zh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Fw(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Un(c.qa);Pe(d,"RID","rpc"),Pe(d,"SID",c.K),Pe(d,"AID",c.T),Pe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(d,"TO",c.ja),Pe(d,"TYPE","xmlhttp"),Ls(c,d),c.m&&c.o&&$h(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Uc(Un(d)),f.m=null,f.P=!0,cw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,$c(this),qh(this),Et(19))};function qc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function kw(c,d){var f=null;if(c.g==d){qc(c),zh(c),c.g=null;var g=2}else if(jh(c.h,d))f=d.D,pw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=Pc(),wt(g,new iw(g,f)),Hc(c)}else Ow(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&gR(c,d)||g==2&&qh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:Qr(c,5);break;case 4:Qr(c,10);break;case 3:Qr(c,6);break;default:Qr(c,2)}}}function Lw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Qr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new Kr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lc(g,"https"),Uc(g),D?cR(g.toString(),f):uR(g.toString(),f)}else Et(2);c.G=0,c.l&&c.l.sa(d),Vw(c),xw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Vw(c){if(c.G=0,c.ka=[],c.l){let d=gw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function Uw(c,d,f){var g=f instanceof Kr?Un(f):new Kr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Vc(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var S=new Kr(null);g&&Lc(S,g),d&&(S.g=d),D&&Vc(S,D),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Pe(g,f,d),Pe(g,"VER",c.la),Ls(c,g),g}function jw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new ke(new Ps({eb:f})):new ke(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bw(){}t=Bw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zc(){}zc.prototype.g=function(c,d){return new xt(c,d)};function xt(c,d){ft.call(this),this.g=new Mw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!B(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ki(this)}A(xt,ft),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Hh(this.g)},xt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=xh(c),c=f);d.i.push(new ZS(d.Ya++,c)),d.G==3&&Hc(d)},xt.prototype.N=function(){this.g.l=null,delete this.j,Hh(this.g),delete this.g,xt.aa.N.call(this)};function $w(c){Ph.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A($w,Ph);function Hw(){Oh.call(this),this.status=1}A(Hw,Oh);function Ki(c){this.g=c}A(Ki,Bw),Ki.prototype.ua=function(){wt(this.g,"a")},Ki.prototype.ta=function(c){wt(this.g,new $w(c))},Ki.prototype.sa=function(c){wt(this.g,new Hw)},Ki.prototype.ra=function(){wt(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,Dy=ar.createWebChannelTransport=function(){return new zc},Cy=ar.getStatEventTarget=function(){return Pc()},by=ar.Event=Gr,Td=ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oc.NO_ERROR=0,Oc.TIMEOUT=8,Oc.HTTP_ERROR=6,Qa=ar.ErrorCode=Oc,ow.COMPLETE="complete",Iy=ar.EventType=ow,ew.EventType=Ds,Ds.OPEN="a",Ds.CLOSE="b",Ds.ERROR="c",Ds.MESSAGE="d",ft.prototype.listen=ft.prototype.K,qo=ar.WebChannel=ew,Q2=ar.FetchXmlHttpFactory=Ps,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,Ey=ar.XhrIo=ke}).apply(typeof Dd<"u"?Dd:typeof self<"u"?self:typeof window<"u"?window:{});var CT="@firebase/firestore";var it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");var cs="10.14.0";var Fi=new Lr("@firebase/firestore");function Ya(){return Fi.logLevel}function U(t,...e){if(Fi.logLevel<=pe.DEBUG){let n=e.map(u_);Fi.debug(`Firestore (${cs}): ${t}`,...n)}}function cr(t,...e){if(Fi.logLevel<=pe.ERROR){let n=e.map(u_);Fi.error(`Firestore (${cs}): ${t}`,...n)}}function Yo(t,...e){if(Fi.logLevel<=pe.WARN){let n=e.map(u_);Fi.warn(`Firestore (${cs}): ${t}`,...n)}}function u_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function J(t="Unexpected state"){let e=`FIRESTORE (${cs}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function De(t,e){t||J()}function te(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends St{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var xd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},My=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}},xy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ny=class{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new xd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new it(e)}},Py=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Oy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Py(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ky=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new Fy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Y2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Nd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Y2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function we(t,e){return t<e?-1:t>e?1:0}function Jo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var lt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new lt(0,0))}static max(){return new t(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Je=class t extends Pd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},J2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lt=class t extends Pd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return J2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new H(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Je.fromString(e))}static fromName(e){return new t(Je.fromString(e).popFirst(5))}static empty(){return new t(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Je(e.slice()))}};var Ly=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ly.UNKNOWN_ID=-1;function Z2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new ki(i,G.empty(),e)}function X2(t){return new ki(t.readTime,t.key,-1)}var ki=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ie.min(),G.empty(),-1)}static max(){return new t(ie.max(),G.empty(),-1)}};function ej(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}var tj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function yc(t){return v(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==tj)throw t;U("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function nj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vc(t){return t.name==="IndexedDbTransactionError"}var eA=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function sh(t){return t==null}function nc(t){return t===0&&1/t==-1/0}function rj(t){return typeof t=="number"&&Number.isInteger(t)&&!nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ij=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oW=[...ij,"documentOverlays"],oj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sj=oj,aj=[...sj,"indexConfiguration","indexState","indexEntries"];var sW=[...aj,"globals"];function DT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function us(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var je=class t{constructor(e,n){this.comparator=e,this.root=n||Nn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}},Ko=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vt=class t{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Od(this.data.getIterator())}getIteratorFrom(e){return new Od(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Od=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Mn=class t{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new t([])}unionWith(e){let n=new vt(Lt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Fd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var _t=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Fd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_t.EMPTY_BYTE_STRING=new _t("");var cj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(t){if(De(!!t),typeof t=="string"){let e=0,n=cj.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}function l_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function d_(t){let e=t.mapValue.fields.__previous_value__;return l_(e)?d_(e):e}function rc(t){let e=ur(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}var Uy=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},kd=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ad={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l_(t)?4:rA(t)?9007199254740991:nA(t)?10:11:J()}function Fn(t,e){if(t===e)return!0;let n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rc(t).isEqual(rc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ur(i.timestampValue),a=ur(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Hr(i.bytesValue).isEqual(Hr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?nc(s)===nc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Jo(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(DT(s)!==DT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Fn(s[u],a[u])))return!1;return!0}(t,e);default:return J()}}function ic(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;let n=Li(t),r=Li(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),u=Fe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return TT(t.timestampValue,e.timestampValue);case 4:return TT(rc(t),rc(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Hr(o),u=Hr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=we(a[l],u[l]);if(h!==0)return h}return we(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=we(Fe(o.latitude),Fe(s.latitude));return a!==0?a:we(Fe(o.longitude),Fe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return AT(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},E=(a=p.value)===null||a===void 0?void 0:a.arrayValue,A=(u=m.value)===null||u===void 0?void 0:u.arrayValue,M=we(((l=E?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:AT(E,A)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ad.mapValue&&s===Ad.mapValue)return 0;if(o===Ad.mapValue)return 1;if(s===Ad.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=we(u[p],h[p]);if(m!==0)return m;let E=Zo(a[u[p]],l[h[p]]);if(E!==0)return E}return we(u.length,h.length)}(t.mapValue,e.mapValue);default:throw J()}}function TT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);let n=ur(t),r=ur(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function AT(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Zo(n[i],r[i]);if(o)return o}return we(n.length,r.length)}function Xo(t){return jy(t)}function jy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=jy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${jy(n.fields[s])}`;return i+"}"}(t.mapValue):J()}function By(t){return!!t&&"integerValue"in t}function h_(t){return!!t&&"arrayValue"in t}function ST(t){return!!t&&"nullValue"in t}function RT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rd(t){return!!t&&"mapValue"in t}function nA(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Za(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ln=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(n)}setAll(e){let n=Lt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Za(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Rd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){us(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Za(this.value))}};function iA(t){let e=[];return us(t.fields,(n,r)=>{let i=new Lt([n]);if(Rd(r)){let o=iA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Mn(e)}var dn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ie.min(),ie.min(),ie.min(),ln.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ie.min(),ie.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ie.min(),ie.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var es=class{constructor(e,n){this.position=e,this.inclusive=n}};function MT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=Zo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}var ts=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function uj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ld=class{},nt=class t extends Ld{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Hy(e,n,r):n==="array-contains"?new Gy(e,r):n==="in"?new Wy(e,r):n==="not-in"?new Ky(e,r):n==="array-contains-any"?new Qy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qy(e,r):new zy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zo(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},kn=class t extends Ld{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return oA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function oA(t){return t.op==="and"}function sA(t){return lj(t)&&oA(t)}function lj(t){for(let e of t.filters)if(e instanceof kn)return!1;return!0}function $y(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+Xo(t.value);if(sA(t))return t.filters.map(e=>$y(e)).join(",");{let e=t.filters.map(n=>$y(n)).join(",");return`${t.op}(${e})`}}function aA(t,e){return t instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(t,e):t instanceof kn?function(r,i){return i instanceof kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&aA(s,i.filters[a]),!0):!1}(t,e):void J()}function cA(t){return t instanceof nt?function(n){return`${n.field.canonicalString()} ${n.op} ${Xo(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(cA).join(" ,")+"}"}(t):"Filter"}var Hy=class extends nt{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},qy=class extends nt{constructor(e,n){super(e,"in",n),this.keys=uA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},zy=class extends nt{constructor(e,n){super(e,"not-in",n),this.keys=uA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function uA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var Gy=class extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return h_(n)&&ic(n.arrayValue,this.value)}},Wy=class extends nt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ic(this.value.arrayValue,n)}},Ky=class extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ic(this.value.arrayValue,n)}},Qy=class extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!h_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ic(this.value.arrayValue,r))}};var Yy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function NT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Yy(t,e,n,r,i,o,s)}function f_(t){let e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$y(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xo(r)).join(",")),e.ue=n}return e.ue}function p_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xT(t.startAt,e.startAt)&&xT(t.endAt,e.endAt)}function Jy(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ns=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function dj(t,e,n,r,i,o,s,a){return new ns(t,e,n,r,i,o,s,a)}function g_(t){return new ns(t)}function PT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hj(t){return t.collectionGroup!==null}function Xa(t){let e=te(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new vt(Lt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ts(o,r))}),n.has(Lt.keyField().canonicalString())||e.ce.push(new ts(Lt.keyField(),r))}return e.ce}function Pn(t){let e=te(t);return e.le||(e.le=fj(e,Xa(t))),e.le}function fj(t,e){if(t.limitType==="F")return NT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ts(i.field,o)});let n=t.endAt?new es(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new es(t.startAt.position,t.startAt.inclusive):null;return NT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zy(t,e,n){return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ah(t,e){return p_(Pn(t),Pn(e))&&t.limitType===e.limitType}function lA(t){return`${f_(Pn(t))}|lt:${t.limitType}`}function zo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cA(i)).join(", ")}]`),sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xo(i)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function ch(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Xa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=MT(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Xa(r),i)||r.endAt&&!function(s,a,u){let l=MT(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Xa(r),i))}(t,e)}function pj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dA(t){return(e,n)=>{let r=!1;for(let i of Xa(t)){let o=gj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function gj(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Zo(u,l):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}var qr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return tA(this.inner)}size(){return this.innerSize}};var mj=new je(G.comparator);function lr(){return mj}var hA=new je(G.comparator);function Ja(...t){let e=hA;for(let n of t)e=e.insert(n.key,n);return e}function fA(t){let e=hA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ni(){return ec()}function pA(){return ec()}function ec(){return new qr(t=>t.toString(),(t,e)=>t.isEqual(e))}var yj=new je(G.comparator),vj=new vt(G.comparator);function ge(...t){let e=vj;for(let n of t)e=e.add(n);return e}var _j=new vt(we);function wj(){return _j}function m_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function gA(t){return{integerValue:""+t}}function Ej(t,e){return rj(e)?gA(e):m_(t,e)}var rs=class{constructor(){this._=void 0}};function Ij(t,e,n){return t instanceof is?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&l_(o)&&(o=d_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Vi?yA(t,e):t instanceof Ui?vA(t,e):function(i,o){let s=mA(i,o),a=OT(s)+OT(i.Pe);return By(s)&&By(i.Pe)?gA(a):m_(i.serializer,a)}(t,e)}function bj(t,e,n){return t instanceof Vi?yA(t,e):t instanceof Ui?vA(t,e):n}function mA(t,e){return t instanceof os?function(r){return By(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var is=class extends rs{},Vi=class extends rs{constructor(e){super(),this.elements=e}};function yA(t,e){let n=_A(e);for(let r of t.elements)n.some(i=>Fn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ui=class extends rs{constructor(e){super(),this.elements=e}};function vA(t,e){let n=_A(e);for(let r of t.elements)n=n.filter(i=>!Fn(i,r));return{arrayValue:{values:n}}}var os=class extends rs{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function OT(t){return Fe(t.integerValue||t.doubleValue)}function _A(t){return h_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Cj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Vi&&i instanceof Vi||r instanceof Ui&&i instanceof Ui?Jo(r.elements,i.elements,Fn):r instanceof os&&i instanceof os?Fn(r.Pe,i.Pe):r instanceof is&&i instanceof is}(t.transform,e.transform)}var Xy=class{constructor(e,n){this.version=e,this.transformResults=n}},Oi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Md(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ss=class{};function wA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vd(t.key,Oi.none()):new ji(t.key,t.data,Oi.none());{let n=t.data,r=ln.empty(),i=new vt(Lt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new dr(t.key,r,new Mn(i.toArray()),Oi.none())}}function Dj(t,e,n){t instanceof ji?function(i,o,s){let a=i.value.clone(),u=kT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof dr?function(i,o,s){if(!Md(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=kT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(EA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function tc(t,e,n,r){return t instanceof ji?function(o,s,a,u){if(!Md(o.precondition,s))return a;let l=o.value.clone(),h=LT(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof dr?function(o,s,a,u){if(!Md(o.precondition,s))return a;let l=LT(o.fieldTransforms,u,s),h=s.data;return h.setAll(EA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Md(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Tj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=mA(r.transform,i||null);o!=null&&(n===null&&(n=ln.empty()),n.set(r.field,o))}return n||null}function FT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jo(r,i,(o,s)=>Cj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ji=class extends ss{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dr=class extends ss{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function EA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function kT(t,e,n){let r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,bj(s,a,n[i]))}return r}function LT(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,Ij(o,s,e))}return r}var Vd=class extends ss{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ev=class extends ss{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var tv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Dj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=tc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=tc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=pA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=wA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(n,r)=>FT(n,r))&&Jo(this.baseMutations,e.baseMutations,(n,r)=>FT(n,r))}},nv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return yj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var rv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var iv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Qe,ve;function Aj(t){switch(t){default:return J();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function IA(t){if(t===void 0)return cr("GRPC error has no .code"),N.UNKNOWN;switch(t){case Qe.OK:return N.OK;case Qe.CANCELLED:return N.CANCELLED;case Qe.UNKNOWN:return N.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return N.INTERNAL;case Qe.UNAVAILABLE:return N.UNAVAILABLE;case Qe.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Qe.NOT_FOUND:return N.NOT_FOUND;case Qe.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Qe.ABORTED:return N.ABORTED;case Qe.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Qe.DATA_LOSS:return N.DATA_LOSS;default:return J()}}(ve=Qe||(Qe={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var VT=null;function Sj(){return new TextEncoder}var Rj=new $r([4294967295,4294967295],0);function UT(t){let e=Sj().encode(t),n=new wy;return n.update(e),new Uint8Array(n.digest())}function jT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $r([n,r],0),new $r([i,o],0)]}var ov=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pi(`Invalid padding: ${n}`);if(r<0)throw new Pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$r.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($r.fromNumber(r)));return i.compare(Rj)===1&&(i=new $r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=UT(e),[r,i]=jT(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=UT(e),[r,i]=jT(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ud=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,oc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ie.min(),i,new je(we),lr(),ge())}},oc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ge(),ge(),ge())}};var Qo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},jd=class{constructor(e,n){this.targetId=e,this.me=n}},Bd=class{constructor(e,n,r=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},$d=class{constructor(){this.fe=0,this.ge=$T(),this.pe=_t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new oc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=$T()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},sv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=lr(),this.qe=BT(),this.Qe=new je(we)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(Jy(o))if(r===0){let s=new G(o.path);this.Ue(n,s,dn.newNoDocument(s,ie.min()))}else De(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}VT?.et(function(h,p,m,E,A){var M,R,k,B,V,q;let Se={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(Se.bloomFilter={applied:A===0,hashCount:(M=Z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(B=(k=(R=Z?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&B!==void 0?B:0,padding:(q=(V=Z?.bits)===null||V===void 0?void 0:V.padding)!==null&&q!==void 0?q:0,mightContain:b=>{var y;return(y=E?.mightContain(b))!==null&&y!==void 0&&y}}),Se}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Hr(r).toUint8Array()}catch(u){if(u instanceof Fd)return Yo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ov(s,i,o)}catch(u){return Yo(u instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Jy(a.target)){let u=new G(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,dn.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ge();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ud(e,n,this.Qe,this.ke,r);return this.ke=lr(),this.qe=BT(),this.Qe=new je(we),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $d,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new vt(we),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $d),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function BT(){return new je(G.comparator)}function $T(){return new je(G.comparator)}var Mj={asc:"ASCENDING",desc:"DESCENDING"},xj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nj={and:"AND",or:"OR"},av=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function cv(t,e){return t.useProto3Json||sh(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pj(t,e){return Hd(t,e.toTimestamp())}function On(t){return De(!!t),ie.fromTimestamp(function(n){let r=ur(n);return new lt(r.seconds,r.nanos)}(t))}function y_(t,e){return uv(t,e).canonicalString()}function uv(t,e){let n=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CA(t){let e=Je.fromString(t);return De(RA(e)),e}function lv(t,e){return y_(t.databaseId,e.path)}function Ty(t,e){let n=CA(e);if(n.get(1)!==t.databaseId.projectId)throw new H(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(TA(n))}function DA(t,e){return y_(t.databaseId,e)}function Oj(t){let e=CA(t);return e.length===4?Je.emptyPath():TA(e)}function dv(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TA(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HT(t,e,n){return{name:lv(t,e),fields:n.value.mapValue.fields}}function Fj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(De(h===void 0||typeof h=="string"),_t.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),_t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?N.UNKNOWN:IA(l.code);return new H(h,l.message||"")}(s);n=new Bd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ty(t,r.document.name),o=On(r.document.updateTime),s=r.document.createTime?On(r.document.createTime):ie.min(),a=new ln({mapValue:{fields:r.document.fields}}),u=dn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Qo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ty(t,r.document),o=r.readTime?On(r.readTime):ie.min(),s=dn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Qo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ty(t,r.document),o=r.removedTargetIds||[];n=new Qo([],o,i,null)}else{if(!("filter"in e))return J();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new iv(i,o),a=r.targetId;n=new jd(a,s)}}return n}function kj(t,e){let n;if(e instanceof ji)n={update:HT(t,e.key,e.value)};else if(e instanceof Vd)n={delete:lv(t,e.key)};else if(e instanceof dr)n={update:HT(t,e.key,e.data),updateMask:zj(e.fieldMask)};else{if(!(e instanceof ev))return J();n={verify:lv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof is)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ui)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof os)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Pj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:J()}(t,e.precondition)),n}function Lj(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?On(i.updateTime):On(o);return s.isEqual(ie.min())&&(s=On(o)),new Xy(s,i.transformResults||[])}(n,e))):[]}function Vj(t,e){return{documents:[DA(t,e.path)]}}function Uj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DA(t,i);let o=function(l){if(l.length!==0)return SA(kn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Go(m.field),direction:$j(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=cv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function jj(t){let e=Oj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){De(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let m=AA(p);return m instanceof kn&&sA(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(A){return new ts(Wo(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,sh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,E=p.values||[];return new es(E,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,E=p.values||[];return new es(E,m)}(n.endAt)),dj(e,i,s,o,a,"F",u,l)}function Bj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Wo(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wo(n.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Wo(n.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Wo(n.unaryFilter.field);return nt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return nt.create(Wo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>AA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function $j(t){return Mj[t]}function Hj(t){return xj[t]}function qj(t){return Nj[t]}function Go(t){return{fieldPath:t.canonicalString()}}function Wo(t){return Lt.fromServerFormat(t.fieldPath)}function SA(t){return t instanceof nt?function(n){if(n.op==="=="){if(RT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(ST(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(RT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(ST(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:Hj(n.op),value:n.value}}}(t):t instanceof kn?function(n){let r=n.getFilters().map(i=>SA(i));return r.length===1?r[0]:{compositeFilter:{op:qj(n.op),filters:r}}}(t):J()}function zj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var sc=class t{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=_t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var hv=class{constructor(e){this.ct=e}};function Gj(t){let e=jj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zy(e,e.limit,"L"):e}var qd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),nc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ur(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Hr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?rA(e)?this.dt(n,Number.MAX_SAFE_INTEGER):nA(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):J()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Fe(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),G.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};qd.vt=new qd;var fv=class{constructor(){this.un=new pv}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(ki.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},pv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new vt(Je.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vt(Je.comparator)).toArray()}};var cW=new Uint8Array(0);var Rn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(41943040,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);var ac=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var gv=class{constructor(){this.changes=new qr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var mv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var yv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&tc(r.mutation,i,Mn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){let i=Ni();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ja();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ni();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=lr(),s=ec(),a=function(){return ec()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof dr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),tc(h.mutation,l,h.mutation.getFieldMask(),lt.now())):s.set(l.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new mv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ec(),i=new je((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Mn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=pA();h.forEach(m=>{if(!o.has(m)){let E=wA(n.get(m),r.get(m));E!==null&&p.set(m,E),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(Ni()),a=-1,u=o;return s.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ge())).next(h=>({batchId:a,changes:fA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Ja();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ja();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,u=>{let l=function(p,m){return new ns(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,dn.newInvalidDocument(h)))});let a=Ja();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&tc(h.mutation,l,Mn.empty(),lt.now()),ch(n,l)&&(a=a.insert(u,l))}),a})}};var vv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Gj(i.bundledQuery),readTime:On(i.readTime)}}(n)),O.resolve()}};var _v=class{constructor(){this.overlays=new je(G.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ni();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=Ni(),o=n.length+1,s=new G(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new je((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ni(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ni(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new rv(n,r));let o=this.Ir.get(n);o===void 0&&(o=ge(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var wv=class{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var cc=class{constructor(){this.Tr=new vt(Ye.Er),this.dr=new vt(Ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ye(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ye(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new G(new Je([])),r=new Ye(n,e),i=new Ye(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new G(new Je([])),r=new Ye(n,e),i=new Ye(n,e+1),o=ge();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ye(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ye=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||we(e.wr,n.wr)}static Ar(e,n){return we(e.wr,n.wr)||G.comparator(e.key,n.key)}};var Ev=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new vt(Ye.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new tv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ye(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ye(n,0),i=new Ye(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(we);return n.forEach(i=>{let o=new Ye(i,0),s=new Ye(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new Ye(new G(o),0),a=new vt(we);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),O.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{let o=new Ye(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ye(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Iv=class{constructor(e){this.Mr=e,this.docs=function(){return new je(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():dn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=lr(),s=n.path,a=new G(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ej(X2(h),r)<=0||(i.has(h.key)||ch(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){J()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bv(this)}getSize(e){return O.resolve(this.size)}},bv=class extends gv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Cv=class{constructor(e){this.persistence=e,this.Nr=new qr(n=>f_(n),p_),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cc,this.targetCount=0,this.kr=ac.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new ac(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}};var Dv=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new eA(0),this.Kr=!1,this.Kr=!0,this.$r=new wv,this.referenceDelegate=e(this),this.Ur=new Cv(this),this.indexManager=new fv,this.remoteDocumentCache=function(i){return new Iv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new hv(n),this.Gr=new vv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _v,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Ev(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);let i=new Tv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Tv=class extends Vy{constructor(e){super(),this.currentSequenceNumber=e}},Av=class t{constructor(e){this.persistence=e,this.Jr=new cc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Sv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ge(),i=ge();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Rv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Mv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return uD()?8:nj(rt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Rv;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ya()<=pe.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Ya()<=pe.DEBUG&&U("QueryEngine","Query:",zo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ya()<=pe.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):O.resolve())}Yi(e,n){if(PT(n))return O.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Zy(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,Zy(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return PT(n)||i.isEqual(ie.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?O.resolve(null):(Ya()<=pe.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zo(n)),this.rs(e,s,n,Z2(i,-1)).next(a=>a))})}ts(e,n){let r=new vt(dA(e));return n.forEach((i,o)=>{ch(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Ya()<=pe.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",zo(n)),this.Ji.getDocumentsMatchingQuery(e,n,ki.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var xv=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new je(we),this._s=new qr(o=>f_(o),p_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function Wj(t,e,n,r){return new xv(t,e,n,r)}function MA(t,e){return v(this,null,function*(){let n=te(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ge();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Kj(t,e){let n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),E=O.resolve();return m.forEach(A=>{E=E.next(()=>h.getEntry(u,A)).next(M=>{let R=l.docVersions.get(A);De(R!==null),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xA(t){let e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Qj(t,e){let n=te(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let E=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(_t.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(p,E),function(M,R,k){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,E,h)&&a.push(n.Ur.updateTargetData(o,E))});let u=lr(),l=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Yj(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ie.min())){let h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function Yj(t,e,n){let r=ge(),i=ge();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=lr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function Jj(t,e){let n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zj(t,e){let n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new sc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Nv(t,e,n){return v(this,null,function*(){let r=te(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!vc(s))throw s;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function qT(t,e,n){let r=te(t),i=ie.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=te(u),m=p._s.get(h);return m!==void 0?O.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:ge())).next(a=>(Xj(r,pj(e),a),{documents:a,Ts:o})))}function Xj(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}var zd=class{constructor(){this.activeTargetIds=wj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Pv=class{constructor(){this.so=new zd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ov=class{_o(e){}shutdown(){}};var Gd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sd=null;function Ay(){return Sd===null?Sd=function(){return 268435456+Math.round(2147483648*Math.random())}():Sd++,"0x"+Sd.toString(16)}var eB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Fv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",kv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=Ay(),u=this.xo(n,r.toUriEncodedString());U("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(h=>(U("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Yo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=eB[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=Ay();return new Promise((s,a)=>{let u=new Ey;u.setWithCredentials(!0),u.listenOnce(Iy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qa.NO_ERROR:let h=u.getResponseJson();U(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Qa.TIMEOUT:U(yt,`RPC '${e}' ${o} timed out`),a(new H(N.DEADLINE_EXCEEDED,"Request time out"));break;case Qa.HTTP_ERROR:let p=u.getStatus();if(U(yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let E=m?.error;if(E&&E.status&&E.message){let A=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(E.status);a(new H(A,E.message))}else a(new H(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new H(N.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{U(yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);U(yt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Ay(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Dy(),a=Cy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");U(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,E=!1,A=new Fv({Io:R=>{E?U(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(U(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),U(yt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),M=(R,k,B)=>{R.listen(k,V=>{try{B(V)}catch(q){setTimeout(()=>{throw q},0)}})};return M(p,qo.EventType.OPEN,()=>{E||(U(yt,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),M(p,qo.EventType.CLOSE,()=>{E||(E=!0,U(yt,`RPC '${e}' stream ${i} transport closed`),A.So())}),M(p,qo.EventType.ERROR,R=>{E||(E=!0,Yo(yt,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new H(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,qo.EventType.MESSAGE,R=>{var k;if(!E){let B=R.data[0];De(!!B);let V=B,q=V.error||((k=V[0])===null||k===void 0?void 0:k.error);if(q){U(yt,`RPC '${e}' stream ${i} received error:`,q);let Se=q.status,Z=function(_){let I=Qe[_];if(I!==void 0)return IA(I)}(Se),b=q.message;Z===void 0&&(Z=N.INTERNAL,b="Unknown error status: "+Se+" with message "+q.message),E=!0,A.So(new H(Z,b)),p.close()}else U(yt,`RPC '${e}' stream ${i} received:`,B),A.bo(B)}}),M(a,by.STAT_EVENT,R=>{R.stat===Td.PROXY?U(yt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Td.NOPROXY&&U(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function Sy(){return typeof document<"u"?document:null}function uh(t){return new av(t,!0)}var Wd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Kd=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new H(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Lv=class extends Kd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=Fj(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?On(s.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=dv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Jy(u)?{documents:Vj(o,u)}:{query:Uj(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=bA(o,s.resumeToken);let l=cv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Hd(o,s.snapshotVersion.toTimestamp());let l=cv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Bj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=dv(this.serializer),n.removeTarget=e,this.a_(n)}},Vv=class extends Kd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=Lj(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=dv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>kj(this.serializer,r))};this.a_(n)}};var Uv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,uv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(N.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,uv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},jv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(n),this.D_=!1):U("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Bv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Bi(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=te(u);l.L_.add(4),yield _c(l),l.q_.set("Unknown"),l.L_.delete(4),yield lh(l)})}(this))}))}),this.q_=new jv(r,i)}};function lh(t){return v(this,null,function*(){if(Bi(t))for(let e of t.B_)yield e(!0)})}function _c(t){return v(this,null,function*(){for(let e of t.B_)yield e(!1)})}function NA(t,e){let n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),E_(n)?w_(n):ls(n).r_()&&__(n,e))}function v_(t,e){let n=te(t),r=ls(n);n.N_.delete(e),r.r_()&&PA(n,e),n.N_.size===0&&(r.r_()?r.o_():Bi(n)&&n.q_.set("Unknown"))}function __(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ls(t).A_(e)}function PA(t,e){t.Q_.xe(e),ls(t).R_(e)}function w_(t){t.Q_=new sv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ls(t).start(),t.q_.v_()}function E_(t){return Bi(t)&&!ls(t).n_()&&t.N_.size>0}function Bi(t){return te(t).L_.size===0}function OA(t){t.Q_=void 0}function tB(t){return v(this,null,function*(){t.q_.set("Online")})}function nB(t){return v(this,null,function*(){t.N_.forEach((e,n)=>{__(t,e)})})}function rB(t,e){return v(this,null,function*(){OA(t),E_(t)?(t.q_.M_(e),w_(t)):t.q_.set("Unknown")})}function iB(t,e,n){return v(this,null,function*(){if(t.q_.set("Online"),e instanceof Bd&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qd(t,r)}else if(e instanceof Qo?t.Q_.Ke(e):e instanceof jd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{let r=yield xA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(_t.EMPTY_BYTE_STRING,h.snapshotVersion)),PA(o,u);let p=new sc(h.target,u,l,h.sequenceNumber);__(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield Qd(t,r)}})}function Qd(t,e,n){return v(this,null,function*(){if(!vc(e))throw e;t.L_.add(1),yield _c(t),t.q_.set("Offline"),n||(n=()=>xA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield lh(t)}))})}function FA(t,e){return e().catch(n=>Qd(t,n,e))}function dh(t){return v(this,null,function*(){let e=te(t),n=zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;oB(e);)try{let i=yield Jj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,sB(e,i)}catch(i){yield Qd(e,i)}kA(e)&&LA(e)})}function oB(t){return Bi(t)&&t.O_.length<10}function sB(t,e){t.O_.push(e);let n=zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function kA(t){return Bi(t)&&!zr(t).n_()&&t.O_.length>0}function LA(t){zr(t).start()}function aB(t){return v(this,null,function*(){zr(t).p_()})}function cB(t){return v(this,null,function*(){let e=zr(t);for(let n of t.O_)e.m_(n.mutations)})}function uB(t,e,n){return v(this,null,function*(){let r=t.O_.shift(),i=nv.from(r,e,n);yield FA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield dh(t)})}function lB(t,e){return v(this,null,function*(){e&&zr(t).V_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return Aj(s)&&s!==N.ABORTED}(i.code)){let o=r.O_.shift();zr(r).s_(),yield FA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield dh(r)}})}(t,e)),kA(t)&&LA(t)})}function zT(t,e){return v(this,null,function*(){let n=te(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=Bi(n);n.L_.add(3),yield _c(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield lh(n)})}function dB(t,e){return v(this,null,function*(){let n=te(t);e?(n.L_.delete(2),yield lh(n)):e||(n.L_.add(2),yield _c(n),n.q_.set("Unknown"))})}function ls(t){return t.K_||(t.K_=function(n,r,i){let o=te(n);return o.w_(),new Lv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:tB.bind(null,t),Ro:nB.bind(null,t),mo:rB.bind(null,t),d_:iB.bind(null,t)}),t.B_.push(e=>v(this,null,function*(){e?(t.K_.s_(),E_(t)?w_(t):t.q_.set("Unknown")):(yield t.K_.stop(),OA(t))}))),t.K_}function zr(t){return t.U_||(t.U_=function(n,r,i){let o=te(n);return o.w_(),new Vv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aB.bind(null,t),mo:lB.bind(null,t),f_:cB.bind(null,t),g_:uB.bind(null,t)}),t.B_.push(e=>v(this,null,function*(){e?(t.U_.s_(),yield dh(t)):(yield t.U_.stop(),t.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var $v=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function I_(t,e){if(cr("AsyncQueue",`${e}: ${t}`),vc(t))return new H(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Yd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Ja(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Jd=class{constructor(){this.W_=new je(G.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},as=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Yd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Hv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},qv=class{constructor(){this.queries=GT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=te(n),o=i.queries;i.queries=GT(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new H(N.ABORTED,"Firestore shutting down"))}};function GT(){return new qr(t=>lA(t),ah)}function hB(t,e){return v(this,null,function*(){let n=te(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Hv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=I_(s,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&b_(n)})}function fB(t,e){return v(this,null,function*(){let n=te(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function pB(t,e){let n=te(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&b_(n)}function gB(t,e,n){let r=te(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function b_(t){t.Y_.forEach(e=>{e.next()})}var zv,WT;(WT=zv||(zv={})).ea="default",WT.Cache="cache";var Gv=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new as(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=as.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zv.Cache}};var Zd=class{constructor(e){this.key=e}},Xd=class{constructor(e){this.key=e}},Wv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=dA(e),this.Ra=new Yd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Jd,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),E=ch(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),M=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),R=!1;m&&E?m.data.isEqual(E.data)?A!==M&&(r.track({type:3,doc:E}),R=!0):this.ga(m,E)||(r.track({type:2,doc:E}),R=!0,(u&&this.Aa(E,u)>0||l&&this.Aa(E,l)<0)&&(a=!0)):!m&&E?(r.track({type:0,doc:E}),R=!0):m&&!E&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(E?(s=s.add(E),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(E,A){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return M(E)-M(A)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new as(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Jd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Xd(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Zd(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return as.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Kv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Qv=class{constructor(e){this.key=e,this.va=!1}},Yv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new qr(a=>lA(a),ah),this.Ma=new Map,this.xa=new Set,this.Oa=new je(G.comparator),this.Na=new Map,this.La=new cc,this.Ba={},this.ka=new Map,this.qa=ac.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function mB(t,e,n=!0){return v(this,null,function*(){let r=HA(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield VA(r,e,n,!0),i})}function yB(t,e){return v(this,null,function*(){let n=HA(t);yield VA(n,e,!0,!1)})}function VA(t,e,n,r){return v(this,null,function*(){let i=yield Zj(t.localStore,Pn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield vB(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&NA(t.remoteStore,i),a})}function vB(t,e,n,r,i){return v(this,null,function*(){t.Ka=(p,m,E)=>function(M,R,k,B){return v(this,null,function*(){let V=R.view.ma(k);V.ns&&(V=yield qT(M.localStore,R.query,!1).then(({documents:b})=>R.view.ma(b,V)));let q=B&&B.targetChanges.get(R.targetId),Se=B&&B.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(V,M.isPrimaryClient,q,Se);return QT(M,R.targetId,Z.wa),Z.snapshot})}(t,p,m,E);let o=yield qT(t.localStore,e,!0),s=new Wv(e,o.Ts),a=s.ma(o.documents),u=oc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);QT(t,n,l.wa);let h=new Kv(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function _B(t,e,n){return v(this,null,function*(){let r=te(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ah(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Nv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&v_(r.remoteStore,i.targetId),Jv(r,i.targetId)}).catch(yc))):(Jv(r,i.targetId),yield Nv(r.localStore,i.targetId,!0))})}function wB(t,e){return v(this,null,function*(){let n=te(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),v_(n.remoteStore,r.targetId))})}function EB(t,e,n){return v(this,null,function*(){let r=SB(t);try{let i=yield function(s,a){let u=te(s),l=lt.now(),h=a.reduce((E,A)=>E.add(A.key),ge()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let A=lr(),M=ge();return u.cs.getEntries(E,h).next(R=>{A=R,A.forEach((k,B)=>{B.isValidDocument()||(M=M.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,A)).next(R=>{p=R;let k=[];for(let B of a){let V=Tj(B,p.get(B.key).overlayedDocument);V!=null&&k.push(new dr(B.key,V,iA(V.value.mapValue),Oi.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(E,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:fA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new je(we)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield wc(r,i.changes),yield dh(r.remoteStore)}catch(i){let o=I_(i,"Failed to persist write");n.reject(o)}})}function UA(t,e){return v(this,null,function*(){let n=te(t);try{let r=yield Qj(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?De(s.va):i.removedDocuments.size>0&&(De(s.va),s.va=!1))}),yield wc(n,r,e)}catch(r){yield yc(r)}})}function KT(t,e,n){let r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=te(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&b_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IB(t,e,n){return v(this,null,function*(){let r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new je(G.comparator);s=s.insert(o,dn.newNoDocument(o,ie.min()));let a=ge().add(o),u=new Ud(ie.min(),new Map,new je(we),s,a);yield UA(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),C_(r)}else yield Nv(r.localStore,e,!1).then(()=>Jv(r,e,n)).catch(yc)})}function bB(t,e){return v(this,null,function*(){let n=te(t),r=e.batch.batchId;try{let i=yield Kj(n.localStore,e);BA(n,r,null),jA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield wc(n,i)}catch(i){yield yc(i)}})}function CB(t,e,n){return v(this,null,function*(){let r=te(t);try{let i=yield function(s,a){let u=te(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(De(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);BA(r,e,n),jA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield wc(r,i)}catch(i){yield yc(i)}})}function jA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function BA(t,e,n){let r=te(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Jv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$A(t,r)})}function $A(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(v_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),C_(t))}function QT(t,e,n){for(let r of n)r instanceof Zd?(t.La.addReference(r.key,e),DB(t,r)):r instanceof Xd?(U("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$A(t,r.key)):J()}function DB(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(U("SyncEngine","New document in limbo: "+n),t.xa.add(r),C_(t))}function C_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new G(Je.fromString(e)),r=t.qa.next();t.Na.set(r,new Qv(n)),t.Oa=t.Oa.insert(n,r),NA(t.remoteStore,new sc(Pn(g_(n.path)),r,"TargetPurposeLimboResolution",eA.oe))}}function wc(t,e,n){return v(this,null,function*(){let r=te(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Sv.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return v(this,null,function*(){let h=te(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.$i,E=>h.persistence.referenceDelegate.addReference(p,m.targetId,E)).next(()=>O.forEach(m.Ui,E=>h.persistence.referenceDelegate.removeReference(p,m.targetId,E)))))}catch(p){if(!vc(p))throw p;U("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let E=h.os.get(m),A=E.snapshotVersion,M=E.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function TB(t,e){return v(this,null,function*(){let n=te(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield MA(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new H(N.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wc(n,r.hs)}})}function AB(t,e){let n=te(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function HA(t){let e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IB.bind(null,e),e.Ca.d_=pB.bind(null,e.eventManager),e.Ca.$a=gB.bind(null,e.eventManager),e}function SB(t){let e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CB.bind(null,e),e}var YT=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=uh(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return Wj(this.persistence,new Mv,n.initialUser,this.serializer)}Ga(n){return new Dv(Av.Zr,this.serializer)}Wa(n){return new Pv}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var RB=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>KT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TB.bind(null,this.syncEngine),yield dB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new qv}()}createDatastore(n){let r=uh(n.databaseInfo.databaseId),i=function(s){return new kv(s)}(n.databaseInfo);return function(s,a,u,l){return new Uv(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new Bv(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>KT(this.syncEngine,r,0),function(){return Gd.D()?new Gd:new Ov}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let m=new Yv(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield function(o){return v(this,null,function*(){let s=te(o);U("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield _c(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Zv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Xv=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=it.UNAUTHENTICATED,this.clientId=Nd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){U("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=I_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ry(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield MA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function JT(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield MB(t);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zT(e.remoteStore,i)),t._onlineComponents=e})}function MB(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ry(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),yield Ry(t,new YT)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield Ry(t,new YT);return t._offlineComponents})}function qA(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield JT(t,t._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield JT(t,new RB))),t._onlineComponents})}function xB(t){return qA(t).then(e=>e.syncEngine)}function NB(t){return v(this,null,function*(){let e=yield qA(t),n=e.eventManager;return n.onListen=mB.bind(null,e.syncEngine),n.onUnlisten=_B.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wB.bind(null,e.syncEngine),n})}function PB(t,e,n={}){let r=new xn;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,u,l){let h=new Zv({next:m=>{h.Za(),s.enqueueAndForget(()=>fB(o,p));let E=m.docs.has(a);!E&&m.fromCache?l.reject(new H(N.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&m.fromCache&&u&&u.source==="server"?l.reject(new H(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Gv(g_(a.path),h,{includeMetadataChanges:!0,_a:!0});return hB(o,p)}(yield NB(t),t.asyncQueue,e,n,r)})),r.promise}function zA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ZT=new Map;function OB(t,e,n){if(!n)throw new H(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FB(t,e,n,r){if(e===!0&&r===!0)throw new H(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XT(t){if(!G.isDocumentKey(t))throw new H(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function uc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=D_(t);throw new H(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var eh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new My;switch(r.type){case"firstParty":return new Oy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ZT.get(n);r&&(U("ComponentProvider","Removing Datastore"),ZT.delete(n),r.terminate())}(this),Promise.resolve()}};function GA(t,e,n,r={}){var i;let o=(t=uc(t,lc))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=it.MOCK_USER;else{a=Jl(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new H(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new it(l)}t._authCredentials=new xy(new xd(a,u))}}var e_=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Yt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},dc=class t extends e_{constructor(e,n,r){super(e,n,g_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function $i(t,e,...n){if(t=He(t),arguments.length===1&&(e=Nd.newId()),OB("doc","path",e),t instanceof lc){let r=Je.fromString(e,...n);return XT(r),new Yt(t,null,new G(r))}{if(!(t instanceof Yt||t instanceof dc))throw new H(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Je.fromString(e,...n));return XT(r),new Yt(t.firestore,t instanceof dc?t.converter:null,new G(r))}}var th=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Wd(this,"async_queue_retry"),this.Vu=()=>{let r=Sy();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Sy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Sy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new xn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vc(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw cr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=$v.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&J()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var hc=class extends lc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new th,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new th(e),this._firestoreClient=void 0,yield e}})}};function ds(t,e){let n=typeof t=="object"?t:Ur(),r=typeof t=="string"?t:e||"(default)",i=Ti(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Yl("firestore");o&&GA(i,...o)}return i}function WA(t){if(t._terminated)throw new H(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kB(t),t._firestoreClient}function kB(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new Uy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,zA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Xv(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var fc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(_t.fromBase64String(e))}catch(n){throw new H(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var nh=class{constructor(e){this._methodName=e}};var gc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}};var mc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var LB=/^__.*__$/,t_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ji(e,this.data,n,this.fieldTransforms)}};function KA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var n_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return rh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(KA(this.Cu)&&LB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},r_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uh(e)}Qu(e,n,r,i=!1){return new n_({Cu:e,methodName:n,qu:r,path:Lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function VB(t){let e=t._freezeSettings(),n=uh(t._databaseId);return new r_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UB(t,e,n,r,i,o={}){let s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);ZA("Data must be an object, but it was:",s,r);let a=YA(r,s),u,l;if(o.merge)u=new Mn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=jB(e,p,n);if(!s.contains(m))throw new H(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);$B(h,m)||h.push(m)}u=new Mn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new t_(new ln(a),u,l)}function QA(t,e){if(JA(t=He(t)))return ZA("Unsupported field value:",e,t),YA(t,e);if(t instanceof nh)return function(r,i){if(!KA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=QA(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ej(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=lt.fromDate(r);return{timestampValue:Hd(i.serializer,o)}}if(r instanceof lt){let o=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(i.serializer,o)}}if(r instanceof gc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fc)return{bytesValue:bA(i.serializer,r._byteString)};if(r instanceof Yt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:y_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return m_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${D_(r)}`)}(t,e)}function YA(t,e){let n={};return tA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(t,(r,i)=>{let o=QA(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function JA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof gc||t instanceof fc||t instanceof Yt||t instanceof nh||t instanceof mc)}function ZA(t,e,n){if(!JA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=D_(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function jB(t,e,n){if((e=He(e))instanceof pc)return e._internalPath;if(typeof e=="string")return XA(t,e);throw rh("Field path arguments must be of type string or ",t,!1,void 0,n)}var BB=new RegExp("[~\\*/\\[\\]]");function XA(t,e,n){if(e.search(BB)>=0)throw rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pc(...e.split("."))._internalPath}catch{throw rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new H(N.INVALID_ARGUMENT,a+t+u)}function $B(t,e){return t.some(n=>n.isEqual(e))}var ih=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new i_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(eS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},i_=class extends ih{data(){return super.data()}};function eS(t,e){return typeof e=="string"?XA(t,e):e instanceof pc?e._internalPath:e._delegate._internalPath}var o_=class{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return us(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new mc(o)}convertGeoPoint(e){return new gc(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=d_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){let n=ur(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Je.fromString(e);De(RA(r));let i=new kd(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||cr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function HB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var s_=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},oh=class extends ih{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new a_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(eS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},a_=class extends oh{data(e={}){return super.data(e)}};function Ec(t){t=uc(t,Yt);let e=uc(t.firestore,hc);return PB(WA(e),t._key).then(n=>zB(e,t,n))}var c_=class extends o_{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}};function T_(t,e,n){t=uc(t,Yt);let r=uc(t.firestore,hc),i=HB(t.converter,e,n);return qB(r,[UB(VB(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Oi.none())])}function qB(t,e){return function(r,i){let o=new xn;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return EB(yield xB(r),i,o)})),o.promise}(WA(t),e)}function zB(t,e,n){let r=n.docs.get(e._key),i=new c_(t);return new oh(t,i,e._key,r,new s_(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){cs=i})(Tn),Dn(new Mt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new hc(new Ny(r.getProvider("auth-internal")),new ky(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ue(CT,"4.7.3",e),Ue(CT,"4.7.3","esm2017")})();var A_={apiKey:"AIzaSyAN3xGlyc729QZpxcNoITDpE5Oweb-85tQ",authDomain:"tpclinica-bartel.firebaseapp.com",projectId:"tpclinica-bartel",storageBucket:"tpclinica-bartel.appspot.com",messagingSenderId:"775881613005",appId:"1:775881613005:web:3b1c96b34693b512a59384"},mW=Ai(A_);function GB(t,e){if(t&1&&(x(0,"div",24),re(1),P()),t&2){let n=ue();fe(),mi(n.errorMessage)}}var tS=(()=>{let e=class e{constructor(r){this.router=r,this.loginStatusChange=new Ve,this.username="",this.password="",this.errorMessage="",this.app=Ai(A_),this.auth=un(this.app),this.db=ds(this.app)}fillEspecialista(){this.username="especialista@correo.com",this.password="especialista123"}fillPaciente(){this.username="paciente@correo.com",this.password="paciente123"}fillAdmin(){this.username="admin@correo.com",this.password="admin123"}onSubmit(){return v(this,null,function*(){try{let i=(yield wd(this.auth,this.username,this.password)).user,o=$i(this.db,"especialistas",i.uid),s=$i(this.db,"pacientes",i.uid),a=$i(this.db,"administradores",i.uid),[u,l,h]=yield Promise.all([Ec(o),Ec(s),Ec(a)]);if(u.exists()){let p=u.data();this.router.navigate(["/misTurnos"]),this.loginStatusChange.emit(!0)}else if(l.exists()){let p=l.data();this.router.navigate(["/misTurnos"]),this.loginStatusChange.emit(!0)}else if(h.exists()){let p=h.data();this.router.navigate(["/usuarios"]),this.loginStatusChange.emit(!0)}else this.errorMessage="No se encontr\xF3 el usuario en la base de datos.",this.loginStatusChange.emit(!1)}catch(r){switch(r.code){case"auth/user-not-found":case"auth/wrong-password":this.errorMessage="Correo o contrase\xF1a incorrecta.";break;case"auth/invalid-email":this.errorMessage="Formato de correo inv\xE1lido.";break;case"auth/invalid-credential":this.errorMessage="Usuario inexistente";break;default:this.errorMessage="Error al iniciar sesi\xF3n. Intenta nuevamente."}console.error("Error en login:",r),this.loginStatusChange.emit(!1)}})}};e.\u0275fac=function(i){return new(i||e)($(Qt))},e.\u0275cmp=Bt({type:e,selectors:[["app-login"]],outputs:{loginStatusChange:"loginStatusChange"},standalone:!0,features:[Gt],decls:34,vars:3,consts:[[1,"login-container"],[1,"titulo"],[3,"submit"],[1,"input-container"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Login%2FCorreo.png?alt=media&token=19f459bf-e240-4ffb-9768-9364b4a948ec","alt","user-icon",1,"input-icon"],["type","text","name","usuario","placeholder","Correo electr\xF3nico","required","",3,"ngModelChange","ngModel"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Login%2FCandadoW.png?alt=media&token=2f6f1f2f-4fb8-4c41-91d5-60a9ff3fa99f","alt","password-icon",1,"input-icon"],["type","password","name","correo","placeholder","Contrase\xF1a","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],[1,"buttons-container"],["type","submit"],[1,"acceso-rapido"],["for","acceso-rapido",1,"acceso-rapido-label"],[1,"acceso-rapido-row"],[1,"acceso-rapido-btn","paciente",3,"click"],["src","ruta_logo_paciente1.png","alt","Paciente 1",1,"logo"],["src","ruta_logo_paciente2.png","alt","Paciente 2",1,"logo"],["src","ruta_logo_paciente3.png","alt","Paciente 3",1,"logo"],[1,"acceso-rapido-btn","especialista",3,"click"],["src","ruta_logo_especialista1.png","alt","Especialista 1",1,"logo"],["src","ruta_logo_especialista2.png","alt","Especialista 2",1,"logo"],[1,"acceso-rapido-btn","admin",3,"click"],["src","ruta_logo_admin.png","alt","Admin",1,"logo"],["href","/registro",1,"register-link"],[1,"error-message"]],template:function(i,o){i&1&&(x(0,"body")(1,"div",0)(2,"h2",1),re(3,"INICIAR SESION"),P(),x(4,"form",2),Ie("submit",function(){return o.onSubmit()}),x(5,"div",3),Y(6,"img",4),x(7,"input",5),Ke("ngModelChange",function(a){return tt(o.username,a)||(o.username=a),a}),P()(),x(8,"div",3),Y(9,"img",6),x(10,"input",7),Ke("ngModelChange",function(a){return tt(o.password,a)||(o.password=a),a}),P()(),zt(11,GB,2,1,"div",8),x(12,"div",9)(13,"button",10),re(14,"Iniciar Sesi\xF3n"),P()()(),x(15,"div",11)(16,"label",12),re(17,"Accesos R\xE1pidos"),P(),x(18,"div",13)(19,"button",14),Ie("click",function(){return o.fillPaciente()}),Y(20,"img",15),P(),x(21,"button",14),Ie("click",function(){return o.fillPaciente()}),Y(22,"img",16),P(),x(23,"button",14),Ie("click",function(){return o.fillPaciente()}),Y(24,"img",17),P()(),x(25,"div",13)(26,"button",18),Ie("click",function(){return o.fillEspecialista()}),Y(27,"img",19),P(),x(28,"button",18),Ie("click",function(){return o.fillEspecialista()}),Y(29,"img",20),P(),x(30,"button",21),Ie("click",function(){return o.fillAdmin()}),Y(31,"img",22),P()()(),x(32,"a",23),re(33,"Quiero registrarme"),P()()()),i&2&&(fe(7),We("ngModel",o.username),fe(3),We("ngModel",o.password),fe(),Ge("ngIf",o.errorMessage))},dependencies:[Wl,zl,Uo,$l,Hl,ka,Fa,Oa,_i,fl],styles:['@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBGEe.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBGEe.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBGEe.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBGEe.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBGEe.woff2) format("woff2");unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBGEe.woff2) format("woff2");unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBGEe.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBGEe.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBA.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBGEe.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBGEe.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBGEe.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBGEe.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBGEe.woff2) format("woff2");unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBGEe.woff2) format("woff2");unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBGEe.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBGEe.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBA.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;width:100%;overflow-y:hidden}body[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/General%2FHospital%20Bartel.jpeg?alt=media&token=3f838801-78f3-4374-86e0-db83ab37e701);background-size:cover;background-position:center;background-attachment:fixed;display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;overflow-y:hidden}.login-container[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:40px;background-color:#16243e;border-radius:10px;box-shadow:0 8px 20px #0000004d;text-align:center;font-family:Roboto;overflow-y:hidden}.titulo[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#fff;margin-bottom:30px;font-family:Roboto}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:25px;border-bottom:2px solid #00bccd;padding-bottom:8px}.input-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:12px}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{flex:1;padding:10px;border:none;font-size:16px;background-color:transparent;color:#fff;font-family:Roboto,sans-serif}input[type=text][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{outline:none}.error-message[_ngcontent-%COMP%]{color:#ff4d4d;font-size:14px;margin-bottom:15px;font-family:Roboto,sans-serif}.buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#1bb3c1;color:#fff;padding:12px;border:none;border-radius:5px;cursor:pointer;font-size:16px;width:100%;font-family:Roboto,sans-serif;transition:background-color .3s,transform .2s}button[_ngcontent-%COMP%]:hover{background-color:#006aff}button[_ngcontent-%COMP%]:active{transform:scale(.95)}.quick-access[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px}.quick-access[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:48%;background-color:#6e6e6e;font-family:Roboto,sans-serif}.quick-access[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#454545}.register-link[_ngcontent-%COMP%]{color:#00bccd;text-decoration:none;font-size:16px;font-weight:700;display:block;margin-top:20px;transition:color .3s;font-family:Roboto,sans-serif}.register-link[_ngcontent-%COMP%]:hover{color:#007bff}.acceso-rapido[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;align-items:center}.acceso-rapido-label[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;margin-bottom:10px;color:#fff}.acceso-rapido-row[_ngcontent-%COMP%]{display:flex;gap:20px}.acceso-rapido-btn[_ngcontent-%COMP%]{width:60px;height:60px;background-color:transparent;border:2px solid #fff;border-radius:10px;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:transform .3s ease-in-out,background-color .3s ease;box-shadow:0 4px 8px #0003}.acceso-rapido-btn[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain;transition:transform .3s ease-in-out}.paciente[_ngcontent-%COMP%]{background-color:red}.paciente[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#8b0000}.paciente[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.especialista[_ngcontent-%COMP%]{background-color:green}.especialista[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#006400}.especialista[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.admin[_ngcontent-%COMP%]{background-color:gray}.admin[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#a9a9a9}.admin[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}']});let t=e;return t})();var cS="firebasestorage.googleapis.com",uS="storageBucket",WB=2*60*1e3,KB=10*60*1e3;var Be=class t extends St{constructor(e,n,r=0){super(S_(e),`Firebase Storage: ${n} (${S_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return S_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},qe=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(qe||{});function S_(t){return"storage/"+t}function O_(){let t="An unknown error occurred, please check the error payload for server response.";return new Be(qe.UNKNOWN,t)}function QB(t){return new Be(qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function YB(t){return new Be(qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function JB(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Be(qe.UNAUTHENTICATED,t)}function ZB(){return new Be(qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XB(t){return new Be(qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function e$(){return new Be(qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function t$(){return new Be(qe.CANCELED,"User canceled the upload/download.")}function n$(t){return new Be(qe.INVALID_URL,"Invalid URL '"+t+"'.")}function r$(t){return new Be(qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function i$(){return new Be(qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uS+"' property when initializing the app?")}function o$(){return new Be(qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function s$(){return new Be(qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function a$(t){return new Be(qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function R_(t){return new Be(qe.INVALID_ARGUMENT,t)}function lS(){return new Be(qe.APP_DELETED,"The Firebase app was deleted.")}function c$(t){return new Be(qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bc(t,e){return new Be(qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ic(t){throw new Be(qe.INTERNAL_ERROR,"Internal error: "+t)}var hn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw r$(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(q){q.path_=decodeURIComponent(q.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",E=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),A={bucket:1,path:3},M=n===cS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",k=new RegExp(`^https?://${M}/${i}/${R}`,"i"),V=[{regex:a,indices:u,postModify:o},{regex:E,indices:A,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let q=0;q<V.length;q++){let Se=V[q],Z=Se.regex.exec(e);if(Z){let b=Z[Se.indices.bucket],y=Z[Se.indices.path];y||(y=""),r=new t(b,y),Se.postModify(r);break}}if(r==null)throw n$(e);return r}},M_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function u$(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,t(E,u())},R)}function m(){o&&clearTimeout(o)}function E(R,...k){if(l){m();return}if(R){m(),h.call(null,R,...k);return}if(u()||s){m(),h.call(null,R,...k);return}r<64&&(r*=2);let V;a===1?(a=2,V=0):V=(r+Math.random())*1e3,p(V)}let A=!1;function M(R){A||(A=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,M(!0)},n),M}function l$(t){t(!1)}function d$(t){return t!==void 0}function h$(t){return typeof t=="object"&&!Array.isArray(t)}function F_(t){return typeof t=="string"||t instanceof String}function nS(t){return k_()&&t instanceof Blob}function k_(){return typeof Blob<"u"}function rS(t,e,n,r){if(r<e)throw R_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw R_(`Invalid value for '${t}'. Expected ${n} or less.`)}function L_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function dS(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var fs=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(fs||{});function f$(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var x_=class{constructor(e,n,r,i,o,s,a,u,l,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,A)=>{this.resolve_=E,this.reject_=A,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new hs(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===fs.NO_ERROR,u=o.getStatus();if(!a||f$(u,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===fs.ABORT;r(!1,new hs(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new hs(l,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());d$(u)?o(u):o()}catch(u){s(u)}else if(a!==null){let u=O_();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){let u=this.appDelete_?lS():t$();s(u)}else{let u=e$();s(u)}};this.canceled_?n(!1,new hs(!1,null,!0)):this.backoffId_=u$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},hs=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function p$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function g$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function y$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function v$(t,e,n,r,i,o,s=!0){let a=dS(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return m$(l,e),p$(l,n),g$(l,o),y$(l,r),new x_(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function _$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function w$(...t){let e=_$();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(k_())return new Blob(t);throw new Be(qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function E$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function I$(t){if(typeof atob>"u")throw a$("base-64");return atob(t)}var Ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Cc=class{constructor(e,n){this.data=e,this.contentType=n||null}};function b$(t,e){switch(t){case Ln.RAW:return new Cc(hS(e));case Ln.BASE64:case Ln.BASE64URL:return new Cc(fS(t,e));case Ln.DATA_URL:return new Cc(D$(e),T$(e))}throw O_()}function hS(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function C$(t){let e;try{e=decodeURIComponent(t)}catch{throw bc(Ln.DATA_URL,"Malformed data URL.")}return hS(e)}function fS(t,e){switch(t){case Ln.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw bc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ln.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw bc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=I$(e)}catch(i){throw i.message.includes("polyfill")?i:bc(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var fh=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw bc(Ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=A$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function D$(t){let e=new fh(t);return e.base64?fS(Ln.BASE64,e.rest):C$(e.rest)}function T$(t){return new fh(t).contentType}function A$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var ph=class t{constructor(e,n){let r=0,i="";nS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(nS(this.data_)){let r=this.data_,i=E$(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(k_()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(w$.apply(null,n))}else{let n=e.map(s=>F_(s)?b$(Ln.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function pS(t){let e;try{e=JSON.parse(t)}catch{return null}return h$(e)?e:null}function S$(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function R$(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function gS(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function M$(t,e){return e}var dt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||M$}},hh=null;function x$(t){return!F_(t)||t.length<2?t:gS(t)}function mS(){if(hh)return hh;let t=[];t.push(new dt("bucket")),t.push(new dt("generation")),t.push(new dt("metageneration")),t.push(new dt("name","fullPath",!0));function e(o,s){return x$(s)}let n=new dt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new dt("size");return i.xform=r,t.push(i),t.push(new dt("timeCreated")),t.push(new dt("updated")),t.push(new dt("md5Hash",null,!0)),t.push(new dt("cacheControl",null,!0)),t.push(new dt("contentDisposition",null,!0)),t.push(new dt("contentEncoding",null,!0)),t.push(new dt("contentLanguage",null,!0)),t.push(new dt("contentType",null,!0)),t.push(new dt("metadata","customMetadata",!0)),hh=t,hh}function N$(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new hn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function P$(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return N$(r,t),r}function yS(t,e,n){let r=pS(e);return r===null?null:P$(t,r,n)}function O$(t,e,n,r){let i=pS(e);if(i===null||!F_(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let h=t.bucket,p=t.fullPath,m="/b/"+s(h)+"/o/"+s(p),E=L_(m,n,r),A=dS({alt:"media",token:l});return E+A})[0]}function F$(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var gh=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function vS(t){if(!t)throw O_()}function k$(t,e){function n(r,i){let o=yS(t,i,e);return vS(o!==null),o}return n}function L$(t,e){function n(r,i){let o=yS(t,i,e);return vS(o!==null),O$(o,i,t.host,t._protocol)}return n}function _S(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=ZB():i=JB():n.getStatus()===402?i=YB(t.bucket):n.getStatus()===403?i=XB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function V$(t){let e=_S(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=QB(t.path)),o.serverResponse=i.serverResponse,o}return n}function U$(t,e,n){let r=e.fullServerUrl(),i=L_(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new gh(i,o,L$(t,n),s);return a.errorHandler=V$(e),a}function j$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function B$(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=j$(null,e)),r}function $$(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}let u=a();s["Content-Type"]="multipart/related; boundary="+u;let l=B$(e,r,i),h=F$(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+u+"--",E=ph.getBlob(p,r,m);if(E===null)throw o$();let A={name:l.fullPath},M=L_(o,t.host,t._protocol),R="POST",k=t.maxUploadRetryTime,B=new gh(M,R,k$(t,n),k);return B.urlParams=A,B.headers=s,B.body=E.uploadData(),B.errorHandler=_S(e),B}var NW=256*1024;var iS=null,N_=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Ic("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},P_=class extends N_{initXhr(){this.xhr_.responseType="text"}};function wS(){return iS?iS():new P_}var ps=class t{constructor(e,n){this._service=e,n instanceof hn?this._location=n:this._location=hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gS(this._location.path)}get storage(){return this._service}get parent(){let e=S$(this._location.path);if(e===null)return null;let n=new hn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw c$(e)}};function H$(t,e,n){t._throwIfRoot("uploadBytes");let r=$$(t.storage,t._location,mS(),new ph(e,!0),n);return t.storage.makeRequestWithTokens(r,wS).then(i=>({metadata:i,ref:t}))}function q$(t){t._throwIfRoot("getDownloadURL");let e=U$(t.storage,t._location,mS());return t.storage.makeRequestWithTokens(e,wS).then(n=>{if(n===null)throw s$();return n})}function z$(t,e){let n=R$(t._location.path,e),r=new hn(t._location.bucket,n);return new ps(t.storage,r)}function G$(t){return/^[A-Za-z]+:\/\//.test(t)}function W$(t,e){return new ps(t,e)}function ES(t,e){if(t instanceof Dc){let n=t;if(n._bucket==null)throw i$();let r=new ps(n,n._bucket);return e!=null?ES(r,e):r}else return e!==void 0?z$(t,e):t}function K$(t,e){if(e&&G$(e)){if(t instanceof Dc)return W$(t,e);throw R_("To use ref(service, url), the first argument must be a Storage instance.")}else return ES(t,e)}function oS(t,e){let n=e?.[uS];return n==null?null:hn.makeFromBucketSpec(n,t)}function Q$(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Jl(i,t.app.options.projectId))}var Dc=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=cS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WB,this._maxUploadRetryTime=KB,this._requests=new Set,i!=null?this._bucket=hn.makeFromBucketSpec(i,this._host):this._bucket=oS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hn.makeFromBucketSpec(this._url,e):this._bucket=oS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ps(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new M_(lS());{let s=v$(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},sS="@firebase/storage",aS="0.13.2";var IS="storage";function mh(t,e,n){return t=He(t),H$(t,e,n)}function yh(t){return t=He(t),q$(t)}function vh(t,e){return t=He(t),K$(t,e)}function bS(t=Ur(),e){t=He(t);let r=Ti(t,IS).getImmediate({identifier:e}),i=Yl("storage");return i&&Y$(r,...i),r}function Y$(t,e,n,r={}){Q$(t,e,n,r)}function J$(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Dc(n,r,i,e,Tn)}function Z$(){Dn(new Mt(IS,J$,"PUBLIC").setMultipleInstances(!0)),Ue(sS,aS,""),Ue(sS,aS,"esm2017")}Z$();function X$(t,e){if(t&1){let n=sa();x(0,"div",3)(1,"button",4),Ie("click",function(){xe(n);let i=ue();return Ne(i.seleccionarTipo("paciente"))}),Y(2,"img",5),re(3," Paciente "),P(),x(4,"button",4),Ie("click",function(){xe(n);let i=ue();return Ne(i.seleccionarTipo("especialista"))}),Y(5,"img",6),re(6," Especialista "),P(),x(7,"div",7)(8,"button",8),Ie("click",function(){xe(n);let i=ue();return Ne(i.volverLogin())}),re(9," \u{1F814} "),P()()()}}function e4(t,e){if(t&1&&Y(0,"img",42),t&2){let n=ue(2);Ge("src",n.imagenesPerfil.paciente.fotoPerfil,ia)}}function t4(t,e){if(t&1&&Y(0,"img",42),t&2){let n=ue(2);Ge("src",n.imagenesPerfil.paciente.fotoPerfil2,ia)}}function n4(t,e){if(t&1&&(x(0,"div",43),re(1),P()),t&2){let n=ue(2);fe(),mi(n.errorMessage)}}function r4(t,e){if(t&1){let n=sa();x(0,"form",9,0),Ie("ngSubmit",function(){xe(n);let i=ue();return Ne(i.onSubmit())}),x(2,"div",10),re(3," REGISTRATE COMO PACIENTE "),P(),x(4,"div",11)(5,"label",12),Y(6,"img",13),P(),x(7,"input",14),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.nombre,i)||(o.nombre=i),Ne(i)}),P()(),x(8,"div",11)(9,"label",15),Y(10,"img",16),P(),x(11,"input",17),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.apellido,i)||(o.apellido=i),Ne(i)}),P()(),x(12,"div",11)(13,"label",18),Y(14,"img",19),P(),x(15,"input",20),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.edad,i)||(o.edad=i),Ne(i)}),P()(),x(16,"div",11)(17,"label",21),Y(18,"img",22),P(),x(19,"input",23),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.dni,i)||(o.dni=i),Ne(i)}),P()(),x(20,"div",11)(21,"label",24),Y(22,"img",25),P(),x(23,"input",26),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.obraSocial,i)||(o.obraSocial=i),Ne(i)}),P()(),x(24,"div",11)(25,"label",27),Y(26,"img",28),P(),x(27,"input",29),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.correo,i)||(o.correo=i),Ne(i)}),P()(),x(28,"div",11)(29,"label",30),Y(30,"img",31),P(),x(31,"input",32),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.contrasena,i)||(o.contrasena=i),Ne(i)}),P()(),x(32,"div",11)(33,"label",33),Y(34,"img",34),x(35,"span"),re(36,"Seleccione una foto de su rostro"),P(),x(37,"input",35),Ie("change",function(i){xe(n);let o=ue();return Ne(o.onImageSelected(i,"paciente","fotoPerfil"))}),P()(),zt(38,e4,1,1,"img",36),P(),x(39,"div",11)(40,"label",37),Y(41,"img",38),x(42,"span"),re(43,"Seleccione una foto de su dni"),P(),x(44,"input",39),Ie("change",function(i){xe(n);let o=ue();return Ne(o.onImageSelected(i,"paciente","fotoPerfil2"))}),P()(),zt(45,t4,1,1,"img",36),P(),x(46,"button",8),Ie("click",function(){xe(n);let i=ue();return Ne(i.volverSeleccionTipo())}),re(47," \u{1F814} "),P(),x(48,"button",40),re(49,"Registrar"),P(),zt(50,n4,2,1,"div",41),P()}if(t&2){let n=ue();fe(7),We("ngModel",n.nombre),fe(4),We("ngModel",n.apellido),fe(4),We("ngModel",n.edad),fe(4),We("ngModel",n.dni),fe(4),We("ngModel",n.obraSocial),fe(4),We("ngModel",n.correo),fe(4),We("ngModel",n.contrasena),fe(7),Ge("ngIf",n.imagenesPerfil.paciente.fotoPerfil),fe(7),Ge("ngIf",n.imagenesPerfil.paciente.fotoPerfil2),fe(5),Ge("ngIf",n.errorMessage)}}function i4(t,e){if(t&1&&(x(0,"option",59),re(1),P()),t&2){let n=e.$implicit;Ge("value",n),fe(),mi(n)}}function o4(t,e){if(t&1){let n=sa();x(0,"div",11),Y(1,"img",60),x(2,"input",61),Ke("ngModelChange",function(i){xe(n);let o=ue(2);return tt(o.nuevaEspecialidad,i)||(o.nuevaEspecialidad=i),Ne(i)}),P(),x(3,"button",62),Ie("click",function(){xe(n);let i=ue(2);return Ne(i.agregarEspecialidad())}),re(4,"Agregar"),P()()}if(t&2){let n=ue(2);fe(2),We("ngModel",n.nuevaEspecialidad)}}function s4(t,e){if(t&1&&Y(0,"img",42),t&2){let n=ue(2);Ge("src",n.imagenesPerfil.especialista.fotoPerfilEsp,ia)}}function a4(t,e){if(t&1&&(x(0,"div",43),re(1),P()),t&2){let n=ue(2);fe(),mi(n.errorMessage)}}function c4(t,e){if(t&1){let n=sa();x(0,"form",9,0),Ie("ngSubmit",function(){xe(n);let i=ue();return Ne(i.onSubmit())}),x(2,"div",10),re(3," REGISTRATE COMO ESPECIALISTA "),P(),x(4,"div",11),Y(5,"img",13),x(6,"input",44),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.nombre,i)||(o.nombre=i),Ne(i)}),P()(),x(7,"div",11),Y(8,"img",16),x(9,"input",45),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.apellido,i)||(o.apellido=i),Ne(i)}),P()(),x(10,"div",11),Y(11,"img",22),x(12,"input",46),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.dni,i)||(o.dni=i),Ne(i)}),P()(),x(13,"div",11),Y(14,"img",19),x(15,"input",47),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.edad,i)||(o.edad=i),Ne(i)}),P()(),x(16,"div",11),Y(17,"img",48),x(18,"select",49),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.especialidadSeleccionada,i)||(o.especialidadSeleccionada=i),Ne(i)}),x(19,"option",50),re(20,"Seleccione una especialidad"),P(),zt(21,i4,2,2,"option",51),P()(),zt(22,o4,5,1,"div",52),x(23,"div",11),Y(24,"img",28),x(25,"input",53),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.correo,i)||(o.correo=i),Ne(i)}),P()(),x(26,"div",11),Y(27,"img",31),x(28,"input",54),Ke("ngModelChange",function(i){xe(n);let o=ue();return tt(o.contrasena,i)||(o.contrasena=i),Ne(i)}),P()(),x(29,"div",11)(30,"label",55),Y(31,"img",56),x(32,"span"),re(33,"Selecciona tu imagen de perfil"),P(),x(34,"input",57),Ie("change",function(i){xe(n);let o=ue();return Ne(o.onImageSelected(i,"especialista","fotoPerfilEsp"))}),P()(),zt(35,s4,1,1,"img",36),P(),x(36,"button",8),Ie("click",function(){xe(n);let i=ue();return Ne(i.volverSeleccionTipo())}),re(37," \u{1F814} "),P(),x(38,"button",58),re(39,"Registrar"),P(),zt(40,a4,2,1,"div",41),P()}if(t&2){let n=ue();fe(6),We("ngModel",n.nombre),fe(3),We("ngModel",n.apellido),fe(3),We("ngModel",n.dni),fe(3),We("ngModel",n.edad),fe(3),We("ngModel",n.especialidadSeleccionada),fe(3),Ge("ngForOf",n.especialidades),fe(),Ge("ngIf",n.especialidadSeleccionada==="otra"),fe(3),We("ngModel",n.correo),fe(3),We("ngModel",n.contrasena),fe(7),Ge("ngIf",n.imagenesPerfil.especialista.fotoPerfilEsp),fe(5),Ge("ngIf",n.errorMessage)}}var CS=(()=>{let e=class e{constructor(r){this.router=r,this.loginStatusChange=new Ve,this.correo="",this.contrasena="",this.tipoSeleccionado=null,this.nombre="",this.apellido="",this.dni="",this.edad="",this.especialidadSeleccionada="",this.obraSocial="",this.nuevaEspecialidad="",this.errorMessage="",this.imagenesPerfil={paciente:{fotoPerfil:null,fotoPerfil2:null},especialista:{fotoPerfil:null}},this.especialidades=["Odontologo","Pediatra","Kinesiologo","Cardiologo"]}seleccionarTipo(r){this.tipoSeleccionado=r}agregarEspecialidad(){this.nuevaEspecialidad.trim()!==""&&(this.especialidades.push(this.nuevaEspecialidad.trim()),this.nuevaEspecialidad="")}onImageSelected(r,i,o){let s=r.target;if(s.files&&s.files[0]){let a=s.files[0],u=new FileReader;u.onload=l=>{this.imagenesPerfil[i][o]=l.target?.result},u.readAsDataURL(a)}}verificarCorreoExistente(r){return v(this,null,function*(){try{let i=un();return(yield Ed(i,r)).length>0}catch(i){throw console.error("Error al verificar correo existente:",i),new Error("Error al verificar correo existente.")}})}onSubmit(){return v(this,null,function*(){let r=un(),i=ds(),o=bS();if(!this.nombre||!this.apellido||!this.dni||!this.edad){this.errorMessage="Todos los campos son obligatorios.";return}let s=this.correo,a=this.contrasena;if(!s||!a){this.errorMessage="Correo y contrase\xF1a son obligatorios.";return}try{if(yield this.verificarCorreoExistente(s)){this.errorMessage="El correo ya est\xE1 registrado. Por favor, utiliza otro.";return}}catch{this.errorMessage="Error al verificar el correo. Intenta nuevamente.";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){this.errorMessage="El formato del correo es inv\xE1lido.";return}if(this.tipoSeleccionado==="paciente"){if(!this.imagenesPerfil.paciente.fotoPerfil||!this.imagenesPerfil.paciente.fotoPerfil2){this.errorMessage="Por favor, carga ambas im\xE1genes del perfil del paciente.";return}}else if(this.tipoSeleccionado==="especialista"&&!this.imagenesPerfil.especialista.fotoPerfilEsp){this.errorMessage="Por favor, carga la imagen del perfil del especialista.";return}try{let h=(yield _d(r,s,a)).user,p,m,E={contentType:"image/jpeg"};if(this.tipoSeleccionado==="paciente"){let k=vh(o,`imagenes/Pacientes/${h.uid}_${Date.now()}_1`),B=yield mh(k,this.imagenesPerfil.paciente.fotoPerfil,E);p=yield yh(B.ref);let V=vh(o,`imagenes/Pacientes/${h.uid}_${Date.now()}_2`),q=yield mh(V,this.imagenesPerfil.paciente.fotoPerfil2,E);m=yield yh(q.ref)}else if(this.tipoSeleccionado==="especialista"){let k=vh(o,`imagenes/Especialistas/${h.uid}_${Date.now()}_1`),B=yield mh(k,this.imagenesPerfil.especialista.fotoPerfilEsp,E);p=yield yh(B.ref)}let A=this.tipoSeleccionado==="paciente"?"pacientes":"especialistas",M=$i(i,A,h.uid),R={nombre:this.nombre,apellido:this.apellido,edad:this.edad,dni:this.dni,correo:s,imagenPerfil:this.tipoSeleccionado==="paciente"?[p,m]:[p]};this.tipoSeleccionado==="paciente"?R.obraSocial=this.obraSocial:this.tipoSeleccionado==="especialista"&&(R.especialidad=this.especialidadSeleccionada),yield T_(M,R),this.router.navigate(["/login"])}catch(l){l.code==="auth/invalid-email"?this.errorMessage="El formato del correo es inv\xE1lido.":l.code==="auth/email-already-in-use"?this.errorMessage="El correo ya est\xE1 registrado. Por favor, utiliza otro.":l.code==="auth/weak-password"?this.errorMessage="La contrase\xF1a es demasiado d\xE9bil. Debe tener al menos 6 caracteres.":this.errorMessage="Hubo un error al registrar el usuario. Intenta nuevamente."}})}volverLogin(){this.router.navigate(["/login"])}volverSeleccionTipo(){this.tipoSeleccionado=null}};e.\u0275fac=function(i){return new(i||e)($(Qt))},e.\u0275cmp=Bt({type:e,selectors:[["app-registro"]],outputs:{loginStatusChange:"loginStatusChange"},standalone:!0,features:[Gt],decls:4,vars:3,consts:[["registroForm","ngForm"],["class","tipo-seleccion",4,"ngIf"],["class","formulario",3,"ngSubmit",4,"ngIf"],[1,"tipo-seleccion"],[1,"boton-tipo",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2Fpaciente.png?alt=media&token=2e59f333-e3d4-427a-bd5e-ea59472ac396","alt","Paciente"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2Fdoctor.png?alt=media&token=d9d6a78a-ad6a-4e8c-abd7-4a69f26fd7df","alt","Especialista"],[1,"btn-login"],[1,"btn-atras",3,"click"],[1,"formulario",3,"ngSubmit"],[1,"titulo-form"],[1,"input-container"],["for","nombre"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2FUsuarioW.png?alt=media&token=335845c9-ccf3-466f-a709-8dc973648919","alt","Nombre",1,"input-icon"],["type","text","id","nombre","name","nombre","required","","placeholder","Nombre del paciente",3,"ngModelChange","ngModel"],["for","apellido"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2Fapellido.png?alt=media&token=12696ffd-50fb-4e7c-b079-90d1436f4813","alt","Apellido",1,"input-icon"],["type","text","id","apellido","name","apellido","required","","placeholder","Apellido del paciente",3,"ngModelChange","ngModel"],["for","edad"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2Fedad.png?alt=media&token=c7d04542-0fc4-4a19-8bce-de28475ce8ab","alt","Edad",1,"input-icon"],["type","number","id","edad","name","edad","required","","placeholder","Edad del paciente",3,"ngModelChange","ngModel"],["for","dni"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2Fdni.png?alt=media&token=a3641431-2780-4aeb-9e29-d1b51a6b9897","alt","DNI",1,"input-icon"],["type","text","id","dni","name","dni","required","","placeholder","DNI del paciente",3,"ngModelChange","ngModel"],["for","obraSocial"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2Fobrasocial.png?alt=media&token=9987738a-7bf4-47db-ac16-7d3ccd040a23","alt","Obra Social",1,"input-icon"],["type","text","id","obraSocial","name","obraSocial","required","","placeholder","Obra social del paciente",3,"ngModelChange","ngModel"],["for","correo"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2FCorreo.png?alt=media&token=893fb86d-e897-405c-9135-b92773f98cec","alt","Correo",1,"input-icon"],["type","email","id","correo","name","correo","required","","placeholder","Correo electr\xF3nico",3,"ngModelChange","ngModel"],["for","contrasena"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2FCandadoW.png?alt=media&token=53af1ff2-1654-4f90-8585-92c8b31fd92e","alt","Contrase\xF1a",1,"input-icon"],["type","password","id","contrasena","name","contrasena","required","","placeholder","Contrase\xF1a",3,"ngModelChange","ngModel"],["for","paciente-foto-perfil",1,"file-label"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2Frostro.png?alt=media&token=2cbc023d-44b2-4c27-a525-32986057c50b","alt","Foto de Perfil",1,"input-icon"],["type","file","id","paciente-foto-perfil","accept","image/*","required","",3,"change"],["alt","Vista previa","class","preview-image",3,"src",4,"ngIf"],["for","paciente-foto-identificacion",1,"file-label"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2Fdni2.png?alt=media&token=80b6649a-af88-4d5e-bde2-8412d5b93726","alt","Foto de Identificaci\xF3n",1,"input-icon"],["type","file","id","paciente-foto-identificacion","accept","image/*","required","",3,"change"],["type","submit",1,"btn","btn-primary"],["class","error-message",4,"ngIf"],["alt","Vista previa",1,"preview-image",3,"src"],[1,"error-message"],["id","nombre","name","nombre","required","","type","text","placeholder","Nombre del especialista",3,"ngModelChange","ngModel"],["id","apellido","name","apellido","required","","type","text","placeholder","Apellido del especialista",3,"ngModelChange","ngModel"],["id","dni","name","dni","required","","type","text","placeholder","DNI del especialista",3,"ngModelChange","ngModel"],["id","edad","name","edad","required","","type","number","placeholder","Edad del especialista",3,"ngModelChange","ngModel"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2Fespecialidad2.png?alt=media&token=fd641cdb-94ca-4067-a897-33552cfd4db4","alt","Especialidad",1,"input-icon"],["id","especialidad","name","especialidad","required","","placeholder","Selecciona una especialidad",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","input-container",4,"ngIf"],["id","correo","name","correo","required","","type","email","placeholder","Correo electr\xF3nico",3,"ngModelChange","ngModel"],["id","contrasena","name","contrasena","required","","type","password","placeholder","Contrase\xF1a",3,"ngModelChange","ngModel"],["for","especialista-foto-perfil",1,"file-label"],["src","https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/Registro%2FFormularios%2Fimage%20(29).png?alt=media&token=7c140d4d-335f-48ef-bc99-40df2a1ed5be","alt","Especialista",1,"input-icon"],["type","file","id","especialista-foto-perfil","accept","image/*","required","",3,"change"],["type","submit",1,"submit-btn"],[3,"value"],["src","ruta_a_icono_especialidad.png","alt","Nueva especialidad",1,"input-icon"],["type","text","placeholder","Escribe la nueva especialidad",3,"ngModelChange","ngModel"],[3,"click"]],template:function(i,o){i&1&&(x(0,"body"),zt(1,X$,10,0,"div",1)(2,r4,51,10,"form",2)(3,c4,41,11,"form",2),P()),i&2&&(fe(),Ge("ngIf",!o.tipoSeleccionado),fe(),Ge("ngIf",o.tipoSeleccionado==="paciente"),fe(),Ge("ngIf",o.tipoSeleccionado==="especialista"))},dependencies:[Wl,zl,JC,XC,Uo,vm,Gl,$l,Hl,ka,Fa,Oa,_i,Fb,fl],styles:["body[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tpclinica-bartel.appspot.com/o/General%2FHospital%20Bartel.jpeg?alt=media&token=3f838801-78f3-4374-86e0-db83ab37e701);background-size:cover;background-position:center;background-attachment:fixed;height:100vh;width:100vw;overflow:hidden}.tipo-seleccion[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:40px;margin-bottom:40px;max-width:500px;margin-left:auto;margin-right:auto;height:100%}.boton-tipo[_ngcontent-%COMP%]{background-color:#16243e;border:none;border-radius:15px;padding:20px 30px;cursor:pointer;transition:transform .3s,background-color .3s;text-align:center;font-weight:700;font-size:16px;color:#fff;display:flex;flex-direction:column;align-items:center;width:250px}.boton-tipo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:20%;margin-bottom:10px;transition:transform .3s}.boton-tipo[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#1bb3c1}.boton-tipo[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.btn-atras[_ngcontent-%COMP%]{background-color:#fff;color:#000;padding:12px;border:none;border-radius:8px;font-size:18px;cursor:pointer;width:100px;margin:0 auto 20px;display:block;text-align:center}.btn-atras[_ngcontent-%COMP%]:hover{background-color:#b8b8b8}.formulario[_ngcontent-%COMP%]{background-color:#1a1a2e;padding:30px;border-radius:12px;box-shadow:0 8px 15px #0003;width:500px;margin:30px auto auto;color:#fff}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:25px;background-color:#2a2a3c;padding:10px;border-radius:10px;font-family:Roboto,sans-serif}.input-icon[_ngcontent-%COMP%]{width:35px;height:35px;margin-right:15px;transition:transform .3s}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #444;border-radius:8px;background-color:transparent;color:#fff;font-size:16px;transition:border-color .3s}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#1bb3c1;outline:none}button[_ngcontent-%COMP%]{background-color:#1bb3c1;color:#fff;padding:12px;border:none;border-radius:8px;font-size:18px;cursor:pointer;transition:background-color .3s,transform .3s;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#1aabcb;transform:scale(1.05)}.error-message[_ngcontent-%COMP%]{color:red;font-size:24px;text-align:center;margin-top:15px}.titulo-form[_ngcontent-%COMP%]{color:#fff;font-size:25px;text-align:center;margin-bottom:20px;font-family:Roboto,sans-serif}select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #444;border-radius:8px;background-color:#1a1a2e;color:#fff;font-size:16px;appearance:none;transition:border-color .3s}select[_ngcontent-%COMP%]:focus{border-color:#1bb3c1;outline:none}input[type=file][_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer;z-index:2}.file-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#4caf50;color:#fff;padding:12px;border-radius:8px;cursor:pointer;font-weight:700;width:100%;text-align:center;position:relative;z-index:1;transition:background-color .3s,transform .3s}.file-label[_ngcontent-%COMP%]:hover{background-color:#45a049;transform:scale(1.05)}.preview-image[_ngcontent-%COMP%]{margin-top:15px;width:60px;height:60px;object-fit:cover;border-radius:8px;box-shadow:0 4px 8px #0000004d;margin-bottom:20px;margin-left:20px}"]});let t=e;return t})();var DS=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:AC},{path:"login",component:tS},{path:"registro",component:CS},{path:"**",component:SC}];var qi=new Wn("ANGULARFIRE2_VERSION");function wh(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Tc=(t,e)=>{let n=e?[e]:ed(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ms=class{constructor(){return Tc(u4)}},u4="app-check";function gs(){}var _h=class{zone;delegate;constructor(e,n=lf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},V_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gs,{},gs,gs)),n.pipe(Xe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ys=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new _h(Zone.current)),this.insideAngular=n.run(()=>new _h(Zone.current,uf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(he(Ae))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Eh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function l4(t){return Eh().ngZone.runOutsideAngular(()=>t())}function Hi(t){return Eh().ngZone.run(()=>t())}function d4(t){return h4(Eh())(t)}function h4(t){return function(n){return n=n.lift(new V_(t.ngZone)),n.pipe(wr(t.outsideAngular),_r(t.insideAngular))}}var f4=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Hi(()=>t.apply(void 0,r))},vs=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Hi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gs,{},gs,gs))),r[o]=f4(r[o],n));let i=l4(()=>t.apply(this,r));if(!e)if(i instanceof me){let o=Eh();return i.pipe(wr(o.outsideAngular),_r(o.insideAngular))}else return Hi(()=>i);return i instanceof me?i.pipe(d4):i instanceof Promise?Hi(()=>new Promise((o,s)=>i.then(a=>Hi(()=>o(a)),a=>Hi(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Hi(()=>i)};var hr=class{constructor(e){return e}},zi=class{constructor(){return ed()}};function p4(t){return t&&t.length===1?t[0]:new hr(Ur())}var U_=new Q("angularfire2._apps"),g4={provide:hr,useFactory:p4,deps:[[new Ct,U_]]},m4={provide:zi,deps:[[new Ct,U_]]};function y4(t){return(e,n)=>{let r=n.get(Rr);Ue("angularfire",qi.full,"core"),Ue("angularfire",qi.full,"app"),Ue("angular",mb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new hr(i)}}function TS(t,...e){return wn([g4,m4,{provide:U_,useFactory:y4(t),multi:!0,deps:[Ae,Ht,ys,...e]}])}var AS=vs(Ai,!0);var SS="auth",Ac=class{constructor(e){return e}},Sc=class{constructor(){return Tc(SS)}};var j_=new Q("angularfire2.auth-instances");function v4(t,e){let n=wh(SS,t,e);return n&&new Ac(n)}function _4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ac(r)}}var w4={provide:Sc,deps:[[new Ct,j_]]},E4={provide:Ac,useFactory:v4,deps:[[new Ct,j_],hr]};function RS(t,...e){return Ue("angularfire",qi.full,"auth"),wn([E4,w4,{provide:j_,useFactory:_4(t),multi:!0,deps:[Ae,Ht,ys,zi,[new Ct,ms],...e]}])}var MS=vs(un,!0);var Rc=class{constructor(e){return e}},xS="firestore",B_=class{constructor(){return Tc(xS)}};var $_=new Q("angularfire2.firestore-instances");function I4(t,e){let n=wh(xS,t,e);return n&&new Rc(n)}function b4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Rc(r)}}var C4={provide:B_,deps:[[new Ct,$_]]},D4={provide:Rc,useFactory:I4,deps:[[new Ct,$_],hr]};function NS(t,...e){return Ue("angularfire",qi.full,"fst"),wn([D4,C4,{provide:$_,useFactory:b4(t),multi:!0,deps:[Ae,Ht,ys,zi,[new Ct,Sc],[new Ct,ms],...e]}])}var PS=vs(ds,!0);var OS={providers:[TC(DS),TS(()=>AS({apiKey:"AIzaSyAYjraUOfAcEzoouAFEsc1yyFqF4fqx7-c",authDomain:"pp-labo-iv----bartel.firebaseapp.com",projectId:"pp-labo-iv----bartel",storageBucket:"pp-labo-iv----bartel.appspot.com",messagingSenderId:"483106802513",appId:"1:483106802513:web:3b6f0b00ea7e3ffa6ea170"})),RS(()=>MS()),NS(()=>PS())]};var T4=t=>({"no-scroll":t}),FS=(()=>{let e=class e{constructor(r){this.router=r,this.title="rutas",this.isLoggedIn=!1}ngOnInit(){let r=un();Id(r,i=>{i?this.isLoggedIn=!0:this.isLoggedIn=!1})}setLoginStatus(r){this.isLoggedIn=r}logout(){let r=un();bd(r).then(()=>{this.isLoggedIn=!1,this.router.navigate(["/login"])}).catch(i=>{console.error("Error al cerrar sesi\xF3n: ",i)})}updateLoginStatus(r){this.isLoggedIn=r}get isLoginOrRegister(){return this.router.url==="/login"||this.router.url==="/registro"}};e.\u0275fac=function(i){return new(i||e)($(Qt))},e.\u0275cmp=Bt({type:e,selectors:[["app-root"]],standalone:!0,features:[Gt],decls:9,vars:3,consts:[[3,"ngClass"],[1,"nav"],[1,"button-group"],["routerLink","home","routerLinkActive","active-route"],[1,"form-container1"]],template:function(i,o){i&1&&(x(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),re(5,"INICIO"),P()()(),x(6,"div",4),Y(7,"router-outlet"),P(),Y(8,"router-outlet"),P()()),i&2&&(fe(),Ge("ngClass",gb(1,T4,o.isLoginOrRegister)))},dependencies:[om,xl,DC,_i,Ob],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-height:100vh;overflow-x:hidden}.form-container[_ngcontent-%COMP%], .form-container1[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:50px}.login-button-container[_ngcontent-%COMP%], .logout-button-container[_ngcontent-%COMP%], .register-button-container[_ngcontent-%COMP%]{position:absolute;top:10px}.button-group[_ngcontent-%COMP%]{position:relative;top:10px;left:50px}button[_ngcontent-%COMP%]{padding:10px 15px;border:none;cursor:pointer;background-color:#fff;margin:0 10px;color:#000;font-size:20px}button[_ngcontent-%COMP%]:hover{color:#00618a}.nav[_ngcontent-%COMP%]{width:100%;background-color:#fff;min-height:60px;box-shadow:0 4px 6px #0000001a;position:fixed;top:0;left:0;z-index:1000;display:flex;font-family:Roboto,sans-serif}.no-scroll[_ngcontent-%COMP%]{overflow-y:hidden}"]});let t=e;return t})();qb(FS,OS).catch(t=>console.error(t));
